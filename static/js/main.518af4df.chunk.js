(this.webpackJsonptendero=this.webpackJsonptendero||[]).push([[0],{2096:function(e,t){},2098:function(e,t){},2108:function(e,t){},2110:function(e,t){},2137:function(e,t){},2139:function(e,t){},2140:function(e,t){},2146:function(e,t){},2148:function(e,t){},2166:function(e,t){},2169:function(e,t){},2185:function(e,t){},2188:function(e,t){},221:function(e,t,a){},2213:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),i=(a(221),a(4)),l=a(38),s=a(64),u=a(5),d=a.n(u),m=a(6),p=a(2218),f=a(393),g=a(2215),h=(a(413),a(57)),b=a(2236),E=a(2237),v=a(2238),O=a(2239),j=a(2240),y=a(2241),_=a(2242),N=a(2229),x=a(2243),S=a(186),w=a(405),k=a(2214),C=a(2216),P=a(39),T=a(141),I=a(80),D=a(2225),F=a(2219),A=a(58),U=a.n(A),z=a(59),B=a.n(z),R=a(40),M=a.n(R),L=a(47),q=a.n(L),H=a(18),K={auth:{name:"",permissions:[],token:null}},G={users:[{id:"",email:"",first_name:"",last_name:"",avatar:""}]},J=function(e){return function(t,a){try{var n=a.type.split(" ")[0];return n=n.trim().split("-").map((function(e,t){return 0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})),n="".concat(n.join(""),"Reducer"),e[n](t,a)}catch(r){throw new Error('The reducer must be included in "slices"')}}}({authReducer:function(e,t){switch(t.type){case"AUTH FETCHED":return Object(H.a)(Object(H.a)({},e),{},{auth:Object.assign(e.auth,t.payload)});case"AUTH":return K;default:throw new Error("El action.type ".concat(t.type," no existe en authReducer"))}},usersReducer:function(e,t){switch(t.type){case"USERS FETCHED":return Object(H.a)(Object(H.a)({},e),{},{users:Object.assign(e.users,t.payload)});case"USERS":return G;default:throw new Error("El action.type ".concat(t.type," no existe en usersReducer"))}},turnReducer:function(e,t){switch(t.type){case"TURN OPENED":return Object(H.a)(Object(H.a)({},e),{},{turn:Object.assign(e.turn,t.payload)});case"TURN STORE":return Object(H.a)(Object(H.a)({},e),{},{store:Object.assign(e.store,t.payload)});case"TURN INFO":return Object(H.a)(Object(H.a)({},e),{},{turnInfo:Object.assign(e.turnInfo,t.payload)});case"TURN CASH":return Object(H.a)(Object(H.a)({},e),{},{storeCash:Object.assign(e.storeCash,t.payload)});case"TURN":return Object(H.a)(Object(H.a)({},e),{},{turn:{},store:{},turnInfo:{},storeCash:{}});default:throw new Error("El action.type ".concat(t.type," no existe en turnReducer"))}}}),Q=[K,G,{turn:{},store:{},turnInfo:{},storeCash:{}}].reduce((function(e,t){return Object.assign(e,t)})),Z=a(108),Y=a.n(Z),V=a(8),W=a.n(V),$=function(e,t){switch(t){case"setter":localStorage.setItem("TenderoApp",JSON.stringify(e));break;case"remove":localStorage.removeItem("TenderoApp");break;case"removeAll":localStorage.clear();break;case"token":var a=JSON.parse(localStorage.getItem("TenderoApp"));if(a.token)return a.token.access_token;a=null;break;default:return JSON.parse(localStorage.getItem("TenderoApp"))}},X=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y()({url:"".concat(W.a.stage.refresh),method:"get",headers:{Authorization:"Bearer "+$(null,"token"),"Content-Type":"application/json"}}).then((function(e){return e.errors?e.errors[0].message:e.data})).catch((function(e){if(e.response&&e.response.data)return e.response.data.message;console.log("Unknown error",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee={sessionApp:$,refreshToken:X},te=function(e){return{hasPermissions:function(t){return t.every((function(t){return e.auth.permissions.some((function(e){return e===t}))}))}}};null===Q.auth.token&&ee.sessionApp()&&(Q.auth=ee.sessionApp());var ae=r.a.createContext(Q),ne=function(e){var t=e.children,a=Object(n.useReducer)(J,Q),c=Object(i.a)(a,2),o=c[0],l=c[1],s=Object(n.useMemo)((function(){return[o,l]}),[o]);return r.a.createElement(ae.Provider,{value:s},t)},re=w.a.Search;var ce=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0],c=te(a).hasPermissions,o=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Regimen",dataIndex:"regime",key:"regime",render:function(e){return r.a.createElement("span",null,e)}},{title:"Nit",dataIndex:"nit",key:"nit",render:function(e){return r.a.createElement("span",null,e)}},{title:"Telefono",dataIndex:"phone",key:"phone",render:function(e){return r.a.createElement("span",null,e)}},{title:"Pais",dataIndex:"pais",key:"pais",render:function(e){return r.a.createElement("span",null,e)}},{title:"Moneda",dataIndex:"currency_name",key:"currency_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Direccion",dataIndex:"address",key:"address",render:function(e){return r.a.createElement("span",null,e)}},{title:"",dataIndex:"id",key:"id",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(k.a,{placement:"left",style:{zIndex:"auto"},content:r.a.createElement("div",null,c([3])&&r.a.createElement("span",{className:"user-options-items",onClick:function(){return l(t)}},"Editar"),c([3,4])&&r.a.createElement(g.a,{className:"divider-enterprise-margins",type:"horizontal"}),c([4])&&r.a.createElement(C.a,{title:"Estas seguro de borrar el elemento selccionado?",onConfirm:function(){return s(t)},okText:"Si",cancelText:"No"},r.a.createElement("span",{className:"user-options-items"},"Eliminar"))),trigger:"click"},(c([3])||c([4]))&&r.a.createElement(P.a,{shape:"circle",className:"enterprise-settings-button"},r.a.createElement(q.a,null))))}}],l=function(t){e.handlerEditRow(t)},s=function(t){e.handlerDeleteRow(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:18,sm:18,md:18,lg:18},r.a.createElement(re,{prefix:r.a.createElement(M.a,{className:"tendero-table-search-icon"}),placeholder:"Presiona enter para buscar",className:"tendero-table-search custom-search",size:"large",onSearch:function(t){return a=t,void e.handlerTextSearch(a);var a}}))),r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius margin-top-15"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{className:"CustomTableClass",dataSource:e.dataSource,columns:o,pagination:!1,loading:e.loading,rowKey:"key",expandable:{expandedRowRender:function(e){return r.a.createElement("div",{className:"text-left"},r.a.createElement("p",null,r.a.createElement("b",null,"Podra crear sus propios productos? ")," ",0!==e.allow_add_products?"Si":"No"),r.a.createElement("p",null,r.a.createElement("b",null,"Podra crear sus propias tiendas? ")," ",0!==e.allow_add_stores?"Si":"No"," "),r.a.createElement("p",null,r.a.createElement("b",null,"Podra crear sus propios usuarios ?")," ",0!==e.uses_fel?"Si":"No"," "),r.a.createElement("p",null,r.a.createElement("b",null,"Facturara de forma electronica ?")," ",0!==e.is_electronic_invoice?"Si":"No"," "))},expandIcon:function(e){var t=e.expanded,a=e.onExpand,n=e.record;return t?r.a.createElement(B.a,{onClick:function(e){return a(n,e)}}):r.a.createElement(U.a,{onClick:function(e){return a(n,e)}})}}})))))))},oe=a(2221),ie=function(){var e=Object(m.a)(d.a.mark((function e(t,a,n){var r,c,o,i,l,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=ee.sessionApp(),s=Le.parseJwt(null===(r=l)||void 0===r||null===(c=r.token)||void 0===c?void 0:c.access_token),Le.checkJwtExpiration(s)){e.next=5;break}return e.next=5,ee.refreshToken().then((function(e){e?(l.token=e,ee.sessionApp(l,"setter")):(l=null,ee.sessionApp(null,"remove"))}));case 5:return e.next=7,Y()({url:t,method:a,headers:{Authorization:"Bearer "+(null===(o=l)||void 0===o||null===(i=o.token)||void 0===i?void 0:i.access_token),"Content-Type":"application/json"},data:JSON.stringify(n)}).then((function(e){return e.errors?e.errors[0].message:e.data})).catch((function(e){var t,a,n;return"Unauthorized"!==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.statusText)&&"Unauthenticated."!==(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)||Le.clearForAuthError(),console.log("Unknown error",e),e.response.data}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),le=function(e,t){return ie(e,"GET",t)},se=function(e,t){return ie(e,"POST",t)},ue=function(e,t){return ie(e,"PUT",t)},de=function(e,t){return ie(e,"DELETE",t)},me=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},pe=function(){window.localStorage.clear(),window.location.reload()},fe=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.currencies_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.countries_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.companies_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.storeType_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.storeChain_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.storeFlag_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Location_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.storeFormat_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.socioeconomicLevel_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.states_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Zones_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Municipality_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Region,"?per_page=100&name=").concat(t,"%&country_id=").concat(a),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),we=function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.states,"?per_page=100&name=").concat(t,"%&region_id=").concat(a),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ke=function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Municipality,"?per_page=100&name=").concat(t,"%&state_id=").concat(a),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Makers,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.ProductDepartament,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.ProductCategory,"?per_page=100&name=").concat(t,"%&product_department_id=").concat(a),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.stores_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.companies,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.products,"?per_page=100&description=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Presentations,"?per_page=100&description=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Uoms_options,"?per_page=100"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Uoms_options,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Turns,"?per_page=100&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Turns,"?per_page=100&name=").concat(t,"%&store_id=").concat(a),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?pe():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var Le={validateEmail:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())&&!["!","$","#","%","^","&","*","+","=","{","}","\u2018","|","/","?","\xa7","`","~","\xa1","\u2122","\xa3","\xa2","\u221e","\xb6","\u2022","\xaa","\xba","\u2013","\u2260","\u201c","\u2019","\xe6","\xab","\u2264","\u2265","\xf7","\xb1","'",'"'].some((function(t){return e.indexOf(t)>-1}))},camelCaseize:function(e){if("string"!==typeof e)return"";var t=["'","|","\xb0","\xac","!","@","\xb7","#","$","~","%","\xbd","&","/","(",")"].concat(["=","?","\\","\xbf","\xa1","\xb8","+","*","\xb4","\xa8","{","}","[","]","^","`"],["-","_",".",":",",",";","\u2500","<",">"]),a=me(e);return(a=(a=a.split("").map((function(e){return t.indexOf(e)>-1?" ":e}))).join("").trim().split(" ").map((function(e,t){return 0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}))).join("").trim()},checkJwtExpiration:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;if(e&&e.exp){var a=parseInt(Date.now()/1e3);return a<e.exp-t}},clearForAuthError:pe,getCurrenciesOption:fe,getCountryOption:ge,getEnterpriseOption:he,getStoreTypeOption:be,getStoreChainOption:Ee,getStoreFlag:ve,getLocation:Oe,getStoreFormat:je,getSocioeconomicLevel:ye,getState:_e,getZone:Ne,getMunicipalities:xe,getNextPage:De,getRegionsByCountryId:Se,getAge:function(e){var t=new Date(e),a=new Date;return parseInt((a-t)/31536e6)},getStateByRegionId:we,getMunicipalitiesByStateId:ke,getMakersOptions:Ce,getProductDepartamentOptions:Pe,getProductCategoryOptions:Te,getStoreOption:Ie,getUoms:ze,isEmpty:function(e){for(var t in e)if(""===e[t]||null===e[t]||void 0===e[t])return t;return!1},getCompanies:Fe,getTurns:Re,getProductsOption:Ae,getPresentationsOption:Ue,getUomsOption:Be,getTurnsById:Me,isEmptyCombos:function(e){for(var t in e)if(""===e[t]||null===e[t]||void 0===e[t]||0===e[t].length)return t;return!1},isObjEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return JSON.stringify(e)===JSON.stringify({})},parseJwt:function(e){if(e&&"string"===typeof e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(a)}},removeAccents:me,formatDate:function(e){var t;return e&&(t=e.slice(0,10).split("-").reverse().join("/")),t},fileToBase64:function(e){if(e){var t="data:".concat(e.type,";base64,");return new Promise((function(a,n){var r=new FileReader;r.onload=function(e){try{a(t+btoa(e.target.result))}catch(r){n(r)}},r.readAsBinaryString(e)}))}},formatNumber:function(e){return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},jsUcfirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},validateNit:function(e){return String(e).length>0||"CF"===e.toUpperCase()},validateNumber:function(e){return!Number(e)||e.includes(".")||e.includes("-")||e.includes("+")},validateNull:function(e){return!e||""===e||0===e.length},checkErrors:function(e){Object.keys(e.errors).map((function(t){switch(t){case"name":f.a.error(e.errors[t][0].replace("name","Nombre"));break;case"nit":f.a.error(e.errors[t][0].replace("nit","NIT"));break;case"abbreviation":f.a.error(e.errors[t][0].replace("abbreviation","Abreviaci\xf3n"));break;default:f.a.error(e.errors[t])}return null}))},deepEqualCompare:function e(t,a){var n,r;if("object"===typeof t&&null!==t&&"object"===typeof a&&null!==a){var c=[0,0];for(n in t)c[0]++;for(r in a)c[1]++;if(c[0]-c[1]!==0)return!1;for(n in t)if(!(n in a)||!e(t[n],a[n]))return!1;for(r in a)if(!(r in t)||!e(a[r],t[r]))return!1;return!0}return t===a}},qe=oe.a.Title;var He=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0],c=te(a).hasPermissions,o=function(){e.showDrawer()};return r.a.createElement(T.a,{type:"flex",justify:"center",align:"top",className:"margin-top-40"},e.pos?r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{xs:24,sm:24,md:12,lg:12},r.a.createElement(qe,null,e.title)),r.a.createElement(I.a,{xs:24,sm:12,md:8,lg:8,className:"text-right"},e.open&&r.a.createElement(T.a,{className:"pos-store-information"},r.a.createElement(I.a,{span:24},r.a.createElement("span",{className:"store-name"},e.store.name),r.a.createElement("span",{className:"store-spacer"},"|")," ","".concat(e.turnInfo.start_time.slice(0,5)," - ").concat(e.turnInfo.end_time.slice(0,5))),r.a.createElement(I.a,{span:24,className:"store-payment-methods"},r.a.createElement("div",null,r.a.createElement("span",null,"Efectivo:")," Q"," ",a.storeCash.petty_cash_amount?Le.formatNumber(a.storeCash.petty_cash_amount):Le.formatNumber(null===e||void 0===e?void 0:e.store.petty_cash_amount)),r.a.createElement("div",null,r.a.createElement("span",null,"Tarjeta:")," Q 0"),r.a.createElement("div",null,r.a.createElement("span",null,"Otros:")," Q 0")))),r.a.createElement(I.a,{xs:24,sm:12,md:4,lg:4,className:"text-right"},c([45])&&r.a.createElement(P.a,{className:"title-tendero new-button",onClick:o},e.open?"Cerrar turno":"Iniciar turno"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{xs:24,sm:24,md:12,lg:20},r.a.createElement(qe,null,e.title)),r.a.createElement(I.a,{xs:24,sm:24,md:12,lg:{span:4,offset:0},className:"text-right"},c([e.permissions])&&(void 0===e.create||1===e.create)&&e.title&&r.a.createElement(P.a,{className:"title-tendero new-button",onClick:o},e.titleButton))))},Ke=a(166),Ge=a(2224),Je=a(201),Qe=oe.a.Title,Ze=Ke.a.Option;var Ye=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0].auth,c=Object(n.useState)(""),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(""),d=Object(i.a)(u,2),m=d[0],p=d[1],h=Object(n.useState)(""),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(null),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(null),x=Object(i.a)(N,2),S=x[0],k=x[1],C=Object(n.useState)(null),D=Object(i.a)(C,2),F=D[0],A=D[1],U=Object(n.useState)(null),z=Object(i.a)(U,2),B=z[0],R=z[1],M=Object(n.useState)(""),L=Object(i.a)(M,2),q=L[0],H=L[1],K=Object(n.useState)(!1),G=Object(i.a)(K,2),J=G[0],Q=G[1],Z=Object(n.useState)(!1),Y=Object(i.a)(Z,2),V=Y[0],W=Y[1],$=Object(n.useState)(!1),X=Object(i.a)($,2),ee=X[0],te=X[1],ne=Object(n.useState)(!1),re=Object(i.a)(ne,2),ce=re[0],oe=re[1],ie=Object(n.useState)(null),le=Object(i.a)(ie,2),se=le[0],ue=le[1],de=Object(n.useState)(null),me=Object(i.a)(de,2),pe=me[0],fe=me[1];Object(n.useEffect)((function(){s(e.edit?e.editData.name:""),p(e.edit?e.editData.reason:""),v(e.edit?e.editData.regime:""),_(e.edit?e.editData.nit:null),k(e.edit?e.editData.phone:null),H(e.edit?e.editData.address:""),A(e.edit?e.editData.pais_id:null),R(e.edit?e.editData.currency_id:null),Q(!!e.edit&&0!==e.editData.allow_add_products),W(!!e.edit&&0!==e.editData.allow_add_stores),te(!!e.edit&&0!==e.editData.uses_fel),oe(!!e.edit&&0!==e.editData.is_electronic_invoice),e.visible&&(he(e.edit?e.editData.pais:""),be(e.edit?e.editData.currency_name:""))}),[e.visible]);var ge=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;return""===e||null===e?a?!(!Number.isInteger(1*e)||1*e<=0)||f.a.warning(t):f.a.warning("El campo ".concat(t," no debe estar vacio")):"nit"===n?!Number(y.slice(0,-1))||y.includes(".")||y.includes("-")||y.includes("+")?(f.a.warning("El campo NIT solo acepta valores alfanum\xe9ricos"),!1):!(!Number(y.slice(-1).toLowerCase())&&"k"!==y.slice(-1).toLowerCase())||(f.a.warning("El campo NIT solo acepta la letra k"),!1):"phone"!==n||(!Le.validateNumber(S)||(f.a.warning("El campo Telefono solo acepta valores num\xe9ricos"),!1))},he=function(e){var t=null===e||""===e?"":e;Le.getCountryOption(t).then((function(e){ue(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},be=function(e){Le.getCurrenciesOption(e).then((function(e){fe(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Moneda")}))};return r.a.createElement(Ge.a,{className:"entreprise-drawer",placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement(T.a,{gutter:16},r.a.createElement(Qe,null," ",e.edit?"Editar Empresa":"Nueva Empresa"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:l,onChange:function(e){return s(e.target.value)},placeholder:"Nombre",size:"large"})),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Razon Social*"),r.a.createElement(w.a,{value:m,onChange:function(e){return p(e.target.value)},placeholder:"Escribe la razon social",size:"large"})),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"R\xe9gimen"),r.a.createElement(w.a,{value:E,onChange:function(e){return v(e.target.value)},placeholder:"Escribe el r\xe9gimen",size:"large"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field"},"NIT*"),r.a.createElement(w.a,{value:y,onChange:function(e){return _(e.target.value)},placeholder:"Escribir NIT",size:"large"})),r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field"},"Telefono*"),r.a.createElement(w.a,{value:S,onChange:function(e){return k(e.target.value)},placeholder:"Escribir telefono",size:"large"})),r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field"},"Pais*"),r.a.createElement(Ke.a,{showSearch:!0,optionFilterProp:"children",className:"single-select",placeholder:"Elegir Pais",size:"large",style:{width:"100%"},value:F,onChange:function(e){return A(e)},onSearch:he,getPopupContainer:function(e){return e.parentNode}},se&&se.map((function(e){return r.a.createElement(Ze,{key:e.id,value:e.id},e.name)})))),r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field"},"Moneda*"),r.a.createElement(Ke.a,{showSearch:!0,optionFilterProp:"children",className:"single-select",placeholder:"Elegir Moneda",size:"large",style:{width:"100%"},value:B,onChange:function(e){return R(e)},onSearch:be,getPopupContainer:function(e){return e.parentNode}},pe&&pe.map((function(e){return r.a.createElement(Ze,{key:e.id,value:e.id},e.name)}))))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Direccion*"),r.a.createElement(w.a,{value:q,onChange:function(e){return H(e.target.value)},placeholder:"Escribir direccion",size:"large"}))),!(a.role_id>1)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("span",{className:"label-bold-500 ratio-button-labels"},"\xbfPodr\xe1 crear sus propios productos y presentaciones?")),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(Je.default.Group,{className:"radio-group",optionType:"button",buttonStyle:"solid",size:"large",value:J,onChange:function(e){return Q(e.target.value)}},r.a.createElement(Je.default.Button,{value:!1},"No"),r.a.createElement(Je.default.Button,{value:!0},"Si")))),r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("span",{className:"label-bold-500 ratio-button-labels"},"\xbfPodr\xe1 crear propias tiendas?")),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(Je.default.Group,{className:"radio-group",optionType:"button",buttonStyle:"solid",size:"large",value:V,onChange:function(e){return W(e.target.value)}},r.a.createElement(Je.default.Button,{value:!1},"No"),r.a.createElement(Je.default.Button,{value:!0},"Si")))),r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("span",{className:"label-bold-500 ratio-button-labels"},"\xbfPodr\xe1 crear sus propios usuarios?")),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(Je.default.Group,{className:"radio-group",optionType:"button",buttonStyle:"solid",size:"large",value:ee,onChange:function(e){return te(e.target.value)}},r.a.createElement(Je.default.Button,{value:!1},"No"),r.a.createElement(Je.default.Button,{value:!0},"Si")))),r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("span",{className:"label-bold-500 ratio-button-labels"},"\xbfFacturara de forma electronica?")),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(Je.default.Group,{disabled:e.edit&&ce,className:"radio-group",optionType:"button",buttonStyle:"solid",size:"large",value:ce,onChange:function(e){return oe(e.target.value)}},r.a.createElement(Je.default.Button,{value:!1},"No"),r.a.createElement(Je.default.Button,{value:!0},"Si")))))),r.a.createElement(T.a,{gutter:16},r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){var t={name:ge(l,"Nombre")?l:void 0,reason:ge(m,"Razon social")?m:void 0,regime:E,nit:ge(y,"NIT",!1,"nit")?y:void 0,phone:ge(S,"Telefono",!1,"phone")?S:void 0,address:ge(q,"Direccion")?q:void 0,country_id:ge(F,"Pais")?F:void 0,currency_id:ge(B,"Moneda")?B:void 0,allow_add_products:J?1:0,allow_add_stores:V?1:0,allow_fel:ce?1:0,allow_add_users:ee?1:0,company_id:e.edit?e.editData.company_id:0},a=!0;for(var n in t)if(a&&"regime"!==n){var r=t[n];a=""!==r&&void 0!==r&&null!==r}a&&e.saveButton(t,e.edit)}()}},"Guardar"))))))};var Ve=function(e){return r.a.createElement("div",{className:"text-center margin-top-30"},r.a.createElement(P.a,{disabled:!e.moreInfo,className:" load-more-info-btn",onClick:function(){e.handlerButton()}},"Cargar m\xe1s"))},We={read:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.companies,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),readByCompanyId:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.companies,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),enterpriseNextPage:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),enterpriseDelete:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.companies,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveCompany:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.companies,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateCompany:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.companies,"/").concat(a),t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()};var $e=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(null),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)([]),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(""),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){c(!1),T(!0),We.read("",5).then((function(e){if("Unauthenticated."===e)throw new Error("Unauthenticated");v(D(e)),w(null!==e.data.next_page_url),_(e.data.next_page_url),T(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion.")}))}),[]);var I=function(){c(!1),T(!0),We.read("",5).then((function(e){if("Unauthenticated."===e)throw new Error("Unauthenticated");v(D(e)),w(null!==e.data.next_page_url),_(e.data.next_page_url),T(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion.")}))},D=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,company_id:e.id,name:e.name,regime:e.regime,nit:e.nit,phone:e.phone,pais:null!==e.country&&void 0!==typeof e.country.name?e.country.name:null,pais_id:null!==e.country?e.country_id:null,currency_id:null!==e.currency?e.currency_id:null,currency_name:null!==e.currency&&void 0!==e.currency.name?e.currency.name:null,address:e.address,reason:e.reason,allow_add_products:e.allow_add_products,allow_add_stores:e.allow_add_stores,is_electronic_invoice:e.is_electronic_invoice,uses_fel:e.uses_fel}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},F=function(e){Object.keys(e.errors).map((function(t){switch(t){case"phone":f.a.error(e.errors[t][0].replace("phone","Telefono"));break;case"nit":f.a.error(e.errors[t][0].replace("nit","NIT"));break;default:f.a.error(e.errors[t])}return null}))};return r.a.createElement("div",null,r.a.createElement(He,{titleButton:"Nueva empresa",title:"Empresas",showDrawer:function(){c(!0),u(!1)},permissions:2}),r.a.createElement(ce,{dataSource:E,loading:P,handlerTextSearch:function(e){T(!0),We.read(e,5).then((function(e){v(D(e)),w(null!==e.data.next_page_url),_(e.data.next_page_url),T(!1)})).catch((function(e){console.log(e),f.a.error("Error en la busqueda")}))},handlerEditRow:function(e){g(e),c(!0),u(!0)},handlerDeleteRow:function(e){We.enterpriseDelete(e.company_id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),I()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))}}),r.a.createElement(Ve,{handlerButton:function(){w(!1),S&&(T(!0),We.enterpriseNextPage(y).then((function(e){v(E.concat(D(e))),w(null!==e.data.next_page_url),_(e.data.next_page_url),T(!1)})))},moreInfo:S}),r.a.createElement(Ye,{closable:function(){c(!1)},visible:a,edit:s,editData:p,cancelButton:function(){c(!1)},saveButton:function(e,t){switch(T(!0),t){case!0:We.updateCompany(e,e.company_id).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?(F(e),T(!1)):(f.a.success("Informacion actualizada."),c(!1),I())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:We.saveCompany(e).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?(F(e),T(!1)):(f.a.success("Informacion creada."),c(!1),I())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion."),I()}))}}}))},Xe=w.a.Search;var et=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0],c=te(a).hasPermissions,o=[{title:"Nombre",dataIndex:"_name",key:"_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Perfil inicial",dataIndex:"_perfilInicial",key:"_perfilInicial",render:function(e){return r.a.createElement("span",null,e)}},{title:"Email",dataIndex:"_email",key:"_nit",render:function(e){return r.a.createElement("span",null,e)}},{title:"Telefono",dataIndex:"_telefono",key:"_telefono",render:function(e){return r.a.createElement("span",null,e)}},{title:"Empresa",dataIndex:"_empresaNombre",key:"_empresaNombre",render:function(e){return r.a.createElement("span",null,e)}},{title:"Username",dataIndex:"_username",key:"_username",render:function(e){return r.a.createElement("span",null,e)}},{title:"",dataIndex:"_id",key:"_id",render:function(t,a){return r.a.createElement("span",null,r.a.createElement(k.a,{placement:"left",content:r.a.createElement("div",null,c([7])&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"user-options-items",onClick:function(){return function(t){e.handlerEditRow(t)}(a)}},"Editar"),r.a.createElement(g.a,{className:"divider-enterprise-margins",type:"horizontal"}),r.a.createElement("span",{className:"user-options-items",onClick:function(){return e.handlerEditPermissions(a)}},"Editar permisos")," "),c([7])&&c([8])&&r.a.createElement(g.a,{className:"divider-enterprise-margins",type:"horizontal"}),c([8])&&r.a.createElement(C.a,{title:"Estas seguro de borrar el elemento selccionado?",onConfirm:function(){return function(t){e.handlerDeleteRow(t)}(a)},okText:"Si",cancelText:"No"},r.a.createElement("span",{className:"user-options-items"},"Eliminar"))),trigger:"click"},(c([7])||c([8]))&&r.a.createElement(P.a,{shape:"circle",className:"enterprise-settings-button"},r.a.createElement(q.a,null))))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:18,sm:18,md:18,lg:18},r.a.createElement(Xe,{className:"customSearch",prefix:r.a.createElement(M.a,{className:"tendero-table-search-icon"}),placeholder:"Presiona enter para buscar",style:{width:"70%",height:"40px"},size:"large",onSearch:function(t){return a=t,void e.handlerTextSearch(a);var a}}))),r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius margin-top-15"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{loading:e.loading,className:"CustomTableClass",dataSource:e.dataSource,columns:o,pagination:!1,rowKey:"_id",expandable:{expandedRowRender:function(e){return r.a.createElement("div",{className:"text-left"},r.a.createElement("p",null,r.a.createElement("b",null,"Tiendas asociadas")),e._stores_name.map((function(e,t){return r.a.createElement("p",{key:t},e)})))},expandIcon:function(e){var t,a=e.expanded,n=e.onExpand,c=e.record;return(null===(t=c._stores_name)||void 0===t?void 0:t.length)>0&&(a?r.a.createElement(B.a,{onClick:function(e){return n(c,e)}}):r.a.createElement(U.a,{onClick:function(e){return n(c,e)}}))}}})))))))},tt=a(2223),at=a(211),nt=a.n(at),rt=a(156),ct=a.n(rt),ot={read:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.users,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),getStoreOption:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.stores_options,"?per_page=100&company_id=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),showUser:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.users,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),userNextPage:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveUser:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.users,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateUser:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.users,"/").concat(a),t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeUser:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.users,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getPermissionsList:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.permissions,"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getUserPermissions:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.userPermissions(t),"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),storeUserPermissions:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se("".concat(W.a.stage.userPermissions(t),"?paginate=0"),{permissions:a}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),getRoles:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.roles,"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),currentUser:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le(W.a.stage.currentUser,{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},it=oe.a.Title,lt=Ke.a.Option;var st=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0].auth,c=Object(n.useState)(""),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(""),d=Object(i.a)(u,2),m=d[0],p=d[1],h=Object(n.useState)(null),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(null),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(null),x=Object(i.a)(N,2),S=x[0],C=x[1],D=Object(n.useState)(""),F=Object(i.a)(D,2),A=F[0],U=F[1],z=Object(n.useState)(""),B=Object(i.a)(z,2),R=B[0],M=B[1],L=Object(n.useState)(""),q=Object(i.a)(L,2),H=q[0],K=q[1],G=Object(n.useState)(null),J=Object(i.a)(G,2),Q=J[0],Z=J[1],Y=Object(n.useState)(null),V=Object(i.a)(Y,2),W=V[0],$=V[1],X=Object(n.useState)([]),ee=Object(i.a)(X,2),te=ee[0],ne=ee[1],re=Object(n.useState)([]),ce=Object(i.a)(re,2),oe=ce[0],ie=ce[1],le=Object(n.useState)(!0),se=Object(i.a)(le,2),ue=se[0],de=se[1],me=Object(n.useState)(!0),pe=Object(i.a)(me,2),fe=pe[0],ge=pe[1];Object(n.useEffect)((function(){s(e.edit?e.editData._name:""),p(e.edit?e.editData._email:""),v(e.edit?e.editData._perfilInicialId:null),_(e.edit?e.editData._telefono:null),C(e.edit?e.editData._empresa:null),U(e.edit?e.editData._username:""),M(""),K(""),e.edit&&be(e.editData._empresa),e.visible&&(Ee(),he(e.edit?e.editData._empresaNombre:""),1!==a.role_id&&C(a.company_id))}),[e.visible]),Object(n.useEffect)((function(){e.visible&&be(S)}),[e.visible,S]);var he=function(e){e="",Le.getEnterpriseOption(e).then((function(e){Z(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de empresa")}))},be=function(t){de(!0),ne([]),ie([]);var a=[],n=[];ot.getStoreOption(t).then((function(t){t.data.data.map((function(t){var r={key:t.id,title:t.name};return e.editData&&e.editData._stores_ids.length>0&&e.edit&&e.editData._stores_ids.some((function(e){return e.id===r.key}))&&a.push(r.key),n.push(r),de(!1),!0}))})).then((function(e){ne(n),ie(a)})).catch((function(e){console.log(e),f.a.error("No se han podido cargar las tiendas")}))},Ee=function(){ge(!0),ot.getRoles().then((function(e){$(e.data),ge(!1)})).catch((function(e){console.log(e),f.a.error("Error al guardar la compra"),ge(!1)}))};return r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement(it,null," ",e.edit?"Editar Usuario":"Nuevo Usuario"," "),r.a.createElement(g.a,{className:"divider-cxustom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:l,placeholder:"Nombre",size:"large",onChange:function(e){return s(e.target.value)}})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Email"),r.a.createElement(w.a,{value:m,placeholder:"Email",size:"large",onChange:function(e){return p(e.target.value)},type:"email"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field"},"Perfil Inicial*"),r.a.createElement(Ke.a,{disabled:fe,loading:fe,className:"single-select",placeholder:"Perfil Inicial",size:"large",style:{width:"100%"},value:E,onChange:function(e){v(e),1===e?C(a.company_id):1===a.role_id&&C(null)},getPopupContainer:function(e){return e.parentNode}},W&&W.map((function(e){return r.a.createElement(lt,{key:e.id,value:e.id},e.name)})))),r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field"},"Telefono*"),r.a.createElement(w.a,{placeholder:"Escribir telefono",size:"large",type:"number",value:y,onChange:function(e){return _(e.target.value)}})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Empresa*"),r.a.createElement(Ke.a,{disabled:1!==a.role_id||1===E,showSearch:!0,optionFilterProp:"children",className:"single-select",placeholder:"Empresa",size:"large",style:{width:"100%"},value:S,onChange:function(e){return C(e)},onSearch:he,getPopupContainer:function(e){return e.parentNode}},Q&&Q.map((function(e){return r.a.createElement(lt,{key:e.id,value:e.id},e.name)}))))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Username*"),r.a.createElement(w.a,{value:A,placeholder:"Nombre",size:"large",onChange:function(e){return U(e.target.value)}})),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Password*"),r.a.createElement(k.a,{content:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"La contrase\xf1a debe tener al menos 8 caracteres"))},trigger:"hover"},r.a.createElement(w.a.Password,{iconRender:function(e){return e?r.a.createElement(nt.a,null):r.a.createElement(ct.a,null)},type:"password",placeholder:"Password",size:"large",value:R,onChange:function(e){return M(e.target.value)}}))),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Confirmar Password*"),r.a.createElement(w.a.Password,{iconRender:function(e){return e?r.a.createElement(nt.a,null):r.a.createElement(ct.a,null)},type:"password",placeholder:"Confirmar Password",size:"large",value:H,onChange:function(e){return K(e.target.value)}}))),r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("span",{className:"label-bold-500",style:{marginLeft:"10px"}},"Tiendas disponibles")),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("span",{className:"label-bold-500",style:{marginLeft:"20px"}},"Tiendas asignadas al usuario")),r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(tt.a,{disabled:ue,dataSource:te,showSearch:!0,listStyle:{width:"100%",height:250},targetKeys:oe,onChange:function(e){ie(e)},render:function(e){return"".concat(e.title)}}))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",onClick:function(){return e.cancelButton()},className:"cancel-button"},"Cancelar"),r.a.createElement(P.a,{className:"title-tendero new-button",onClick:function(){return function(){if(""===l||""===m||""===A)return f.a.warning("Por favor, verifique los campos obligatorios");if(null===y||null===E||null===S)return f.a.warning("Por favor, verifique los campos obligatorios");if(R!==H)return f.a.warning("Contrase\xf1as no coinciden");if(R.length<8&&(!e.edit||R.length>0))return f.a.warning("La contrase\xf1a debe tener al menos 8 caracteres");if(!Le.validateEmail(m))return f.a.warning("Ingresa un email valido");var t;t=e.edit&&0===R.length?{name:l,role_id:E,email:m,phone:y,company_id:S,username:A,stores:oe}:{name:l,role_id:E,email:m,phone:y,company_id:S,username:A,password:R,password_confirmation:H,stores:oe};var a=e.editData?e.editData._id:null;e.saveButton(t,a,e.edit)}()}},"Guardar"))))))},ut=a(61),dt=a(90),mt=oe.a.Title;var pt=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,2),c=(a[0],a[1]),o=Object(n.useState)([]),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)([]),m=Object(i.a)(d,2),p=m[0],h=m[1],b=Object(n.useState)([]),E=Object(i.a)(b,2),v=E[0],O=E[1],j=Object(n.useState)(!0),y=Object(i.a)(j,2),_=y[0],N=y[1],x=[{title:"Acci\xf3n",dataIndex:"accion",key:"key",align:"left",render:function(e){return r.a.createElement("span",null,e)}},{title:"Ver",dataIndex:"ver",render:function(e,t){return r.a.createElement(dt.a,{tdCentered:!0,checked:e,name:"ver",onChange:function(e){S(e,t)}})}},{title:"Crear",dataIndex:"crear",render:function(e,t){return r.a.createElement(dt.a,{tdCentered:!0,checked:e,name:"crear",onChange:function(e){S(e,t)}})}},{title:"Editar",dataIndex:"editar",render:function(e,t){return r.a.createElement(dt.a,{tdCentered:!0,checked:e,name:"editar",onChange:function(e){S(e,t)}})}},{title:"Eliminar",dataIndex:"eliminar",render:function(e,t){return r.a.createElement(dt.a,{tdCentered:!0,checked:e,name:"eliminar",onChange:function(e){S(e,t)}})}}];Object(n.useEffect)((function(){return e.visible&&(N(!0),ot.getUserPermissions(e.userId).then((function(e){h(e.data)})).catch((function(e){console.log(e),f.a.error("No se han podido cargar los permisos")})),ot.getPermissionsList().then((function(e){u(e.data)})).catch((function(e){console.log(e),f.a.error("No se han podido cargar los permisos")}))),h([])}),[e.visible]),Object(n.useEffect)((function(){if(s.length>0&&p){var e=s.reduce((function(e,t,a){var n=function(e){var t,a=e.name.toLowerCase();return t={key:Le.camelCaseize(e.group),accion:e.group},Object(ut.a)(t,"".concat(a,"Id"),e.id),Object(ut.a)(t,a,p.length>0&&p.some((function(t){return t.id===e.id}))),t};1===a&&(e=[n(e)]);var r=n(t);return e.some((function(e){return e.key===r.key}))?e.map((function(e){return e.key===r.key?Object.assign(e,r):e})):(e.push(r),e)}));O(e),N(!1)}}),[p,s]);var S=function(e,t){var a=v.map((function(a){return a.key===t.key?Object.assign(a,Object(ut.a)({},e.target.name,e.target.checked)):a}));O(a)};return r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement(mt,null," ","Editar permisos"," "),r.a.createElement(g.a,{className:"divider-cxustom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{id:"edit-permissions-table",loading:_,className:"CustomTableClass",dataSource:v,columns:x,pagination:!1}))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){e.closable()}},"Cancelar"),r.a.createElement(P.a,{className:"title-tendero new-button",onClick:function(){N(!0);var t=v.flatMap((function(e){return[e.ver&&e.verId,e.crear&&e.crearId,e.editar&&e.editarId,e.eliminar&&e.eliminarId]})).filter((function(e){return!!e}));ot.storeUserPermissions(e.userId,t).then((function(t){ot.currentUser().then((function(t){f.a.success("Permisos modificados exitosamente"),c({type:"AUTH FETCHED",payload:t}),N(!1),h([]),u([]),e.closable()}))})).catch((function(e){f.a.error("No se ha podido modificar los permisos"),console.log(e)}))}},"Guardar"))))))};var ft=function(){var e,t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0].auth,c=Object(n.useState)([]),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),m=d[0],p=d[1],g=Object(n.useState)(""),h=Object(i.a)(g,2),b=h[0],E=h[1],v=Object(n.useState)(!1),O=Object(i.a)(v,2),j=O[0],y=O[1],_=Object(n.useState)(!1),N=Object(i.a)(_,2),x=N[0],S=N[1],w=Object(n.useState)(!1),k=Object(i.a)(w,2),C=k[0],P=k[1],T=Object(n.useState)(0),I=Object(i.a)(T,2),D=I[0],F=I[1],A=Object(n.useState)(!1),U=Object(i.a)(A,2),z=U[0],B=U[1],R=Object(n.useState)(null),M=Object(i.a)(R,2),L=M[0],q=M[1];Object(n.useEffect)((function(){H()}),[]);var H=function(){P(!0),p(!1),ot.read("",5).then((function(e){s(K(e)),E(e.data.next_page_url),y(null!==e.data.next_page_url),P(!1)})).catch((function(e){f.a.error("No se ha podido cargar la informacion"),console.log(e)}))},K=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("Too Many Attempts."!==e){var a=t?[e]:e.data.data||[];return a.map((function(e,t){return{key:t,_id:e.id,_name:e.name,_perfilInicialId:null!==e.role&&void 0!==typeof e.role.name?e.role_id:null,_perfilInicial:null!==e.role&&void 0!==typeof e.role.name?e.role.name:null,_email:e.email,_telefono:e.phone,_empresa:null!==e.company&&void 0!==typeof e.company.name?e.company_id:null,_empresaNombre:null!==e.company&&void 0!==typeof e.company.name?e.company.name:null,_username:e.username,_stores_ids:(null===e||void 0===e?void 0:e.stores)||[]}}))}f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},G=function(e){Object.keys(e.errors).map((function(t){switch(t){case"email":f.a.error(e.errors[t][0].replace("email","Email"));break;case"username":f.a.error(e.errors[t][0].replace("username","Username"));break;default:f.a.error(e.errors[t])}return null}))};return r.a.createElement("div",null,r.a.createElement(He,{titleButton:"Nuevo usuario",title:"Usuarios",showDrawer:function(){B(!1),p(!0)},permissions:6,create:null===(e=a.company)||void 0===e?void 0:e.allow_add_users}),r.a.createElement(et,{dataSource:l,handlerTextSearch:function(e){P(!0),ot.read(e,5).then((function(e){s(K(e)),E(e.data.next_page_url),y(null!==e.data.next_page_url),P(!1)})).catch((function(e){console.log(e),f.a.error("Error en la busqueda")}))},loading:C,handlerEditRow:function(e){P(!0),ot.showUser(e._id).then((function(e){q(K(e,!0)[0]),B(!0),p(!0),P(!1)})).catch((function(e){f.a.error("No se ha podido cargar la informacion"),console.log(e),P(!1)}))},handlerDeleteRow:function(e){P(!0),ot.removeUser(e._id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),P(!1),H()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento."),P(!1)}))},handlerEditPermissions:function(e){F(e._id),S(!0)}}),r.a.createElement(Ve,{handlerButton:function(){y(!1),j&&(P(!0),ot.userNextPage(b).then((function(e){s(l.concat(K(e))),E(e.data.next_page_url),y(null!==e.data.next_page_url),P(!1)})))},moreInfo:j}),r.a.createElement(st,{closable:function(){p(!1)},visible:m,edit:z,editData:L,cancelButton:function(){p(!1)},saveButton:function(e,t,a){switch(P(!0),a){case!0:ot.updateUser(e,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?(G(e),P(!1)):(f.a.success("Usuario actualizado"),p(!1),H())}));break;case!1:ot.saveUser(e).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?(G(e),P(!1)):(f.a.success("Usuario creado"),p(!1),H())}))}}}),r.a.createElement(pt,{closable:function(){S(!1)},visible:x,userId:D}))},gt=w.a.Search;var ht=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0],c=te(a).hasPermissions,o=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Pais",dataIndex:"country_name",key:"country_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Tipo",dataIndex:"type",key:"type",render:function(e){return r.a.createElement("span",null,"INDIVIDUAL"===e?"Persona individual":"CORPORATION"===e?"Empresa":"")}},{title:"NIT",dataIndex:"nit",key:"nit",render:function(e){return r.a.createElement("span",null,e)}},{title:"Email",dataIndex:"email",key:"email",render:function(e){return r.a.createElement("span",null,e)}},{title:"Telefono",dataIndex:"phone",key:"phone",render:function(e){return r.a.createElement("span",null,e)}},{title:"Direccion",dataIndex:"address",key:"address",render:function(e){return r.a.createElement("span",null,e)}},{title:"",dataIndex:"id",key:"id",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(k.a,{placement:"left",style:{zIndex:"auto"},content:r.a.createElement("div",null,c([63])&&r.a.createElement("span",{className:"user-options-items",onClick:function(){return l(t)}},"Editar"),c([63])&&c([64])&&r.a.createElement(g.a,{className:"divider-enterprise-margins",type:"horizontal"}),c([64])&&r.a.createElement(C.a,{title:"Estas seguro de borrar el elemento selccionado?",onConfirm:function(){return s(t)},okText:"Si",cancelText:"No"},r.a.createElement("span",{className:"user-options-items"},"Eliminar"))),trigger:"click"},(c([63])||c([64]))&&r.a.createElement(P.a,{shape:"circle",className:"enterprise-settings-button"},r.a.createElement(q.a,null))))}}],l=function(t){e.handlerEditRow(t)},s=function(t){e.handlerDeleteRow(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:18,sm:18,md:18,lg:18},r.a.createElement(gt,{prefix:r.a.createElement(M.a,{className:"tendero-table-search-icon"}),placeholder:"Presiona enter para buscar",className:"tendero-table-search customSearch",size:"large",onSearch:function(t){return a=t,void e.handlerTextSearch(a);var a}}))),r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius margin-top-15"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{className:"CustomTableClass",dataSource:e.dataSource,columns:o,pagination:!1,loading:e.loading,rowKey:"id",expandable:{expandedRowRender:function(e){return r.a.createElement("div",{className:"text-left"},r.a.createElement("p",null,r.a.createElement("b",null,"G\xe9nero: ")," ","MALE"===e.sex?"MASCULINO":"FEMENINO"),r.a.createElement("p",null,r.a.createElement("b",null,"G\xe9nero Reconocimiento Facial: ")," ",null!==e.biometric_id?"Si":"No"," "),r.a.createElement("p",null,r.a.createElement("b",null,"Tipo de Edad: ")," ",Le.getAge(e.birthdate)>=18?"Adulto":"Menor de edad"," "))},expandIcon:function(e){var t=e.expanded,a=e.onExpand,n=e.record;return t?r.a.createElement(B.a,{onClick:function(e){return a(n,e)}}):r.a.createElement(U.a,{onClick:function(e){return a(n,e)}})}}})))))))},bt=a(268),Et=a(48),vt=a.n(Et),Ot={getClient:function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(H.a)({per_page:5},t),n=Object.keys(a).flatMap((function(e){return a[e]?"".concat([e],"=").concat(a[e]):[]})).join("&"),e.abrupt("return",le("".concat(W.a.stage.Client,"?").concat(n),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),newClient:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.Client,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editClient:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.Client,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeClient:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.Client,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCountries:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.countries_options,"?id=").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.currentUser),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),clientOptions:function(){var e=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object.keys(t).flatMap((function(e){return t[e]?"".concat([e],"=").concat(t[e]):[]})).join("&"),e.abrupt("return",le("".concat(W.a.stage.Client_options,"?").concat(a),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},jt=oe.a.Title,yt=Ke.a.Option;var _t=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0].auth,c=Object(n.useState)(""),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(null),d=Object(i.a)(u,2),m=d[0],p=d[1],h=Object(n.useState)(null),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(""),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(""),x=Object(i.a)(N,2),S=x[0],k=x[1],C=Object(n.useState)(null),D=Object(i.a)(C,2),F=D[0],A=D[1],U=Object(n.useState)(""),z=Object(i.a)(U,2),B=z[0],R=z[1],M=Object(n.useState)(null),L=Object(i.a)(M,2),q=L[0],H=L[1],K=Object(n.useState)(""),G=Object(i.a)(K,2),J=G[0],Q=G[1],Z=Object(n.useState)([]),Y=Object(i.a)(Z,2),V=Y[0],W=Y[1],$=Object(n.useState)(!1),X=Object(i.a)($,2),ee=X[0],te=X[1];Object(n.useEffect)((function(){var t;s(e.edit?e.editData.name:""),p(e.edit&&(null===(t=e.editData)||void 0===t?void 0:t.country)?e.editData.country_id:null),v(e.edit?e.editData.type:null),_(e.edit?e.editData.nit:""),k(e.edit?e.editData.email:""),A(e.edit?e.editData.phone:""),R(e.edit?e.editData.address:""),H(e.edit?e.editData.sex:null),Q(e.edit?e.editData.birthdate:""),e.visible&&ne("")}),[e.visible]);var ne=function(e){te(!0),a.role_id>1?Ot.getCountries(a.company.country_id).then((function(e){W(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")})):Le.getCountryOption(e).then((function(e){W(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")})),te(!1)};return r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",null,r.a.createElement(jt,null,e.edit?"Editar Cliente":"Nuevo Cliente"),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:l,placeholder:"Nombre",size:"large",onChange:function(e){return s(e.target.value)}})),r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field"},"Pais"),r.a.createElement(Ke.a,{showSearch:!0,loading:ee,optionFilterProp:"children",className:"single-select",placeholder:"Elegir Pais",size:"large",style:{width:"100%"},value:m,onChange:function(e){return p(e)},onSearch:ne,getPopupContainer:function(e){return e.parentNode}},V&&V.map((function(e){return r.a.createElement(yt,{key:e.id,value:e.id},e.name)})))),r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field"},"Tipo de cliente"),r.a.createElement(Ke.a,{value:E,className:"single-select",placeholder:"Elegir tipo",size:"large",style:{width:"100%"},onChange:function(e){return v(e)},getPopupContainer:function(e){return e.parentNode}},r.a.createElement(yt,{value:"INDIVIDUAL"},"Persona individual"),r.a.createElement(yt,{value:"CORPORATION"},"Empresa")))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field"},"NIT"),r.a.createElement(w.a,{value:y,placeholder:"Escribir NIT",size:"large",onChange:function(e){return _(e.target.value)}})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Email"),r.a.createElement(w.a,{value:S,placeholder:"Escribir email",size:"large",type:"email",onChange:function(e){return k(e.target.value)}})),r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field"},"Telefono"),r.a.createElement(w.a,{value:F,placeholder:"Escribir telefono",size:"large",onChange:function(e){return A(e.target.value)}}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Direccion"),r.a.createElement(w.a,{value:B,placeholder:"Escribir direccion",size:"large",onChange:function(e){return R(e.target.value)}}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Genero"),r.a.createElement(Ke.a,{value:q,className:"single-select",placeholder:"Seleccionar genero",size:"large",style:{width:"100%"},onChange:function(e){return H(e)},getPopupContainer:function(e){return e.parentNode}},r.a.createElement(yt,{value:"MALE"},"Masculino"),r.a.createElement(yt,{value:"FEMALE"},"Femenino"))),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Fecha de nacimiento"),r.a.createElement(bt.a,{placeHolder:"Selecciona Fecha",size:"large",format:"YYYY-MM-DD",className:"date-picker-custom",disabledDate:function(e){return e&&e>vt()().endOf("day")},value:""!==J?vt()(J,"YYYY-MM-DD"):"",onChange:function(e,t){Q(t)}})),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Reconocimiento facial"),r.a.createElement(w.a,{size:"large",disabled:!0})))),r.a.createElement("div",null,r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{onClick:e.cancelButton,type:"link",className:"cancel-button"},"Cancelar"),r.a.createElement(P.a,{onClick:function(){var t=!1,a=new Date,n=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),c=a.getFullYear();a="".concat(c,"-").concat(r,"-").concat(n),[l,m,E,y,B,q,J,S,F].includes("")||[l,m,E,y,B,q,J,S,F].includes(null)?f.a.warning("Todos los campos son obligatorios"):!Number(y.slice(0,-1))||y.includes(".")||y.includes("-")||y.includes("+")?f.a.warning("El campo NIT solo acepta valores num\xe9ricos"):Number(y.slice(-1).toLowerCase())||"k"===y.slice(-1).toLowerCase()?Le.validateEmail(S)?!Number(F)||F.includes(".")||F.includes("-")||F.includes("+")?f.a.warning("El campo Telefono solo acepta valores num\xe9ricos"):J===a?f.a.warning("La fecha de nacimiento no puede ser igual a hoy"):t=!0:f.a.warning("Ingresa un email valido"):f.a.warning("El campo NIT solo acepta la letra k");var o={name:l,type:E,country_id:m,address:B,sex:q,birthdate:J,nit:y,email:S,phone:F};t&&e.saveButton(e.edit,o,e.edit?e.editData.id:null)},className:"title-tendero new-button"},"Guardar")))))))};var Nt=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(null),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)([]),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(""),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1],I=function(){c(!1)};Object(n.useEffect)((function(){c(!1),T(!0),Ot.getClient().then((function(e){if("Unauthenticated."===e)throw new Error("Unauthenticated");v(F(e.data.data)),w(null!==e.data.next_page_url),_(e.data.next_page_url),T(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion.")}))}),[]);var D=function(){c(!1),T(!0),Ot.getClient().then((function(e){if("Unauthenticated."===e)throw new Error("Unauthenticated");v(F(e.data.data)),w(null!==e.data.next_page_url),_(e.data.next_page_url),T(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion.")}))},F=function(e){var t=[];for(var a in e){var n,r,c,o,i,l=e[a];(null===l||void 0===l?void 0:l.country)&&(null===(n=l.country)||void 0===n?void 0:n.name)?l.country_name=l.country.name:l.country_name="",l.email=(null===(r=l.companies[0])||void 0===r||null===(c=r.pivot)||void 0===c?void 0:c.email)||"",l.phone=(null===(o=l.companies[0])||void 0===o||null===(i=o.pivot)||void 0===i?void 0:i.phone)||"",t.push(l)}return t},A=function(e){Object.keys(e.errors).map((function(t){switch(t){case"nit":f.a.error(e.errors[t][0].replace("nit","NIT"));break;default:f.a.error(e.errors[t])}return null}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(He,{titleButton:"Nuevo Cliente",title:"Clientes",showDrawer:function(){c(!0),u(!1)},permissions:62}),r.a.createElement(ht,{dataSource:E,loading:P,handlerTextSearch:function(e){T(!0),Ot.getClient({name:"".concat(e,"%")}).then((function(e){v(F(e.data.data)),_(e.data.next_page_url),w(null!==e.data.next_page_url),T(!1)})).catch((function(e){console.log(e),f.a.error("Error en la busqueda")}))},handlerEditRow:function(e){g(e),c(!0),u(!0)},handlerDeleteRow:function(e){T(!0),Ot.removeClient(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),D()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))}}),r.a.createElement(Ve,{handlerButton:function(){S&&(T(!0),w(null),Le.getNextPage(y).then((function(e){v(E.concat(F(e.data.data))),w(null!==e.data.next_page_url),_(e.data.next_page_url),T(!1)})))},moreInfo:S}),r.a.createElement(_t,{closable:I,visible:a,edit:s,editData:p,cancelButton:I,saveButton:function(e,t,a){switch(T(!0),e){case!0:Ot.editClient(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?(A(e),T(!1)):(f.a.success("Informacion actualizada."),c(!1),D())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:Ot.newClient(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?(A(e),T(!1)):(f.a.success("Informacion creada."),c(!1),D())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}))}}}))},xt=w.a.Search;var St=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0],c=te(a).hasPermissions,o=[{title:"Tienda",dataIndex:"_shop",key:"_shop",render:function(e){return r.a.createElement("span",null,e)}},{title:"Empresa",dataIndex:"_enterprise",key:"_enterprise",render:function(e){return r.a.createElement("span",null,e)}},{title:"Departamento/estado",dataIndex:"_location",key:"_location",render:function(e){return r.a.createElement("span",null,e)}},{title:"Direccion",dataIndex:"_address",key:"_address",render:function(e){return r.a.createElement("span",null,e)}},{title:"",dataIndex:"_id",key:"_id",render:function(t,a){return r.a.createElement("span",null,r.a.createElement(k.a,{placement:"left",content:r.a.createElement("div",null,c([11])&&r.a.createElement("span",{className:"user-options-items",onClick:function(){return function(t){e.handlerEditRow(t)}(a)}},"Editar"),c([11])&&c([12])&&r.a.createElement(g.a,{className:"divider-enterprise-margins",type:"horizontal"}),c([12])&&r.a.createElement(C.a,{title:"Estas seguro de borrar el elemento selccionado?",onConfirm:function(){return function(t){e.handlerDeleteRow(t)}(a)},okText:"Si",cancelText:"No"},r.a.createElement("span",{className:"user-options-items"},"Eliminar"))),trigger:"click"},(c([11])||c([12]))&&r.a.createElement(P.a,{shape:"circle",className:"enterprise-settings-button"},r.a.createElement(q.a,null))))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:18,sm:18,md:18,lg:18},r.a.createElement(xt,{className:"customSearch",prefix:r.a.createElement(M.a,{className:"tendero-table-search-icon"}),placeholder:"Presiona enter para buscar",style:{width:"70%",height:"40px"},size:"large",onSearch:function(t){return a=t,void e.handlerTextSearch(a);var a}}))),r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius margin-top-15"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{loading:e.isLoading,className:"CustomTableClass",dataSource:e.dataSource,columns:o,pagination:!1,rowKey:"_id",expandable:{rowExpandable:function(e){return null!==e._description},expandedRowRender:function(e){return r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"text-left"},r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Monto que mantiene en caja chica: "),e._petty_cash_amount),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Cadena: ")," ",e._store_chain_name," "),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Bandera: ")," ",e._store_flag_name," "),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Tipo de ubicacion: ")," ",e._location_type_name," "),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Formato de tienda: ")," ",e._store_format_name," "),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Tama\xf1o de tienda (en mt2): ")," ",e._size," "),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Nivel socioeconomico: ")," ",e._socioeconomic_level_name," "),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Municipio/Localidad: ")," ",e._municipality_name," "),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Zona/Barrio: ")," ",e._zone_name," "),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Latitud: ")," ",e._latitute," "),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,'Longitud:" ')," ",e._longitude," "))),e._turns_names.length>0&&r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"text-left"},r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Turnos:")),e._turns_names.map((function(e,t){return r.a.createElement("p",{key:t,style:{margin:0}}," ",e," ")})))))},expandIcon:function(e){var t=e.expanded,a=e.onExpand,n=e.record;return null!==n._description&&(t?r.a.createElement(B.a,{onClick:function(e){return a(n,e)}}):r.a.createElement(U.a,{onClick:function(e){return a(n,e)}}))}}})))))))},wt=a(42),kt=a(269),Ct=a(2217),Pt=a(204);var Tt=function(e){return r.a.createElement(F.a,{className:"CustomTableClass",pagination:!1,columns:e.columns,dataSource:e.data.map((function(e,t){return Object(H.a)(Object(H.a)({},e),{},{index:t})})),rowKey:"index"})},It={read:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.stores,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),storeDelete:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.stores,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),storeNextPage:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(t),{}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveStore:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.stores,t).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateStore:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.stores,"/").concat(t),a).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),readTurns:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Turns,"?store_id=").concat(t),{}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveTurns:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.Turns,t).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeTurns:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.Turns,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateTurns:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.Turns,"/").concat(t),a).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},Dt=oe.a.Title,Ft=kt.a.TabPane,At=Ke.a.Option;var Ut=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],p=s[1],h=Object(n.useState)(""),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(""),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(""),x=Object(i.a)(N,2),S=x[0],k=x[1],D=Object(n.useState)(""),F=Object(i.a)(D,2),A=F[0],U=F[1],z=Object(n.useState)(""),B=Object(i.a)(z,2),R=B[0],M=B[1],L=Object(n.useState)(""),q=Object(i.a)(L,2),H=q[0],K=q[1],G=Object(n.useState)(""),J=Object(i.a)(G,2),Q=J[0],Z=J[1],Y=Object(n.useState)(""),V=Object(i.a)(Y,2),W=V[0],$=V[1],X=Object(n.useState)(""),ee=Object(i.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),re=Object(i.a)(ne,2),ce=re[0],oe=re[1],ie=Object(n.useState)(""),le=Object(i.a)(ie,2),se=le[0],ue=le[1],de=Object(n.useState)(""),me=Object(i.a)(de,2),pe=me[0],fe=me[1],ge=Object(n.useState)(""),he=Object(i.a)(ge,2),be=he[0],Ee=he[1],ve=Object(n.useState)(""),Oe=Object(i.a)(ve,2),je=Oe[0],ye=Oe[1],_e=Object(n.useState)(""),Ne=Object(i.a)(_e,2),xe=Ne[0],Se=Ne[1],we=Object(n.useState)([]),ke=Object(i.a)(we,2),Ce=ke[0],Pe=ke[1],Te=Object(n.useState)([]),Ie=Object(i.a)(Te,2),De=Ie[0],Fe=Ie[1],Ae=Object(n.useState)([]),Ue=Object(i.a)(Ae,2),ze=Ue[0],Be=Ue[1],Re=Object(n.useState)([]),Me=Object(i.a)(Re,2),qe=Me[0],He=Me[1],Je=Object(n.useState)([]),Qe=Object(i.a)(Je,2),Ze=Qe[0],Ye=Qe[1],Ve=Object(n.useState)([]),We=Object(i.a)(Ve,2),$e=We[0],Xe=We[1],et=Object(n.useState)([]),tt=Object(i.a)(et,2),at=tt[0],nt=tt[1],rt=Object(n.useState)([]),ct=Object(i.a)(rt,2),ot=ct[0],it=ct[1],lt=Object(n.useState)([]),st=Object(i.a)(lt,2),ut=st[0],dt=st[1],mt=Object(n.useState)([]),pt=Object(i.a)(mt,2),ft=pt[0],gt=pt[1],ht=Object(n.useState)(!0),bt=Object(i.a)(ht,2),Et=bt[0],Ot=bt[1],jt=Object(n.useState)(!0),yt=Object(i.a)(jt,2),_t=yt[0],Nt=yt[1];Object(n.useEffect)((function(){p(e.edit?e.editData._shop:""),v(e.edit?e.editData._enterprise_id:null),_(e.edit?e.editData._address:""),k(e.edit?e.editData._petty_cash_amount:""),U(e.edit?e.editData._store_type_id:null),M(e.edit?e.editData._store_chain_id:null),K(e.edit?e.editData._store_flag_id:null),Z(e.edit?e.editData._location_type_id:null),$(e.edit?e.editData._store_format_id:null),ae(e.edit?e.editData._size:""),oe(e.edit?e.editData._socioeconomic_level_id:null),ue(e.edit?e.editData._state_id:null),fe(e.edit?e.editData._municipality_id:null),Ee(e.edit?e.editData._zone_id:null),ye(e.edit?e.editData._latitute:""),Se(e.edit?e.editData._longitude:""),e.visible&&(xt(""),St(""),Ut(""),zt(""),Bt(""),Rt(""),Mt(""),Lt(""),qt(""),Ht(""))}),[e.visible]),Object(n.useEffect)((function(){var t=JSON.stringify(e.turns);o(JSON.parse(t)),Nt(!1)}),[e.turns]);var xt=function(e){Le.getEnterpriseOption(e).then((function(e){Pe(e.data.data),Ot(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de empresa")}))},St=function(e){Le.getStoreTypeOption(e).then((function(e){Fe(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de tipo de negocio")}))},Ut=function(e){Le.getStoreChainOption(e).then((function(e){Be(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Cadena")}))},zt=function(e){Le.getStoreFlag(e).then((function(e){He(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Bandera")}))},Bt=function(e){Le.getLocation(e).then((function(e){Ye(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Tipo de ubicacion")}))},Rt=function(e){Le.getStoreFormat(e).then((function(e){Xe(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de formato de tienda")}))},Mt=function(e){Le.getSocioeconomicLevel(e).then((function(e){nt(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de nivel socio-economico")}))},Lt=function(e){Le.getState(e).then((function(e){it(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Departamento/Estado")}))},qt=function(e){Le.getMunicipalities(e).then((function(e){gt(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Municipio/Localidad")}))},Ht=function(e){Le.getZone(e).then((function(e){dt(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Zona/Barrio")}))},Kt=function(e){var t;return!(e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0)||(Object.keys(e.errors).map((function(t){switch(t){case"name":f.a.error(e.errors[t][0].replace("name","Nombre"));break;default:f.a.error(e.errors[t])}return null})),!1)},Gt=function(t,a,n,r){var i=Object(wt.a)(c);switch(r){case"name":i[a].name=t,i[a].store_id=e.editData._id,i[a].is_active=1,i[a].is_default=0;break;case"startDate":i[a].start_time=t,i[a].store_id=e.editData._id,i[a].is_active=1,i[a].is_default=0;break;case"endDate":i[a].end_time=t,i[a].store_id=e.editData._id,i[a].is_active=1,i[a].is_default=0}o(i)},Jt=[{title:"Nombre*",dataIndex:"name",key:"name",render:function(e,t,a){return r.a.createElement(w.a,{value:t.name,size:"large",placeholder:"Ingresa nombre",onChange:function(e){return Gt(e.target.value,a,t._id,"name")}})}},{title:"Inicio",dataIndex:"start_time",key:"start_time",render:function(e,t,a){return r.a.createElement(Ct.a,{value:""!==t.start_time?vt()(t.start_time,"HH:mm:ss"):"",className:"single-time-picker",placeholder:"00:00",style:{width:"100%"},format:"HH:mm:ss",onChange:function(e,n){return Gt(n,a,t._id,"startDate")}})}},{title:"Finalizacion",dataIndex:"end_time",key:"end_time",render:function(e,t,a){return r.a.createElement(Ct.a,{value:""!==t.end_time?vt()(t.end_time,"HH:mm:ss"):"",F:!0,className:"single-time-picker",placeholder:"00:00",style:{width:"100%"},format:"HH:mm:ss",onChange:function(e,n){return Gt(n,a,t._id,"endDate")}})}},{title:"",dataIndex:"_name",render:function(e,t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{title:"Seguro de eliminar?",onConfirm:function(){return function(e){o(c.filter((function(t,a){return a!==e}))),void 0!==c.filter((function(t,a){return a===e}))[0].key?It.removeTurns(c.filter((function(t,a){return a===e}))[0].key).then((function(e){f.a.success("Turno elminado.")})):f.a.success("Turno elminado.")}(a)}},r.a.createElement("span",{style:{color:"red"}},"Eliminar")))}}];return r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement(Dt,null," ",e.edit?"Editar Tienda":"Nueva Tienda"),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(kt.a,{id:"tenderoShopTabs",className:"shop-drawer",defaultActiveKey:"1"},r.a.createElement(Ft,{tab:"Datos",key:"1"},r.a.createElement(Pt.a,{spinning:Et},r.a.createElement("div",{className:"shops-container-tabs"},r.a.createElement(T.a,{className:"section-space-field",gutter:16},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre*"),r.a.createElement(w.a,{value:u,placeholder:"Nombre",size:"large",onChange:function(e){return p(e.target.value)}})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Empresa*"),r.a.createElement(Ke.a,{disabled:Et,showSearch:!0,optionFilterProp:"children",onSearch:xt,value:E,className:"single-select",placeholder:"Elegir empresa",size:"large",style:{width:"100%"},onChange:function(e){return v(e)},getPopupContainer:function(e){return e.parentNode}},Ce&&Ce.map((function(e){return r.a.createElement(At,{key:e.id,value:e.id},e.name)}))))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Direccion*"),r.a.createElement(w.a,{value:y,placeholder:"Escbribir direccion",size:"large",onChange:function(e){return _(e.target.value)}}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Monto en caja chica*"),r.a.createElement(w.a,{disabled:e.edit&&e.editData._petty_cash_amount,value:S,placeholder:"Escribir monto",size:"large",type:"number",onChange:function(e){return k(e.target.value)}})),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Tipo de negocio*"),r.a.createElement(Ke.a,{disabled:Et,showSearch:!0,optionFilterProp:"children",onSearch:St,value:A,className:"single-select",placeholder:"Seleccionar tipo",size:"large",style:{width:"100%"},onChange:function(e){return U(e)},getPopupContainer:function(e){return e.parentNode}},De&&De.map((function(e){return r.a.createElement(At,{key:e.id,value:e.id},e.name)})))),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Cadena*"),r.a.createElement(Ke.a,{disabled:Et,showSearch:!0,optionFilterProp:"children",onSearch:Ut,value:R,className:"single-select",placeholder:"Seleccionar cadena",size:"large",style:{width:"100%"},onChange:function(e){return M(e)},getPopupContainer:function(e){return e.parentNode}},ze&&ze.map((function(e){return r.a.createElement(At,{key:e.id,value:e.id},e.name)}))))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Bandera*"),r.a.createElement(Ke.a,{disabled:Et,showSearch:!0,optionFilterProp:"children",onSearch:zt,value:H,className:"single-select",placeholder:"Seleccionar bandera",size:"large",style:{width:"100%"},onChange:function(e){return K(e)},getPopupContainer:function(e){return e.parentNode}},qe&&qe.map((function(e){return r.a.createElement(At,{key:e.id,value:e.id},e.name)})))),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Tipo de ubicacion*"),r.a.createElement(Ke.a,{disabled:Et,showSearch:!0,optionFilterProp:"children",onSearch:Bt,value:Q,className:"single-select",placeholder:"Seleccionar ubicacion",size:"large",style:{width:"100%"},onChange:function(e){return Z(e)},getPopupContainer:function(e){return e.parentNode}},Ze&&Ze.map((function(e){return r.a.createElement(At,{key:e.id,value:e.id},e.name)})))),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Formato de tienda*"),r.a.createElement(Ke.a,{disabled:Et,showSearch:!0,optionFilterProp:"children",onSearch:Rt,value:W,className:"single-select",placeholder:"Seleccionar formato",size:"large",style:{width:"100%"},onChange:function(e){return $(e)},getPopupContainer:function(e){return e.parentNode}},$e&&$e.map((function(e){return r.a.createElement(At,{key:e.id,value:e.id},e.name)}))))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Tama\xf1o de tienda (mt\xb2)*"),r.a.createElement(w.a,{value:te,placeholder:"Escribir tama\xf1o",size:"large",type:"number",onChange:function(e){return ae(e.target.value)}})),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Nivel socioeconomico*"),r.a.createElement(Ke.a,{disabled:Et,showSearch:!0,optionFilterProp:"children",onSearch:Mt,value:ce,className:"single-select",placeholder:"Elegir nivel socioeconomico",size:"large",style:{width:"100%"},onChange:function(e){return oe(e)},getPopupContainer:function(e){return e.parentNode}},at&&at.map((function(e){return r.a.createElement(At,{key:e.id,value:e.id},e.name)})))),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Departamento/Estado*"),r.a.createElement(Ke.a,{disabled:Et,showSearch:!0,optionFilterProp:"children",onSearch:Lt,value:se,className:"single-select",placeholder:"Seleccionar departamento/estado",size:"large",style:{width:"100%"},onChange:function(e){ue(e),fe(null),Ee(null)},getPopupContainer:function(e){return e.parentNode}},ot&&ot.map((function(e){return r.a.createElement(At,{key:e.id,value:e.id},e.name)}))))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Municipio/Localidad*"),r.a.createElement(Ke.a,{disabled:Et,showSearch:!0,optionFilterProp:"children",onSearch:qt,value:pe,className:"single-select",placeholder:"Seleccionar municipio/localidad",size:"large",style:{width:"100%"},onChange:function(e){fe(e),Ee(null)},getPopupContainer:function(e){return e.parentNode}},ft&&ft.map((function(e){return r.a.createElement(At,{key:e.id,value:e.id},e.name)})))),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Zona/Barrio*"),r.a.createElement(Ke.a,{disabled:Et,showSearch:!0,optionFilterProp:"children",onSearch:Ht,value:be,className:"single-select",placeholder:"Seleccionar zona/barrio",size:"large",style:{width:"100%"},onChange:function(e){return Ee(e)},getPopupContainer:function(e){return e.parentNode}},ut&&ut.map((function(e){return r.a.createElement(At,{key:e.id,value:e.id},e.name)})))),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Latitud*"),r.a.createElement(w.a,{value:je,placeholder:"Escribir latitud",size:"large",type:"number",onChange:function(e){return ye(e.target.value)}}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Longitud*"),r.a.createElement(w.a,{value:xe,placeholder:"Escribir longitud",size:"large",type:"number",onChange:function(e){return Se(e.target.value)}})))))),r.a.createElement(Ft,{disabled:!e.edit,tab:"Turnos",key:"2"},r.a.createElement(Pt.a,{spinning:_t},r.a.createElement("div",{className:"shops-container-tabs"},r.a.createElement(Tt,{columns:Jt,data:c}),r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(P.a,{disabled:!e.edit,type:"dashed",className:"shop-add-turn",onClick:function(){o(c.concat([{name:"",start_time:"",end_time:""}]))}},"Agregar turno")),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(P.a,{disabled:!e.edit,className:"shop-add-turn",onClick:function(){var t=!1;return 0===c.length?f.a.warning("Debes completar la informacion."):(c.map((function(e){return([e.name,e.start_time,e.end_time].includes(void 0)||[e.name,e.start_time,e.end_time].includes(""))&&(t=!0),!0})),t?f.a.warning("Debes completar la informacion."):(Nt(!0),void function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.map((function(e){if(void 0===e.key){var t={name:e.name,start_time:e.start_time,end_time:e.end_time,store_id:e.store_id,is_active:e.is_active,is_default:e.is_default};return It.saveTurns(t).then((function(e){return Kt(e)})).catch((function(e){console.log(e),f.a.error("No se pudo guarda la informacion de turnos."),Nt(!1)}))}var a={name:e.name,start_time:e.start_time,end_time:e.end_time,store_id:e.store_id,is_active:e.is_active,is_default:e.is_default};return It.updateTurns(e.key,a).then((function(e){return Kt(e)})).catch((function(e){console.log(e),f.a.error("No se pudo actualizar la informacion de turnos."),Nt(!1)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then(function(){var t=Object(m.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(a);case 2:t.sent.includes(!1)||(f.a.success("Turnos actualizados."),e.saveTurns()),Nt(!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())))}},"Guardar turno"))))))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{onClick:function(){return e.cancelButton()},type:"link",className:"cancel-button"},"Cancelar"),r.a.createElement(P.a,{loading:Et,className:"title-tendero new-button",onClick:function(){return function(){if(!Le.deepEqualCompare(c,e.turns))return f.a.warning("Existen cambios en los turnos, gu\xe1rdalos antes de continuar");if([u,E,y,S,A,R,H,Q,W,te,ce,se,pe,be,je,xe].includes("")||[u,E,y,S,A,R,H,Q,W,te,ce,se,pe,be,je,xe].includes(null))return f.a.warning("Todos los campos son obligatorios");var t={id:e.edit?e.editData._id:null,name:u,company_id:E,address:y,petty_cash_amount:S,store_type_id:A,store_chain_id:R,store_flag_id:H,location_type_id:Q,store_format_id:W,size:te,socioeconomic_level_id:ce,state_id:se,municipality_id:pe,zone_id:be,latitute:je,longitude:xe};e.saveButton(t,e.edit)}()}},"Guardar"))))))};var zt=function(){var e,t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0].auth,c=Object(n.useState)([]),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)([]),d=Object(i.a)(u,2),m=d[0],p=d[1],g=Object(n.useState)(!1),h=Object(i.a)(g,2),b=h[0],E=h[1],v=Object(n.useState)(!1),O=Object(i.a)(v,2),j=O[0],y=O[1],_=Object(n.useState)(null),N=Object(i.a)(_,2),x=N[0],S=N[1],w=Object(n.useState)(!1),k=Object(i.a)(w,2),C=k[0],P=k[1],T=Object(n.useState)(""),I=Object(i.a)(T,2),D=I[0],F=I[1],A=Object(n.useState)(!1),U=Object(i.a)(A,2),z=U[0],B=U[1];Object(n.useEffect)((function(){M()}),[]),Object(n.useEffect)((function(){b&&R()}),[b]);var R=function(){var e=[];Le.getTurns("").then((function(t){t.data.data.map((function(t){var a={key:t.id,store_id:t.store_id,name:t.name,start_time:t.start_time,end_time:t.end_time,is_active:t.is_active,is_default:t.is_default};return C&&Object.keys(x._turns_ids).length>0&&x._turns_ids.includes(a.key)&&e.push(a),!0})),p(e)})).catch((function(e){console.log(e),f.a.error("No se ha podido obtener la lista de turnos")}))},M=function(){E(!1),y(!0),It.read("",5).then((function(e){s(L(e)),F(e.data.next_page_url),B(null!==e.data.next_page_url),y(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion.")}))},L=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,_id:e.id,_shop:e.name,_enterprise:q(e.company,"name")?e.company.name:null,_enterprise_id:q(e.company,"id")?e.company_id:null,_location:q(e.state,"name")?e.state.name:null,_address:e.address,_petty_cash_amount:e.petty_cash_amount,_store_type_id:q(e.store_type,"id")?e.store_type_id:null,_store_type_name:q(e.store_type,"name")?e.store_type.name:null,_store_chain_id:q(e.store_chain,"id")?e.store_chain_id:null,_store_chain_name:q(e.store_chain,"name")?e.store_chain.name:null,_store_flag_id:q(e.store_flag,"id")?e.store_flag_id:null,_store_flag_name:q(e.store_flag,"name")?e.store_flag.name:null,_location_type_id:q(e.location_type,"id")?e.location_type_id:null,_location_type_name:q(e.location_type,"name")?e.location_type.name:null,_store_format_id:q(e.store_format,"id")?e.store_format_id:null,_store_format_name:q(e.store_format,"name")?e.store_format.name:null,_size:e.size,_socioeconomic_level_id:q(e.socioeconomic_level,"id")?e.socioeconomic_level_id:null,_socioeconomic_level_name:q(e.socioeconomic_level,"name")?e.socioeconomic_level.name:null,_state_id:q(e.state,"id")?e.state_id:null,_state_name:q(e.state,"name")?e.state.name:null,_municipality_id:q(e.municipality,"id")?e.municipality_id:null,_municipality_name:q(e.municipality,"name")?e.municipality.name:null,_zone_id:q(e.zone,"id")?e.zone_id:null,_zone_name:q(e.zone,"name")?e.zone.name:null,_latitute:e.latitute,_longitude:e.longitude,_turns_names:q(e.turns,"",!0)?e.turns.map((function(e){return"".concat(e.name," | ").concat(e.start_time,"hrs - ").concat(e.end_time,"hrs")})):[],_turns_ids:q(e.turns,"",!0)?e.turns.map((function(e){return e.id})):{}}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},q=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!==e&&void 0!==e){var n=!1;return""!==t&&"undefined"!==typeof e[t]?n=!0:a&&(n=Object.keys(e).length>0),n}return!1},H=function(){E(!1)},K=function(e){Object.keys(e.errors).map((function(t){switch(t){case"name":f.a.error(e.errors[t][0].replace("name","Nombre"));break;case"latitute":f.a.error(e.errors[t][0].replace("latitute","Latitud"));break;case"longitude":f.a.error(e.errors[t][0].replace("longitude","Longitud"));break;default:f.a.error(e.errors[t])}return null}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(He,{titleButton:"Nueva tienda",title:"Tiendas",showDrawer:function(){E(!0),P(!1)},permissions:10,create:null===(e=a.company)||void 0===e?void 0:e.allow_add_stores}),r.a.createElement(St,{isLoading:j,dataSource:l,handlerTextSearch:function(e){y(!0),It.read(e,5).then((function(e){s(L(e)),F(e.data.next_page_url),B(null!==e.data.next_page_url),y(!1)}))},handlerEditRow:function(e){S(e),E(!0),P(!0)},handlerDeleteRow:function(e){It.storeDelete(e._id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),M()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))}}),r.a.createElement(Ve,{handlerButton:function(){B(!1),z&&(y(!0),It.storeNextPage(D).then((function(e){s(l.concat(L(e))),F(e.data.next_page_url),B(null!==e.data.next_page_url),y(!1)})))},moreInfo:z}),r.a.createElement(Ut,{closable:H,visible:b,edit:C,editData:x,cancelButton:H,saveButton:function(e,t){switch(t){case!0:It.updateStore(e.id,e).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?K(e):(f.a.success("Informacion actualizada."),E(!1),M())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:It.saveStore(e).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?K(e):(f.a.success("Informacion creada."),E(!1),M())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}},saveTurns:function(){E(!1),M()},turns:m}))},Bt=w.a.Search;var Rt=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0],c=te(a).hasPermissions,o=e.columns,l=[{title:"",dataIndex:"id",key:"id",align:"right",render:function(t,n){return r.a.createElement("span",null,r.a.createElement(k.a,{placement:"left",content:r.a.createElement("div",null,c([e.editPermissions])&&r.a.createElement("span",{className:"user-options-items",onClick:function(){return d(n)}},"Editar"),c([e.editPermissions])&&c([e.deletePermissions])&&r.a.createElement(g.a,{className:"divider-enterprise-margins",type:"horizontal"}),c([e.deletePermissions])&&r.a.createElement(C.a,{title:"Estas seguro de borrar el elemento selccionado?",onConfirm:function(){return p(n)},okText:"Si",cancelText:"No"},r.a.createElement("span",{className:"user-options-items"},"Eliminar")),e.assign&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{className:"divider-enterprise-margins",type:"horizontal"}),r.a.createElement("span",{className:"user-options-items",onClick:function(){return m(n)}},"Asignar Precios"))),trigger:"click",getPopupContainer:function(e){return e.parentNode}},(c([e.editPermissions])||c([e.deletePermissions]))&&(!e.companyPermissions||1===a.auth.role_id||a.auth.company_id===n.company_id)&&r.a.createElement(P.a,{shape:"circle",className:"enterprise-settings-button"},r.a.createElement(q.a,null))))}}],s=Object(n.useState)(o.concat(l)),u=Object(i.a)(s,1)[0],d=function(t){e.handlerEditRow(t)},m=function(t){e.handlerAssignRow(t)},p=function(t){e.handlerDeleteRow(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:18,sm:18,md:18,lg:18},r.a.createElement(Bt,{className:"customSearch",prefix:r.a.createElement(M.a,{className:"tendero-table-search-icon"}),placeholder:"Presiona enter para buscar",style:{width:"70%",height:"40px"},size:"large",onSearch:function(t){return a=t,void e.handlerTextSearch(a);var a}})),r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6,className:"text-right"},c([e.createPermissions])&&(void 0===e.create||1===e.create)&&r.a.createElement(P.a,{className:"title-tendero new-button",style:{width:"150px"},onClick:function(){e.handlerShowDrawer()}},"Nuevo"))),r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius margin-top-15"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{loading:e.loading,className:"CustomTableClass ".concat(e.assign&&"presentations"),dataSource:e.dataSource,columns:u,pagination:!1,rowKey:"id"})))))))},Mt=Ke.a.Option,Lt=oe.a.Title;var qt=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(null),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(!0),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)([]),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)([]),k=Object(i.a)(S,2),C=k[0],D=k[1],F=Object(n.useState)(!1),A=Object(i.a)(F,2),U=A[0],z=A[1];Object(n.useEffect)((function(){o(e.edit?e.editData.name:""),d(e.edit?e.editData.country:null),b(e.edit?e.editData.region:null),j(!0),e.edit&&e.visible&&B("","")}),[e.visible]),Object(n.useEffect)((function(){R("")}),[]);var B=function(t,a){z(!0),Le.getCountryOption(t).then((function(e){x(e.data.data)})).then((function(t){Le.getRegionsByCountryId(a,e.editData.country).then((function(e){D(e.data.data)})),j(!1),z(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},R=function(e){j(!0),Le.getCountryOption(e).then((function(e){x(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(Lt,null," ",e.edit?"Editar Departamento/Estado":"Nuevo Departamento/Estado"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre Departamento/Estado",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Pa\xeds al que pertenece"),r.a.createElement(Ke.a,{loading:U,showSearch:!0,optionFilterProp:"children",className:"single-select",style:{width:"100%"},value:u,onSearch:R,onChange:function(e){return d(t=e),void Le.getRegionsByCountryId("",t).then((function(e){b(null),D(e.data.data),j(!1)}));var t},placeholder:"Selecciona pa\xeds al que pertenece",size:"large"},N&&N.map((function(e){return r.a.createElement(Mt,{key:e.id,value:e.id},e.name)}))))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Region a la que pertenece"),r.a.createElement(Ke.a,{loading:U,showSearch:!0,optionFilterProp:"children",className:"single-select",style:{width:"100%"},value:h,onSearch:function(e){Le.getRegionsByCountryId(e,u).then((function(e){console.log(e),D(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},onChange:function(e){return b(e)},placeholder:"Selecciona region al que pertenece",size:"large",disabled:O},C&&C.map((function(e){return r.a.createElement(Mt,{key:e.id,value:e.id},e.name)})))))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{loading:U,htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if([c,h].includes("")||[c,h].includes(null))return f.a.warning("Todos los campos son obligatorios");var t={name:c,region_id:h};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))},Ht={getState:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.states,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newState:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.states,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editState:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.states,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeState:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.states,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var Kt=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){Ht.getState("",5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))}),[]);var I=function(){v(!0),_(!1),Ht.getState("",5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},D=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Pais",dataIndex:"country_name",key:"country_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Region",dataIndex:"region_name",key:"region_name",render:function(e){return r.a.createElement("span",null,e)}}],F=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){var a,n,r,c;return{key:t,id:e.id,name:e.name,country:null===(a=e.region)||void 0===a?void 0:a.country_id,region:e.region_id,region_name:null===(n=e.region)||void 0===n?void 0:n.name,country_name:null===(r=e.region)||void 0===r||null===(c=r.country)||void 0===c?void 0:c.name}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},A=function(){_(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:D,dataSource:a,handlerTextSearch:function(e){v(!0),Ht.getState(e,5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido filtrar la informacion")}))},handlerEditRow:function(e){w(!0),_(!0),u(e)},handlerDeleteRow:function(e){v(!0),Ht.removeState(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),I()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){_(!0),w(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){P&&(v(!0),Le.getNextPage(p).then((function(e){c(a.concat(F(e))),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:P}),r.a.createElement(qt,{closable:A,visible:y,edit:S,editData:s,cancelButton:A,saveButton:function(e,t,a){switch(e){case!0:Ht.editState(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:Ht.newState(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},Gt=Ke.a.Option,Jt=oe.a.Title;var Qt=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(null),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(null),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)(!1),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)([]),k=Object(i.a)(S,2),C=k[0],D=k[1],F=Object(n.useState)([]),A=Object(i.a)(F,2),U=A[0],z=A[1],B=Object(n.useState)([]),R=Object(i.a)(B,2),M=R[0],L=R[1],q=Object(n.useState)(!0),H=Object(i.a)(q,2),K=H[0],G=H[1],J=Object(n.useState)(!0),Q=Object(i.a)(J,2),Z=Q[0],Y=Q[1];Object(n.useEffect)((function(){o(e.edit?e.editData.name:""),d(e.edit?e.editData.country:null),b(e.edit?e.editData.region:null),j(e.edit?e.editData.state_id:null),e.edit&&e.visible&&W("","","")}),[e.visible]),Object(n.useEffect)((function(){V(""),$(""),X("")}),[]);var V=function(e){G(!0),Le.getCountryOption(e).then((function(e){D(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},W=function(t,a,n){x(!0),Le.getCountryOption(t).then((function(e){D(e.data.data)})).then((function(t){Le.getRegionsByCountryId(a,e.editData.country).then((function(e){z(e.data.data)}))})).then((function(t){Le.getStateByRegionId(n,e.editData.region).then((function(e){L(e.data.data),x(!1),G(!1),Y(!1)}))})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},$=function(e){Y(!0),Le.getRegionsByCountryId(e,u).then((function(e){z(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},X=function(e){Le.getStateByRegionId(e,h).then((function(e){L(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},ee=function(){o(""),d(null),b(null),j(null),G(!0),Y(!0),e.closable()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:ee,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(Jt,null," ",e.edit?"Editar Municipio/Localidad":"Nuevo Municipio/Localidad"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre Municipio/Localidad",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Pa\xeds al que pertenece"),r.a.createElement(Ke.a,{loading:N,showSearch:!0,optionFilterProp:"children",className:"single-select",style:{width:"100%"},value:u,onChange:function(e){return d(t=e),void Le.getRegionsByCountryId("",t).then((function(e){b(null),j(null),z(e.data.data),G(!1),Y(!0)}));var t},onSearch:V,placeholder:"Selecciona pa\xeds al que pertenece",size:"large"},C&&C.map((function(e){return r.a.createElement(Gt,{key:e.id,value:e.id},e.name)}))))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Region a la que pertenece"),r.a.createElement(Ke.a,{loading:N,showSearch:!0,optionFilterProp:"children",disabled:K,className:"single-select",style:{width:"100%"},value:h,onChange:function(e){return b(t=e),void Le.getStateByRegionId("",t).then((function(e){j(null),L(e.data.data),Y(!1)}));var t},onSearch:$,placeholder:"Selecciona region al que pertenece",size:"large"},U&&U.map((function(e){return r.a.createElement(Gt,{key:e.id,value:e.id},e.name)})))),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Departamento/Estado a la que pertenece"),r.a.createElement(Ke.a,{loading:N,showSearch:!0,optionFilterProp:"children",disabled:Z,className:"single-select",style:{width:"100%"},value:O,onChange:function(e){return j(e)},onSearch:X,placeholder:"Selecciona Departamento/Estado al que pertenece",size:"large"},M&&M.map((function(e){return r.a.createElement(Gt,{key:e.id,value:e.id},e.name)})))))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:ee},"Cancelar"),r.a.createElement(P.a,{loading:N,htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if([c,C,U,M].includes("")||[c,C,U,M].includes(null))return f.a.warning("Todos los campos son obligatorios");var t={name:c,state_id:O};e.saveButton(e.edit,t,e.edit?e.editData.id:null),ee()}()}},"Guardar")))))))},Zt={getMunicipio:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Municipality,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newMunicipio:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.Municipality,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editMunicipio:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.Municipality,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeMunicipio:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.Municipality,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var Yt=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){v(!0),Zt.getMunicipio("",5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))}),[]);var I=function(){_(!1),v(!0),Zt.getMunicipio("",5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},D=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Pa\xeds",dataIndex:"country_name",key:"country_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Regi\xf3n",dataIndex:"region_name",key:"region_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Departamento",dataIndex:"state_name",key:"state_name",render:function(e){return r.a.createElement("span",null,e)}}],F=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){var a,n,r,c,o,i,l,s;return{key:t,id:e.id,name:e.name,state_id:e.state_id,state_name:null===(a=e.state)||void 0===a?void 0:a.name,country:null===(n=e.state)||void 0===n||null===(r=n.region)||void 0===r?void 0:r.country_id,country_name:null===(c=e.state)||void 0===c||null===(o=c.region)||void 0===o?void 0:o.country.name,region:null===(i=e.state)||void 0===i?void 0:i.region_id,region_name:null===(l=e.state)||void 0===l||null===(s=l.region)||void 0===s?void 0:s.name}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},A=function(){_(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:D,dataSource:a,handlerTextSearch:function(e){v(!0),Zt.getMunicipio(e,5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)}))},handlerEditRow:function(e){u(e),w(!0),_(!0)},handlerDeleteRow:function(e){v(!0),Zt.removeMunicipio(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),I()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){_(!0),w(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){P&&(v(!0),Le.getNextPage(p).then((function(e){c(a.concat(F(e))),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:P}),r.a.createElement(Qt,{closable:A,visible:y,edit:S,editData:s,cancelButton:A,saveButton:function(e,t,a){switch(e){case!0:Zt.editMunicipio(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:Zt.newMunicipio(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion creada."),I())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},Vt=Ke.a.Option,Wt=oe.a.Title;var $t=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),h=p[0],b=p[1];Object(n.useEffect)((function(){o(e.edit?e.editData.name:""),d(e.edit?e.editData.currency_id:null)}),[e.visible]),Object(n.useEffect)((function(){E("")}),[]);var E=function(e){Le.getCurrenciesOption(e).then((function(e){b(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(Wt,null," ",e.edit?"Editar Pa\xeds":"Nuevo Pa\xeds"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre Pa\xeds",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Moneda"),r.a.createElement(Ke.a,{showSearch:!0,optionFilterProp:"children",className:"single-select",style:{width:"100%"},value:u,onChange:function(e){return d(e)},placeholder:"Seleccionar moneda",size:"large",onSearch:E},h&&h.map((function(e){return r.a.createElement(Vt,{key:e.id,value:e.id},e.name)})))))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if([c,u].includes("")||[c,u].includes(null))return f.a.warning("Todos los campos son obligatorios");var t={name:c,currency_id:u};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))},Xt={getCountry:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.countries,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newCountry:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.countries,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editCountry:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.countries,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeCountry:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.countries,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var ea=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1],I=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Moneda",dataIndex:"currency_name",key:"currency_name",render:function(e){return r.a.createElement("span",null,e)}}];Object(n.useEffect)((function(){v(!0),Xt.getCountry("",5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))}),[]);var D=function(){_(!1),v(!0),Xt.getCountry("",5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},F=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){var a;return{key:t,id:e.id,name:e.name,currency_id:e.currency_id,currency_name:null===(a=e.currency)||void 0===a?void 0:a.name}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},A=function(){_(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:I,dataSource:a,handlerTextSearch:function(e){v(!0),Xt.getCountry(e,5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)}))},handlerEditRow:function(e){u(e),w(!0),_(!0)},handlerDeleteRow:function(e){v(!0),Xt.removeCountry(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),D()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){_(!0),w(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){P&&(v(!0),Le.getNextPage(p).then((function(e){c(a.concat(F(e))),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:P}),r.a.createElement($t,{closable:A,visible:y,edit:S,editData:s,cancelButton:A,saveButton:function(e,t,a){switch(e){case!0:Xt.editCountry(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),D())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:Xt.newCountry(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion creada."),D())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},ta=Ke.a.Option,aa=oe.a.Title;var na=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(!1),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)([]),v=Object(i.a)(E,2),O=v[0],j=v[1];Object(n.useEffect)((function(){o(e.edit?e.editData.name:""),d(e.edit?e.editData.country_id:null),e.edit&&e.visible&&y("")}),[e.visible]),Object(n.useEffect)((function(){y("")}),[]);var y=function(e){b(!0),Le.getCountryOption(e).then((function(e){j(e.data.data),b(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(aa,null," ",e.edit?"Editar Region":"Nueva Region"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre Region",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Pa\xeds al que pertenece"),r.a.createElement(Ke.a,{loading:h,showSearch:!0,optionFilterProp:"children",className:"single-select",style:{width:"100%"},value:u,onChange:function(e){return d(e)},placeholder:"Selecciona pa\xeds al que pertenece",onSearch:y,size:"large"},O&&O.map((function(e){return r.a.createElement(ta,{key:e.id,value:e.id},e.name)})))))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if([c,u].includes("")||[c,u].includes(null))return f.a.warning("Todos los campos son obligatorios");var t={name:c,country_id:u};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))},ra={getRegion:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Region,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newRegion:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.Region,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editRegion:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.Region,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeRegion:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.Region,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var ca=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){v(!0),ra.getRegion("",5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))}),[]);var I=function(){v(!0),_(!1),ra.getRegion("",5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},D=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Pa\xeds al que aplica",dataIndex:"country_name",key:"country_name",render:function(e){return r.a.createElement("span",null,e)}}],F=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){var a;return{key:t,id:e.id,name:e.name,country_id:e.country_id,country_name:null===(a=e.country)||void 0===a?void 0:a.name}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},A=function(){_(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:D,dataSource:a,handlerTextSearch:function(e){v(!0),ra.getRegion(e,5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)}))},handlerEditRow:function(e){u(e),w(!0),_(!0)},handlerDeleteRow:function(e){v(!0),ra.removeRegion(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),I()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){_(!0),w(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){P&&(v(!0),Le.getNextPage(p).then((function(e){c(a.concat(F(e))),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:P}),r.a.createElement(na,{closable:A,visible:y,edit:S,editData:s,cancelButton:A,saveButton:function(e,t,a){switch(e){case!0:ra.editRegion(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:ra.newRegion(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion creada."),I())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},oa=Ke.a.Option,ia=oe.a.Title;var la=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),h=p[0],b=p[1];Object(n.useEffect)((function(){e.edit&&e.visible&&E(""),o(e.edit?e.editData.name:""),d(e.edit?e.editData.countries_ids:[])}),[e.visible]),Object(n.useEffect)((function(){E("")}),[]);var E=function(e){Le.getCountryOption(e).then((function(e){b(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(ia,null," ",e.edit?"Editar Nivel socioeconomico":"Nuevo Nivel socioeconomico"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre Departamento/Estado",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Pa\xedses a los que aplica"),r.a.createElement(Ke.a,{mode:"multiple",showSearch:!0,optionFilterProp:"children",className:"single-select",style:{width:"100%"},value:u,onChange:function(e){return d(e)},placeholder:"Seleccionar pa\xedses",size:"large",onSearch:E},h&&h.map((function(e){return r.a.createElement(oa,{key:e.id,value:e.id},e.name)})))))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if([c,u].includes("")||[c,u].includes(null))return f.a.warning("Todos los campos son obligatorios");var t={name:c,is_all_countries:1,countries:u};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))},sa={getSocioEconomic:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.socioeconomicLevel,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newSocioEconomic:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.socioeconomicLevel,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editSocioEconomic:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.socioeconomicLevel,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeSocioEconomic:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.socioeconomicLevel,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var ua=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){v(!0),sa.getSocioEconomic("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))}),[]);var I=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){var a,n;return{key:t,id:e.id,name:e.name,country_names:null===(a=e.countries)||void 0===a?void 0:a.map((function(e){return e.name})).join(", "),countries_ids:null===(n=e.countries)||void 0===n?void 0:n.map((function(e){return e.id}))}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},D=function(){_(!1),v(!0),sa.getSocioEconomic("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},F=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Pa\xedses a los que aplica",dataIndex:"country_names",key:"country_names",render:function(e){return r.a.createElement("span",null,e)}}],A=function(){_(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:F,dataSource:a,handlerTextSearch:function(e){v(!0),sa.getSocioEconomic(e,5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)}))},handlerEditRow:function(e){u(e),w(!0),_(!0)},handlerDeleteRow:function(e){v(!0),sa.removeSocioEconomic(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),D()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){_(!0),w(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){P&&(v(!0),Le.getNextPage(p).then((function(e){c(a.concat(I(e))),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:P}),r.a.createElement(la,{closable:A,visible:y,edit:S,editData:s,cancelButton:A,saveButton:function(e,t,a){switch(e){case!0:sa.editSocioEconomic(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),D())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:sa.newSocioEconomic(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion creada."),D())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},da=Ke.a.Option,ma=oe.a.Title;var pa=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(null),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(null),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)(null),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)(!1),k=Object(i.a)(S,2),C=k[0],D=k[1],F=Object(n.useState)([]),A=Object(i.a)(F,2),U=A[0],z=A[1],B=Object(n.useState)([]),R=Object(i.a)(B,2),M=R[0],L=R[1],q=Object(n.useState)([]),H=Object(i.a)(q,2),K=H[0],G=H[1],J=Object(n.useState)([]),Q=Object(i.a)(J,2),Z=Q[0],Y=Q[1],V=Object(n.useState)(!0),W=Object(i.a)(V,2),$=W[0],X=W[1],ee=Object(n.useState)(!0),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!0),ce=Object(i.a)(re,2),oe=ce[0],ie=ce[1];Object(n.useEffect)((function(){o(e.edit?e.editData.name:""),d(e.edit?e.editData.country_id:null),b(e.edit?e.editData.region_id:null),j(e.edit?e.editData.state_id:null),x(e.edit?e.editData.muni_id:null),e.edit&&e.visible&&se("","","","")}),[e.visible]),Object(n.useEffect)((function(){le("")}),[]);var le=function(e){X(!0),Le.getCountryOption(e).then((function(e){z(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},se=function(t,a,n,r){D(!0),Le.getCountryOption(t).then((function(e){z(e.data.data)})).then((function(t){Le.getRegionsByCountryId(a,e.editData.country_id).then((function(e){L(e.data.data)}))})).then((function(t){Le.getStateByRegionId(n,e.editData.region_id).then((function(e){G(e.data.data)}))})).then((function(t){Le.getMunicipalitiesByStateId(r,e.editData.state_id).then((function(e){Y(e.data.data),D(!1),X(!1),ne(!1),ie(!1),D(!1)}))})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},ue=function(){o(""),d(null),b(null),j(null),x(null),X(!0),ne(!0),ie(!0),e.closable()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:ue,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(ma,null," ",e.edit?"Editar Zona/Barrio":"Nueva Zona/Barrio"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre Zona/Barrio",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Pa\xeds al que pertenece"),r.a.createElement(Ke.a,{loading:C,showSearch:!0,optionFilterProp:"children",className:"single-select",style:{width:"100%"},value:u,onChange:function(e){return d(t=e),void Le.getRegionsByCountryId("",t).then((function(e){b(null),j(null),x(null),L(e.data.data),X(!1),ne(!0),ie(!0)}));var t},onSearch:le,placeholder:"Selecciona pa\xeds al que pertenece",size:"large"},U&&U.map((function(e){return r.a.createElement(da,{key:e.id,value:e.id},e.name)}))))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Region a la que pertenece"),r.a.createElement(Ke.a,{loading:C,showSearch:!0,optionFilterProp:"children",disabled:$,className:"single-select",style:{width:"100%"},value:h,onChange:function(e){return b(t=e),void Le.getStateByRegionId("",t).then((function(e){j(null),x(null),G(e.data.data),ne(!1),ie(!0)}));var t},onSearch:function(e){ne(!0),Le.getRegionsByCountryId(e,u).then((function(e){L(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},placeholder:"Selecciona region al que pertenece",size:"large"},M&&M.map((function(e){return r.a.createElement(da,{key:e.id,value:e.id},e.name)})))),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Departamento/Estado a la que pertenece"),r.a.createElement(Ke.a,{loading:C,showSearch:!0,optionFilterProp:"children",disabled:ae,className:"single-select",style:{width:"100%"},value:O,onChange:function(e){return j(t=e),void Le.getMunicipalitiesByStateId("",t).then((function(e){x(null),Y(e.data.data),ie(!1)}));var t},onSearch:function(e){Le.getStateByRegionId(e,h).then((function(e){G(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},placeholder:"Selecciona Departamento/Estado al que pertenece",size:"large"},K&&K.map((function(e){return r.a.createElement(da,{key:e.id,value:e.id},e.name)}))))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Municipio/Localidad a la que pertenece"),r.a.createElement(Ke.a,{loading:C,showSearch:!0,optionFilterProp:"children",disabled:oe,className:"single-select",style:{width:"100%"},value:N,onChange:function(e){return x(e)},onSearch:function(e){Le.getMunicipalitiesByStateId(e,O).then((function(e){Y(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},placeholder:"Selecciona Municipio/Localidad al que pertenece",size:"large"},Z&&Z.map((function(e){return r.a.createElement(da,{key:e.id,value:e.id},e.name)})))))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:ue},"Cancelar"),r.a.createElement(P.a,{loading:C,htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if([c,u,h,O,N].includes("")||[c,u,h,O,N].includes(null))return f.a.warning("Todos los campos son obligatorios");var t={name:c,municipality_id:N};e.saveButton(e.edit,t,e.edit?e.editData.id:null),ue()}()}},"Guardar")))))))},fa={getZone:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Zones,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newZone:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.Zones,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editZone:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.Zones,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeZone:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.Zones,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var ga=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1],I=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Pa\xeds",dataIndex:"country_name",key:"country_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Region",dataIndex:"region_name",key:"region_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Departamento/estado",dataIndex:"state_name",key:"state_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Municipio/Localidad",dataIndex:"muni_name",key:"muni_name",render:function(e){return r.a.createElement("span",null,e)}}],D=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){var a,n,r,c,o,i,l,s,u,d,m,p,f,g,h,b;return{key:t,id:e.id,name:e.name,country_id:null===(a=e.municipality)||void 0===a||null===(n=a.state)||void 0===n||null===(r=n.region)||void 0===r?void 0:r.country_id,country_name:null===(c=e.municipality)||void 0===c||null===(o=c.state)||void 0===o||null===(i=o.region)||void 0===i||null===(l=i.country)||void 0===l?void 0:l.name,region_name:null===(s=e.municipality)||void 0===s||null===(u=s.state)||void 0===u||null===(d=u.region)||void 0===d?void 0:d.name,region_id:null===(m=e.municipality)||void 0===m||null===(p=m.state)||void 0===p?void 0:p.region_id,state_name:null===(f=e.municipality)||void 0===f||null===(g=f.state)||void 0===g?void 0:g.name,state_id:null===(h=e.municipality)||void 0===h?void 0:h.state_id,muni_name:null===(b=e.municipality)||void 0===b?void 0:b.name,muni_id:e.municipality_id}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")};Object(n.useEffect)((function(){v(!0),fa.getZone("",5).then((function(e){c(D(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))}),[]);var F=function(){_(!1),v(!0),fa.getZone("",5).then((function(e){c(D(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},A=function(){_(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:I,dataSource:a,handlerTextSearch:function(e){v(!0),fa.getZone(e,5).then((function(e){c(D(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)}))},handlerEditRow:function(e){u(e),w(!0),_(!0)},handlerDeleteRow:function(e){v(!0),fa.removeZone(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),F()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){_(!0),w(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){P&&(v(!0),Le.getNextPage(p).then((function(e){c(a.concat(D(e))),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:P}),r.a.createElement(pa,{closable:A,visible:y,edit:S,editData:s,cancelButton:A,saveButton:function(e,t,a){switch(e){case!0:fa.editZone(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),F())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:fa.newZone(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion creada."),F())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},ha={getFlags:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.storeFlag,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeFlag:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.storeFlag,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editFlag:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.storeFlag,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newFlag:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.storeFlag,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ba=Ke.a.Option,Ea=oe.a.Title;var va=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(!1),v=Object(i.a)(E,2),O=v[0],j=v[1];Object(n.useEffect)((function(){o(e.edit?e.editData.name:""),b(e.edit?e.editData.store_chain_id:null),y("")}),[e.visible]);var y=function(e){j(!0),Le.getStoreChainOption(e).then((function(e){j(!1),d(e.data.data)})).catch((function(e){console.log(e),j(!1),f.a.error("No se ha podido cargar la informaci\xf3n de Cadena")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(Ea,null,e.edit?"Editar Bandera":"Nueva Bandera"),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre Bandera",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Cadena a la que pertenece"),r.a.createElement(Ke.a,{showSearch:!0,optionFilterProp:"children",onSearch:y,value:h,className:"single-select",placeholder:"Seleccionar cadena a la que pertenece",size:"large",style:{width:"100%"},onChange:b},u&&u.map((function(e){return r.a.createElement(ba,{key:e.id,value:e.id},e.name)})))))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{loading:O,htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if(!c||!h)return f.a.warning("Todos los campos son obligatorios");var t={name:c,store_chain_id:h};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))};var Oa=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(!1),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!1),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(null),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){I()}),[]);var I=function(){v(!0),w(!1),ha.getFlags("",5).then((function(e){c(D(e)),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informaci\xf3n")}))},D=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){var a,n;return{key:t,id:e.id,name:e.name,store_chain_id:null===(a=e.store_chain)||void 0===a?void 0:a.id,store_chain_name:null===(n=e.store_chain)||void 0===n?void 0:n.name}}));f.a.error("Se excedi\xf3 el l\xedmite de peticiones, espera y recarga la aplicaci\xf3n")},F=function(){w(!1)},A=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Cadena a la que pertenece",dataIndex:"store_chain_name",key:"store_chain_name",render:function(e){return r.a.createElement("span",null,e)}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:A,dataSource:a,handlerTextSearch:function(e){v(!0),ha.getFlags(e,5).then((function(e){c(D(e)),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido filtrar la informaci\xf3n")}))},handlerEditRow:function(e){_(!0),w(!0),T(e)},handlerDeleteRow:function(e){v(!0),ha.removeFlag(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),I()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){w(!0),_(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){p&&(v(!0),Le.getNextPage(s).then((function(e){c(a.concat(D(e))),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informaci\xf3n")})))},moreInfo:p}),r.a.createElement(va,{closable:F,visible:S,edit:y,editData:P,cancelButton:F,saveButton:function(e,t,a){switch(e){case!0:ha.editFlag(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informaci\xf3n actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informaci\xf3n.")}));break;case!1:ha.newFlag(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informaci\xf3n actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al crear la informaci\xf3n.")}))}}}))},ja={getChains:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.storeChain,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeChain:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.storeChain,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editChain:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.storeChain,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newChain:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.storeChain,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ya=oe.a.Title;var _a=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){o(e.edit?e.editData.name:"")}),[e.visible]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(ya,null,e.edit?"Editar Cadena":"Nueva Cadena"),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre Cadena",size:"large"})))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if(!c)return f.a.warning("Todos los campos son obligatorios");var t={name:c};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))};var Na=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(!1),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!1),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(null),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){I()}),[]);var I=function(){v(!0),w(!1),ja.getChains("",5).then((function(e){c(D(e)),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informaci\xf3n")}))},D=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,id:e.id,name:e.name}}));f.a.error("Se excedi\xf3 el l\xedmite de peticiones, espera y recarga la aplicaci\xf3n")},F=function(){w(!1)},A=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:A,dataSource:a,handlerTextSearch:function(e){v(!0),ja.getChains(e,5).then((function(e){c(D(e)),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido filtrar la informacion")}))},handlerEditRow:function(e){_(!0),w(!0),T(e)},handlerDeleteRow:function(e){v(!0),ja.removeChain(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),I()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){w(!0),_(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){p&&(v(!0),Le.getNextPage(s).then((function(e){c(a.concat(D(e))),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informaci\xf3n")})))},moreInfo:p}),r.a.createElement(_a,{closable:F,visible:S,edit:y,editData:P,cancelButton:F,saveButton:function(e,t,a){switch(e){case!0:ja.editChain(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informaci\xf3n actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informaci\xf3n.")}));break;case!1:ja.newChain(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informaci\xf3n actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al crear la informaci\xf3n.")}))}}}))},xa={getStoreFormat:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.storeFormat,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeStoreFormat:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.storeFormat,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editStoreFormat:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.storeFormat,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newStoreFormat:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.storeFormat,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Sa=oe.a.Title;var wa=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){o(e.edit?e.editData.name:"")}),[e.visible]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(Sa,null,e.edit?"Editar formato de tienda":"Nuevo formato de tienda"),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre Formato Tienda",size:"large"})))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if(!c)return f.a.warning("Todos los campos son obligatorios");var t={name:c};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))};var ka=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(!1),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!1),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(null),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){I()}),[]);var I=function(){v(!0),w(!1),xa.getStoreFormat("",5).then((function(e){c(D(e)),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informaci\xf3n")}))},D=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,id:e.id,name:e.name}}));f.a.error("Se excedi\xf3 el l\xedmite de peticiones, espera y recarga la aplicaci\xf3n")},F=function(){w(!1)},A=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:A,dataSource:a,handlerTextSearch:function(e){v(!0),xa.getStoreFormat(e,5).then((function(e){c(D(e)),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido filtrar la informaci\xf3n")}))},handlerEditRow:function(e){_(!0),w(!0),T(e)},handlerDeleteRow:function(e){v(!0),xa.removeStoreFormat(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),I()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){w(!0),_(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){p&&(v(!0),Le.getNextPage(s).then((function(e){c(a.concat(D(e))),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informaci\xf3n")})))},moreInfo:p}),r.a.createElement(wa,{closable:F,visible:S,edit:y,editData:P,cancelButton:F,saveButton:function(e,t,a){switch(e){case!0:xa.editStoreFormat(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informaci\xf3n actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informaci\xf3n.")}));break;case!1:xa.newStoreFormat(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informaci\xf3n actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al crear la informaci\xf3n.")}))}}}))},Ca={getPaymentMethod:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.paymentMethod,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removePaymentMethod:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.paymentMethod,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editPaymentMethod:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.paymentMethod,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newPaymentMethod:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.paymentMethod,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Pa=Ke.a.Option,Ta=oe.a.Title;var Ia=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(!1),v=Object(i.a)(E,2),O=v[0],j=v[1];Object(n.useEffect)((function(){o(e.edit?e.editData.name:""),b(e.edit?e.editData.company_id:null),y("")}),[e.visible]);var y=function(e){j(!0),Le.getCompanies(e).then((function(e){j(!1),d(e.data.data)})).catch((function(e){console.log(e),j(!1),f.a.error("No se ha podido cargar la informacion de Compa\xf1ia")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(Ta,null,e.edit?"Editar m\xe9todo de pago":"Nuevo m\xe9todo de pago"),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre M\xe9todo de Pago",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Compa\xf1ia"),r.a.createElement(Ke.a,{showSearch:!0,optionFilterProp:"children",onSearch:y,value:h,className:"single-select",placeholder:"Seleccionar Compa\xf1ia",size:"large",style:{width:"100%"},onChange:b},u&&u.map((function(e){return r.a.createElement(Pa,{key:e.id,value:e.id},e.name)})))))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{loading:O,htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if(!c||!h)return f.a.warning("Todos los campos son obligatorios");var t={name:c,company_id:h};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))};var Da=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(!1),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!1),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(null),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){I()}),[]);var I=function(){v(!0),w(!1),Ca.getPaymentMethod("",5).then((function(e){c(D(e)),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informaci\xf3n")}))},D=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,id:e.id,name:e.name,company_id:e.company_id}}));f.a.error("Se excedi\xf3 el l\xedmite de peticiones, espera y recarga la aplicaci\xf3n")},F=function(){w(!1)},A=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:A,dataSource:a,handlerTextSearch:function(e){v(!0),Ca.getPaymentMethod(e,5).then((function(e){c(D(e)),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido filtrar la informaci\xf3n")}))},handlerEditRow:function(e){_(!0),w(!0),T(e)},handlerDeleteRow:function(e){v(!0),Ca.removePaymentMethod(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),I()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){w(!0),_(!1)},loading:E,createPermissions:14,editPermissions:15,deletePermissions:16}),r.a.createElement(Ve,{handlerButton:function(){p&&(v(!0),Le.getNextPage(s).then((function(e){c(a.concat(D(e))),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informaci\xf3n")})))},moreInfo:p}),r.a.createElement(Ia,{closable:F,visible:S,edit:y,editData:P,cancelButton:F,saveButton:function(e,t,a){switch(e){case!0:Ca.editPaymentMethod(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informaci\xf3n actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informaci\xf3n.")}));break;case!1:Ca.newPaymentMethod(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informaci\xf3n actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al crear la informaci\xf3n.")}))}}}))},Fa=oe.a.Title;var Aa=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){o(e.edit?e.editData.name:"")}),[e.visible]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(Fa,null,e.edit?"Editar tipo de negocio":"Nuevo tipo de negocio"),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre Tipo de negocio",size:"large"})))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if(!c)return f.a.warning("Todos los campos son obligatorios");var t={name:c};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))},Ua={getStoreType:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.storeType,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeStoreType:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.storeType,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editStoreType:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.storeType,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newStoreType:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.storeType,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var za=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(!1),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!1),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(null),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){I()}),[]);var I=function(){v(!0),w(!1),Ua.getStoreType("",5).then((function(e){c(D(e)),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informaci\xf3n")}))},D=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,id:e.id,name:e.name}}));f.a.error("Se excedi\xf3 el l\xedmite de peticiones, espera y recarga la aplicaci\xf3n")},F=function(){w(!1)},A=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:A,dataSource:a,handlerTextSearch:function(e){v(!0),Ua.getStoreType(e,5).then((function(e){c(D(e)),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido filtrar la informaci\xf3n")}))},handlerEditRow:function(e){_(!0),w(!0),T(e)},handlerDeleteRow:function(e){v(!0),Ua.removeStoreType(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),I()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){w(!0),_(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){p&&(v(!0),Le.getNextPage(s).then((function(e){c(a.concat(D(e))),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informaci\xf3n")})))},moreInfo:p}),r.a.createElement(Aa,{closable:F,visible:S,edit:y,editData:P,cancelButton:F,saveButton:function(e,t,a){switch(e){case!0:Ua.editStoreType(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informaci\xf3n actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informaci\xf3n.")}));break;case!1:Ua.newStoreType(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informaci\xf3n actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al crear la informaci\xf3n.")}))}}}))},Ba={getLocationType:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.locationType,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeLocationType:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.locationType,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editLocationType:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.locationType,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newLocationType:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.locationType,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ra=oe.a.Title;var Ma=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){o(e.edit?e.editData.name:"")}),[e.visible]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(Ra,null,e.edit?"Editar tipo de ubicaci\xf3n":"Nuevo tipo de ubicaci\xf3n"),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre Tipo de ubicaci\xf3n",size:"large"})))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if(!c)return f.a.warning("Todos los campos son obligatorios");var t={name:c};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))};var La=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(!1),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!1),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(null),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){I()}),[]);var I=function(){v(!0),w(!1),Ba.getLocationType("",5).then((function(e){c(D(e)),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informaci\xf3n")}))},D=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,id:e.id,name:e.name}}));f.a.error("Se excedi\xf3 el l\xedmite de peticiones, espera y recarga la aplicaci\xf3n")},F=function(){w(!1)},A=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:A,dataSource:a,handlerTextSearch:function(e){v(!0),Ba.getLocationType(e,5).then((function(e){c(D(e)),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido filtrar la informaci\xf3n")}))},handlerEditRow:function(e){_(!0),w(!0),T(e)},handlerDeleteRow:function(e){v(!0),Ba.removeLocationType(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),I()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){w(!0),_(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){p&&(v(!0),Le.getNextPage(s).then((function(e){c(a.concat(D(e))),u(e.data.next_page_url),g(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informaci\xf3n")})))},moreInfo:p}),r.a.createElement(Ma,{closable:F,visible:S,edit:y,editData:P,cancelButton:F,saveButton:function(e,t,a){switch(e){case!0:Ba.editLocationType(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informaci\xf3n actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informaci\xf3n.")}));break;case!1:Ba.newLocationType(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informaci\xf3n actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al crear la informaci\xf3n.")}))}}}))};var qa=function(e){return r.a.createElement(r.a.Fragment,null,function(t){switch(e.option){case"departamento":return r.a.createElement(Kt,null);case"municipio":return r.a.createElement(Yt,null);case"paises":return r.a.createElement(ea,null);case"regiones":return r.a.createElement(ca,null);case"nivelsocioeconomico":return r.a.createElement(ua,null);case"zona":return r.a.createElement(ga,null);case"bandera":return r.a.createElement(Oa,null);case"cadena":return r.a.createElement(Na,null);case"formatotienda":return r.a.createElement(ka,null);case"metodopago":return r.a.createElement(Da,null);case"tiponegocio":return r.a.createElement(za,null);case"tipoubicacion":return r.a.createElement(La,null);default:return r.a.createElement(r.a.Fragment,null)}}(e.option))},Ha={getMakers:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Makers,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newMakers:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.Makers,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editMakers:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.Makers,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeMakers:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.Makers,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ka=oe.a.Title;var Ga=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){o(e.edit?e.editData.name:"")}),[e.visible]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(Ka,null," ",e.edit?"Editar Fabricante":"Nuevo Fabricante"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Ingrese nombre del fabricante",size:"large"})))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if([c].includes("")||[c].includes(null))return f.a.warning("Todos los campos son obligatorios");var t={name:c};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))};var Ja=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){v(!0),Ha.getMakers("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))}),[]);var I=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,id:e.id,name:e.name}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},D=function(){_(!1),v(!0),Ha.getMakers("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},F=[{align:"left",title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}}],A=function(){_(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:F,dataSource:a,handlerTextSearch:function(e){v(!0),Ha.getMakers(e,5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)}))},handlerEditRow:function(e){u(e),w(!0),_(!0)},handlerDeleteRow:function(e){v(!0),Ha.removeMakers(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),D()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){_(!0),w(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){P&&(v(!0),Le.getNextPage(p).then((function(e){c(a.concat(I(e))),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:P}),r.a.createElement(Ga,{closable:A,visible:y,edit:S,editData:s,cancelButton:A,saveButton:function(e,t,a){switch(e){case!0:Ha.editMakers(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),D())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:Ha.newMakers(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion creada."),D())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},Qa={getUoms:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Uoms,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newUoms:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.Uoms,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editUoms:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.Uoms,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeUoms:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.Uoms,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Za=oe.a.Title;var Ya=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),h=p[0],b=p[1];return Object(n.useEffect)((function(){o(e.edit?e.editData.name:""),d(e.edit?e.editData.abbreviation:""),b(e.edit?e.editData.description:"")}),[e.visible]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(Za,null," ",e.edit?"Editar unidad de medida":"Nueva unidad de medida"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Ingrese el nombre de la unidad de medida",size:"large"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Abreviaci\xf3n"),r.a.createElement(w.a,{value:u,onChange:function(e){return d(e.target.value)},placeholder:"Ingrese la abreviaci\xf3n de la unidad de medida",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Descripci\xf3n"),r.a.createElement(w.a,{value:h,onChange:function(e){return b(e.target.value)},placeholder:"Ingrese la descripci\xf3n de la unidad de medida",size:"large"})))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if([c,u,h].includes("")||[c,u,h].includes(null))return f.a.warning("Todos los campos son obligatorios");var t={name:c,abbreviation:u,description:h};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))};var Va=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){v(!0),Qa.getUoms("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))}),[]);var I=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,id:e.id,name:e.name,abbreviation:e.abbreviation,description:e.description}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},D=function(){_(!1),v(!0),Qa.getUoms("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},F=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Abreviaci\xf3n",dataIndex:"abbreviation",key:"abbreviation",render:function(e){return r.a.createElement("span",null,e)}},{title:"Descripci\xf3n",dataIndex:"description",key:"description",render:function(e){return r.a.createElement("span",null,e)}}],A=function(){_(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:F,dataSource:a,handlerTextSearch:function(e){v(!0),Qa.getUoms(e,5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)}))},handlerEditRow:function(e){u(e),w(!0),_(!0)},handlerDeleteRow:function(e){v(!0),Qa.removeUoms(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),D()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){_(!0),w(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){P&&(v(!0),Le.getNextPage(p).then((function(e){c(a.concat(I(e))),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:P}),r.a.createElement(Ya,{closable:A,visible:y,edit:S,editData:s,cancelButton:A,saveButton:function(e,t,a){switch(e){case!0:Qa.editUoms(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),D())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:Qa.newUoms(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion creada."),D())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},Wa={getBrands:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Brands,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newBrands:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.Brands,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editBrands:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.Brands,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeBrands:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.Brands,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},$a=Ke.a.Option,Xa=oe.a.Title;var en=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(!1),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)([]),v=Object(i.a)(E,2),O=v[0],j=v[1];Object(n.useEffect)((function(){o(e.edit?e.editData.name:""),d(e.edit?e.editData.maker_id:null),e.edit&&e.visible&&y("")}),[e.visible]),Object(n.useEffect)((function(){y("")}),[]);var y=function(e){b(!0),Le.getMakersOptions(e).then((function(e){j(e.data.data),b(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de fabricantes")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(Xa,null," ",e.edit?"Editar Marca":"Nueva Marca"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre de marca",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Fabricante"),r.a.createElement(Ke.a,{loading:h,showSearch:!0,optionFilterProp:"children",className:"single-select",style:{width:"100%"},value:u,onChange:function(e){return d(e)},placeholder:"Seleccionar fabricante",onSearch:y,size:"large"},O&&O.map((function(e){return r.a.createElement($a,{key:e.id,value:e.id},e.name)})))))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if([c,u].includes("")||[c,u].includes(null))return f.a.warning("Todos los campos son obligatorios");var t={name:c,maker_id:u};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))};var tn=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){v(!0),Wa.getBrands("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))}),[]);var I=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){var a;return{key:t,id:e.id,name:e.name,maker_id:e.maker_id,maker_name:null===(a=e.maker)||void 0===a?void 0:a.name}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},D=function(){_(!1),v(!0),Wa.getBrands("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},F=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Fabricante",dataIndex:"maker_name",key:"maker_name",render:function(e){return r.a.createElement("span",null,e)}}],A=function(){_(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:F,dataSource:a,handlerTextSearch:function(e){v(!0),Wa.getBrands(e,5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)}))},handlerEditRow:function(e){u(e),w(!0),_(!0)},handlerDeleteRow:function(e){v(!0),Wa.removeBrands(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),D()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){_(!0),w(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){P&&(v(!0),Le.getNextPage(p).then((function(e){c(a.concat(I(e))),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:P}),r.a.createElement(en,{closable:A,visible:y,edit:S,editData:s,cancelButton:A,saveButton:function(e,t,a){switch(e){case!0:Wa.editBrands(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),D())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:Wa.newBrands(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion creada."),D())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},an={getProviders:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Providers,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newProviders:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.Providers,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editProviders:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.Providers,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeProviders:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.Providers,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},nn=Ke.a.Option,rn=oe.a.Title;var cn=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(null),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(!1),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)([]),_=Object(i.a)(y,2),N=_[0],x=_[1];Object(n.useEffect)((function(){o(e.edit?e.editData.name:""),d(e.edit?e.editData.nit:""),b(e.edit?e.editData.country_id:null),e.edit&&e.visible&&S("")}),[e.visible]),Object(n.useEffect)((function(){S("")}),[]);var S=function(e){j(!0),Le.getCountryOption(e).then((function(e){x(e.data.data),j(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(rn,null," ",e.edit?"Editar proveedor":"Nuevo proveedor"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre proveedor",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"NIT"),r.a.createElement(w.a,{value:u,onChange:function(e){return d(e.target.value)},placeholder:"Escribir NIT",size:"large"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Pa\xeds al que pertenece"),r.a.createElement(Ke.a,{loading:O,showSearch:!0,optionFilterProp:"children",className:"single-select",style:{width:"100%"},value:h,onChange:function(e){return b(e)},placeholder:"Selecciona pa\xeds al que pertenece",onSearch:S,size:"large"},N&&N.map((function(e){return r.a.createElement(nn,{key:e.id,value:e.id},e.name)})))))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if([c,u,h].includes("")||[c,u,h].includes(null))return f.a.warning("Todos los campos son obligatorios");!Number(u.slice(0,-1))||u.includes(".")||u.includes("-")||u.includes("+")?f.a.warning("El campo NIT solo acepta valores num\xe9ricos"):Number(u.slice(-1).toLowerCase())||"k"===u.slice(-1).toLowerCase()||f.a.warning("El campo NIT solo acepta la letra k");var t={name:c,country_id:h,nit:u};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))};var on=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){v(!0),an.getProviders("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))}),[]);var I=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){var a;return{key:t,id:e.id,name:e.name,nit:e.nit,country_id:e.country_id,country_name:null===(a=e.country)||void 0===a?void 0:a.name}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},D=function(){_(!1),v(!0),an.getProviders("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},F=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Nit",dataIndex:"nit",key:"nit",render:function(e){return r.a.createElement("span",null,e)}},{title:"Pa\xeds al que pertenece",dataIndex:"country_name",key:"country_name",render:function(e){return r.a.createElement("span",null,e)}}],A=function(){_(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:F,dataSource:a,handlerTextSearch:function(e){v(!0),an.getProviders(e,5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)}))},handlerEditRow:function(e){u(e),w(!0),_(!0)},handlerDeleteRow:function(e){v(!0),an.removeProviders(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),D()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){_(!0),w(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){P&&(v(!0),Le.getNextPage(p).then((function(e){c(a.concat(I(e))),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:P}),r.a.createElement(cn,{closable:A,visible:y,edit:S,editData:s,cancelButton:A,saveButton:function(e,t,a){switch(e){case!0:an.editProviders(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),D())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:an.newProviders(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion creada."),D())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},ln={getProductDepartament:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.ProductDepartament,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newProductDepartament:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.ProductDepartament,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editProductDepartament:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.ProductDepartament,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeProductDepartament:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.ProductDepartament,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},sn=oe.a.Title;var un=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){o(e.edit?e.editData.name:"")}),[e.visible]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(sn,null," ",e.edit?"Editar departamento de producto":"Nuevo departamento de producto"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Ingrese nombre de departamento de productos",size:"large"})))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if([c].includes("")||[c].includes(null))return f.a.warning("Todos los campos son obligatorios");var t={name:c};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))};var dn=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){v(!0),ln.getProductDepartament("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))}),[]);var I=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,id:e.id,name:e.name}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},D=function(){_(!1),v(!0),ln.getProductDepartament("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},F=[{align:"left",title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}}],A=function(){_(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:F,dataSource:a,handlerTextSearch:function(e){v(!0),ln.getProductDepartament(e,5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)}))},handlerEditRow:function(e){u(e),w(!0),_(!0)},handlerDeleteRow:function(e){v(!0),ln.removeProductDepartament(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),D()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){_(!0),w(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){P&&(v(!0),Le.getNextPage(p).then((function(e){c(a.concat(I(e))),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:P}),r.a.createElement(un,{closable:A,visible:y,edit:S,editData:s,cancelButton:A,saveButton:function(e,t,a){switch(e){case!0:ln.editProductDepartament(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),D())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:ln.newProductDepartament(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion creada."),D())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},mn={getProductCategory:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.ProductCategory,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newProductCategory:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.ProductCategory,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editProductCategory:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.ProductCategory,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeProductCategory:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.ProductCategory,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},pn=Ke.a.Option,fn=oe.a.Title;var gn=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(!1),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)([]),v=Object(i.a)(E,2),O=v[0],j=v[1];Object(n.useEffect)((function(){o(e.edit?e.editData.name:""),d(e.edit?e.editData.product_department_id:null),e.edit&&e.visible&&y("")}),[e.visible]),Object(n.useEffect)((function(){y("")}),[]);var y=function(e){b(!0),Le.getProductDepartamentOptions(e).then((function(e){j(e.data.data),b(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de departamento de producto")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(fn,null," ",e.edit?"Editar categor\xeda de producto":"Nueva categor\xeda de producto"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre de categor\xeda de productos",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Departamento al que pertenece"),r.a.createElement(Ke.a,{loading:h,showSearch:!0,optionFilterProp:"children",className:"single-select",style:{width:"100%"},value:u,onChange:function(e){return d(e)},placeholder:"Seleccionar departamento de productos",onSearch:y,size:"large"},O&&O.map((function(e){return r.a.createElement(pn,{key:e.id,value:e.id},e.name)})))))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if([c,u].includes("")||[c,u].includes(null))return f.a.warning("Todos los campos son obligatorios");var t={name:c,product_department_id:u};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))};var hn=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){v(!0),mn.getProductCategory("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))}),[]);var I=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){var a;return{key:t,id:e.id,name:e.name,product_department_id:e.product_department_id,product_department_name:null===(a=e.product_department)||void 0===a?void 0:a.name}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},D=function(){_(!1),v(!0),mn.getProductCategory("",5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},F=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Departamento de producto al que pertenece",dataIndex:"product_department_name",key:"product_department_name",render:function(e){return r.a.createElement("span",null,e)}}],A=function(){_(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:F,dataSource:a,handlerTextSearch:function(e){v(!0),mn.getProductCategory(e,5).then((function(e){c(I(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)}))},handlerEditRow:function(e){u(e),w(!0),_(!0)},handlerDeleteRow:function(e){v(!0),mn.removeProductCategory(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),D()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){_(!0),w(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){P&&(v(!0),Le.getNextPage(p).then((function(e){c(a.concat(I(e))),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:P}),r.a.createElement(gn,{closable:A,visible:y,edit:S,editData:s,cancelButton:A,saveButton:function(e,t,a){switch(e){case!0:mn.editProductCategory(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),D())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:mn.newProductCategory(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion creada."),D())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},bn=Ke.a.Option,En=oe.a.Title;var vn=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(null),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(!0),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)([]),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)([]),k=Object(i.a)(S,2),C=k[0],D=k[1],F=Object(n.useState)(!1),A=Object(i.a)(F,2),U=A[0],z=A[1];Object(n.useEffect)((function(){var t,a;(o(e.edit?e.editData.name:""),d(e.edit?e.editData.product_department_id:null),b(e.edit?e.editData.product_category_id:null),j(!0),e.edit&&e.visible)&&B(e.edit&&(null===(t=e.editData)||void 0===t?void 0:t.product_department_name)?e.editData.product_department_name:"",e.edit&&(null===(a=e.editData)||void 0===a?void 0:a.product_department_name)?e.editData.product_department_name:"")}),[e.visible]),Object(n.useEffect)((function(){R("")}),[]);var B=function(t,a){z(!0),Le.getProductDepartamentOptions(t).then((function(e){x(e.data.data)})).then((function(t){var n;(null===(n=e.editData)||void 0===n?void 0:n.product_department_id)&&Le.getProductCategoryOptions(a,e.editData.product_department_id).then((function(e){var t,a;(null===(t=e.data)||void 0===t?void 0:t.data)?D(null===(a=e.data)||void 0===a?void 0:a.data):D()})),j(!1),z(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},R=function(e){j(!0),Le.getProductDepartamentOptions(e).then((function(e){x(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(En,null," ",e.edit?"Editar subcategor\xeda de productos":"Nueva subcategor\xeda de productos"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nombre"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Nombre de subcategor\xeda",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Departamento de productos al que pertenece"),r.a.createElement(Ke.a,{loading:U,showSearch:!0,optionFilterProp:"children",className:"single-select",style:{width:"100%"},value:u,onSearch:R,onChange:function(e){return d(t=e),void Le.getProductCategoryOptions("",t).then((function(e){b(null),D(e.data.data),j(!1)}));var t},placeholder:"Selecciona departamento de productos",size:"large"},N&&N.map((function(e){return r.a.createElement(bn,{key:e.id,value:e.id},e.name)}))))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Categor\xeda a la que pertenece"),r.a.createElement(Ke.a,{loading:U,showSearch:!0,optionFilterProp:"children",className:"single-select",style:{width:"100%"},value:h,onSearch:function(e){Le.getProductCategoryOptions(e,u).then((function(e){console.log(e),D(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))},onChange:function(e){return b(e)},placeholder:"Selecciona region al que pertenece",size:"large",disabled:O},C&&C.map((function(e){return r.a.createElement(bn,{key:e.id,value:e.id},e.name)})))))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{loading:U,htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){if([c,h,u].includes("")||[c,h,u].includes(null))return f.a.warning("Todos los campos son obligatorios");var t={name:c,product_category_id:h};e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar")))))))},On={getProductSubCategory:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.ProductSubCategory,"?per_page=").concat(a,"&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newProductSubCategory:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.ProductSubCategory,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editProductSubCategory:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.ProductSubCategory,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeProductSubCategory:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.ProductSubCategory,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var jn=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){On.getProductSubCategory("",5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))}),[]);var I=function(){v(!0),_(!1),On.getProductSubCategory("",5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},D=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Departamento de productos al que pertenece",dataIndex:"product_department_name",key:"product_department_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Categor\xeda a la que pertenece",dataIndex:"product_category_name",key:"product_category_name",render:function(e){return r.a.createElement("span",null,e)}}],F=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){var a,n,r,c;return{key:t,id:e.id,name:e.name,product_category_id:e.product_category_id,product_category_name:null===(a=e.product_category)||void 0===a?void 0:a.name,product_department_id:null===(n=e.product_category)||void 0===n?void 0:n.product_department_id,product_department_name:null===(r=e.product_category)||void 0===r||null===(c=r.product_department)||void 0===c?void 0:c.name}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},A=function(){_(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:D,dataSource:a,handlerTextSearch:function(e){v(!0),On.getProductSubCategory(e,5).then((function(e){c(F(e)),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido filtrar la informacion")}))},handlerEditRow:function(e){w(!0),_(!0),u(e)},handlerDeleteRow:function(e){v(!0),On.removeProductSubCategory(e.id).then((function(e){f.a.success("".concat(e.name," se ha elminado.")),I()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){_(!0),w(!1)},loading:E,createPermissions:66,editPermissions:67,deletePermissions:68}),r.a.createElement(Ve,{handlerButton:function(){P&&(v(!0),Le.getNextPage(p).then((function(e){c(a.concat(F(e))),g(e.data.next_page_url),T(null!==e.data.next_page_url),v(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:P}),r.a.createElement(vn,{closable:A,visible:y,edit:S,editData:s,cancelButton:A,saveButton:function(e,t,a){switch(e){case!0:On.editProductSubCategory(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:On.newProductSubCategory(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Le.checkErrors(e):(f.a.success("Informacion actualizada."),I())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))};var yn=function(e){return r.a.createElement(r.a.Fragment,null,function(e){switch(e){case"categoriaproducto":return r.a.createElement(hn,null);case"departamentoproducto":return r.a.createElement(dn,null);case"fabricanteproducto":return r.a.createElement(Ja,null);case"marcaproducto":return r.a.createElement(tn,null);case"proveedorproducto":return r.a.createElement(on,null);case"subcategoriaproducto":return r.a.createElement(jn,null);case"unidaddemedidaproducto":return r.a.createElement(Va,null);default:return r.a.createElement(r.a.Fragment,null)}}(e.option))},_n=kt.a.TabPane,Nn=Ke.a.Option;var xn=function(){var e=Object(n.useContext)(ae),t=Object(i.a)(e,1)[0],a=te(t).hasPermissions,c=Object(n.useState)(null),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(null),d=Object(i.a)(u,2),m=d[0],p=d[1],f=Object(n.useState)(null),g=Object(i.a)(f,2),h=g[0],b=g[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(He,{title:"Configuraciones"}),r.a.createElement(kt.a,{id:"tenderoConfigurationTabs",defaultActiveKey:"1"},r.a.createElement(_n,{tab:"Generales",key:"1"},r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(Ke.a,{value:l,className:"single-select",placeholder:"Selecciona una configuracion",size:"large",style:{width:"40%"},onChange:function(e){return s(e)},getPopupContainer:function(e){return e.parentNode}},r.a.createElement(Nn,{value:"departamento"},"Departamento/Estado"),r.a.createElement(Nn,{value:"municipio"},"Municipio/Localidad"),r.a.createElement(Nn,{value:"nivelsocioeconomico"},"Niveles socioecon\xf3micos"),r.a.createElement(Nn,{value:"paises"},"Pa\xedses"),r.a.createElement(Nn,{value:"regiones"},"Regiones"),r.a.createElement(Nn,{value:"zona"},"Zona/Barrio")))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},l?r.a.createElement(I.a,{span:24,className:"margin-top-30"},r.a.createElement(qa,{option:l})):r.a.createElement(I.a,{span:24,className:"empty-section-container"},r.a.createElement("div",{className:"empty-section"},r.a.createElement("span",{className:"empty-section-message"},"Por favor selecciona una configuracion a editar"))))),r.a.createElement(_n,{tab:"Tiendas",key:"2"},r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(Ke.a,{value:m,className:"single-select",placeholder:"Selecciona una configuracion",size:"large",style:{width:"40%"},onChange:function(e){return p(e)},getPopupContainer:function(e){return e.parentNode}},r.a.createElement(Nn,{value:"bandera"},"Bandera"),r.a.createElement(Nn,{value:"cadena"},"Cadena"),r.a.createElement(Nn,{value:"formatotienda"},"Formato de tienda"),a([13])&&r.a.createElement(Nn,{value:"metodopago"},"Metodo de pago"),r.a.createElement(Nn,{value:"tiponegocio"},"Tipo de Negocio"),r.a.createElement(Nn,{value:"tipoubicacion"},"Tipo de ubicacion")))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},m?r.a.createElement(I.a,{span:24,className:"margin-top-30"},r.a.createElement(qa,{option:m})):r.a.createElement(I.a,{span:24,className:"empty-section-container"},r.a.createElement("div",{className:"empty-section"},r.a.createElement("span",{className:"empty-section-message"},"Por favor selecciona una configuracion a editar"))))),r.a.createElement(_n,{tab:"Productos",key:"3"},r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(Ke.a,{value:h,className:"single-select",placeholder:"Selecciona una configuracion",size:"large",style:{width:"40%"},onChange:function(e){return b(e)},getPopupContainer:function(e){return e.parentNode}},r.a.createElement(Nn,{value:"categoriaproducto"},"Categorias de producto"),r.a.createElement(Nn,{value:"departamentoproducto"},"Departamento de producto"),r.a.createElement(Nn,{value:"fabricanteproducto"},"Fabricantes"),r.a.createElement(Nn,{value:"marcaproducto"},"Marca"),r.a.createElement(Nn,{value:"proveedorproducto"},"Proveedores"),r.a.createElement(Nn,{value:"subcategoriaproducto"},"Subcategorias de productos"),r.a.createElement(Nn,{value:"unidaddemedidaproducto"},"Unidad de medida")))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},h?r.a.createElement(I.a,{span:24,className:"margin-top-30"},r.a.createElement(yn,{option:h})):r.a.createElement(I.a,{span:24,className:"empty-section-container"},r.a.createElement("div",{className:"empty-section"},r.a.createElement("span",{className:"empty-section-message"},"Por favor selecciona una configuracion a editar")))))))};var Sn=function(e){var t,a,c=Object(n.useContext)(ae),o=Object(i.a)(c,1)[0],l=te(o).hasPermissions,s=[{title:"Lista de productos",dataIndex:"productDescription",key:"productDescription",align:"left",render:function(e){return r.a.createElement("span",null,e)}},{align:"right",title:"",dataIndex:"_id",key:"_id",render:function(t,a){return r.a.createElement("span",null,r.a.createElement(k.a,{placement:"left",content:r.a.createElement("div",null,l([23])&&r.a.createElement("span",{className:"user-options-items",onClick:function(){return e.handlerEditRow(a)}},"Editar"),l([23])&&l([24])&&r.a.createElement(g.a,{className:"divider-enterprise-margins",type:"horizontal"}),l([24])&&r.a.createElement(C.a,{title:"Estas seguro de borrar el elemento selccionado?",onConfirm:function(){return e.handlerDeleteRow(a)},okText:"Si",cancelText:"No"},r.a.createElement("span",{className:"user-options-items"},"Eliminar"))),trigger:"click"},(l([23])||l([24]))&&(1===o.auth.role_id||o.auth.company_id===a.company_id)&&r.a.createElement(P.a,{shape:"circle",className:"enterprise-settings-button"},r.a.createElement(q.a,null))))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:18,lg:14},r.a.createElement(w.a,{prefix:r.a.createElement(M.a,{className:"tendero-table-search-icon"}),placeholder:"Buscar",style:{width:"70%",height:"40px"},size:"large",onChange:function(t){return a=t.target.value,void e.handlerTextSearch(a);var a}})),r.a.createElement(I.a,{xs:24,sm:24,md:6,lg:10,className:"product-header-elements-container"},l([22])&&(void 0===(null===(t=o.auth.company)||void 0===t?void 0:t.allow_add_products)||1===(null===(a=o.auth.company)||void 0===a?void 0:a.allow_add_products))&&r.a.createElement(P.a,{className:"title-tendero new-button product-margin-header-button",onClick:e.handlerShowDrawer},"Nuevo Producto"))),r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius margin-top-15"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{loading:e.loading,className:"CustomTableClass",dataSource:e.dataSource,columns:s,pagination:!1,rowKey:"key",expandable:{rowExpandable:function(e){return null!==e.productDescription},expandedRowRender:function(e){return r.a.createElement("div",{className:"text-left"},r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Paises donde aplica: ")," ",e.all_countries),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Marca a la que pertenece: ")," ",e.brand_name),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Categoria a la que pertenece: ")," ",e.product_category.name," "),r.a.createElement("b",null,"Departamento al que pertenece: ")," ",e.product_department.name," ",r.a.createElement("p",{style:{margin:0}}),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Subcategoria a la que pertenece: "),e.product_subcategory.name," "),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Excento de impuestos: ")," ",1===e.is_taxable?"Si":"No"),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Impacta inventario?: ")," ",1===e.is_inventoriable?"Si":"No"),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Expresion minima: ")," ",e.minimal_expresion),r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Precio sugerido: ")," ",e.suggested_price))},expandIcon:function(e){var t=e.expanded,a=e.onExpand,n=e.record;return t?r.a.createElement(B.a,{onClick:function(e){return a(n,e)}}):r.a.createElement(U.a,{onClick:function(e){return a(n,e)}})}}})))))))},wn={getCountries:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.countries_options,"?per_page=100"),{}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},kn={getBrands:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Brands_options,"?per_page=100"),{}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Cn={getProductsCategories:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.ProductCategory_options,"?per_page=100"),{}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getProductsSubCategories:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.ProductSubCategory_options,"?per_page=100"),{}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Pn=a(49),Tn=a.n(Pn),In=Ke.a.Option;function Dn(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title-space-field"},e.title),r.a.createElement(Ke.a,{getPopupContainer:function(e){return e.parentNode},showSearch:!0,optionFilterProp:"children",mode:"multiple",className:"single-select product-custom-select",placeholder:e.placeholder,size:"large",style:{width:"100%"},value:e.country,onChange:function(t){return e.handleChangeCountry(t)},onSearch:e.onSearchCountry},e.countries&&e.countries.map((function(e){return r.a.createElement(In,{key:e.id,value:e.id},e.name)}))))}var Fn=Dn;Dn.prototypes={value:Tn.a.number,placeholder:Tn.a.string,title:Tn.a.string,onChange:Tn.a.func,countries:Tn.a.array.isRequired};var An=Ke.a.Option;function Un(e){return r.a.createElement(r.a.Fragment,null,e.title&&r.a.createElement("div",{className:"title-space-field pl-2"},e.title),r.a.createElement(Ke.a,{getPopupContainer:function(e){return e.parentNode},showSearch:!0,optionFilterProp:"children",className:"single-select",placeholder:e.placeholder,size:"large",style:{width:"100%"},value:e.value,onChange:function(t){return e.handlerChange(t)},disabled:e.disabled,loading:e.loading},e.data&&e.data.map((function(e){return r.a.createElement(An,{key:e.id,value:e.id},e.name)}))))}var zn=Un;Un.prototypes={value:Tn.a.number,placeholder:Tn.a.string,title:Tn.a.string,onChange:Tn.a.func,data:Tn.a.array.isRequired};var Bn=oe.a.Title;var Rn=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)([]),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)([]),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)([]),k=Object(i.a)(S,2),C=k[0],D=k[1],F=Object(n.useState)([]),A=Object(i.a)(F,2),U=A[0],z=A[1],B=Object(n.useState)([]),R=Object(i.a)(B,2),M=R[0],L=R[1],q=Object(n.useState)([]),H=Object(i.a)(q,2),K=H[0],G=H[1],J=Object(n.useState)([]),Q=Object(i.a)(J,2),Z=Q[0],Y=Q[1],V=Object(n.useState)(0),W=Object(i.a)(V,2),$=W[0],X=W[1],ee=Object(n.useState)(!1),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!1),ce=Object(i.a)(re,2),oe=ce[0],ie=ce[1],le=Object(n.useState)(""),se=Object(i.a)(le,2),ue=se[0],de=se[1];Object(n.useEffect)((function(){e.visible?pe():me()}),[e.visible]);var me=function(){Y([]),j([]),z([]),L([]),d([]),X(0),ne(!1),ie(!1),de("")},pe=function(){wn.getCountries().then((function(e){o(e.data.data)})).catch((function(e){console.log(e)})),kn.getBrands().then((function(e){b(e.data.data)})).catch((function(e){console.log(e)})),Cn.getProductsCategories().then((function(e){x(e.data.data)})).catch((function(e){console.log(e)})),Cn.getProductsSubCategories().then((function(e){D(e.data.data)})).catch((function(e){console.log(e)})),Le.getUoms().then((function(e){G(e.data.data)})).catch((function(e){console.log(e)})),e.edit&&(de(e.editData.productDescription),d(e.editData.all_countries_id),j(e.editData.brand_id),L(e.editData.product_category_id),z(e.editData.product_subcategory_id),X(e.editData.suggested_price),Y(e.editData.uom_id),ne(1===e.editData.is_taxable),ie(1===e.editData.is_inventoriable))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800,loading:e.loading},r.a.createElement("div",null,r.a.createElement(Bn,null," ",e.edit?"Editar Producto":"Nuevo Producto"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:16,sm:16,md:16,lg:16},r.a.createElement("div",{className:"title-space-field"},"Descripcion"),r.a.createElement(w.a,{value:e.edit||""!==ue?ue:"",onChange:function(e){return de(e.target.value)},placeholder:"Descripcion del nuevo producto",size:"large"})),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement(Fn,{title:"Paises a los que aplica",countries:e.edit||c!==[]?c:[],country:e.edit||u!==[]?u:[],handleChangeCountry:function(e){return d(e)},placeholder:"Elegir Pais",onSearchCountry:function(e){Le.getCountryOption(e).then((function(e){o(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de Pais")}))}}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement(zn,{title:"Marca*",data:h,value:e.edit||""!==O?O:"",handlerChange:function(e){return j(e)},placeholder:"Elegir Marca"})),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement(zn,{title:"Categoria*",data:N,value:e.edit||""!==U?U:"",handlerChange:function(e){return z(e)},placeholder:"Elegir Categoria"})),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement(zn,{title:"Subcategorias*",data:C,value:e.edit||""!==M?M:"",handlerChange:function(e){return L(e)},placeholder:"Elegir Subcategoria"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement(zn,{title:"Unidad de medida*",data:K,value:e.edit||""!==Z?Z:"",handlerChange:function(e){return Y(e)},placeholder:"Elegir Unidad de Medida"})),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Precio sugerido*"),r.a.createElement(w.a,{value:e.edit||""!==$?$:"",onChange:function(e){return X(e.target.value)},placeholder:"Escribir un precio",size:"large",type:"number"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("span",{className:"label-bold-500 ratio-button-labels"},"\xbfImpacta inventario?")),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(Je.default.Group,{className:"radio-group",optionType:"button",buttonStyle:"solid",size:"large",value:oe,onChange:function(e){return ie(e.target.value)}},r.a.createElement(Je.default.Button,{value:!1},"No"),r.a.createElement(Je.default.Button,{value:!0},"Si")))),r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("span",{className:"label-bold-500 ratio-button-labels"},"\xbfExcento de impuestos?")),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(Je.default.Group,{className:"radio-group",optionType:"button",buttonStyle:"solid",size:"large",value:ae,onChange:function(e){return ne(e.target.value)}},r.a.createElement(Je.default.Button,{value:!1},"No"),r.a.createElement(Je.default.Button,{value:!0},"Si"))))),r.a.createElement("div",null,r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){me(),e.cancelButton()},loading:e.loading},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){var t={description:ue,is_all_countries:0,brand_id:O,product_category_id:U,product_subcategory_id:M,is_taxable:ae,is_inventoriable:oe,uom_id:Z,suggested_price:$,countries:u};if(Le.isEmpty(t)||u.length<=0)return f.a.error(" Todos los campos son Obligatorios"),!1;e.edit?e.editButton(t,e.editData._id):e.saveButton(t)},loading:e.loading},e.edit?"Actualizar":"Guardar"))))))))},Mn=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.products,"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ln=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Presentations,"/").concat(t,"/turns"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qn=function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se("".concat(W.a.stage.Presentations,"/").concat(t,"/turns"),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Hn=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.products,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Kn=function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.products,"/").concat(a),t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Gn={read:Mn,saveProduct:Hn,removeProduct:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.products,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateProduct:Kn,presentationTurn:Ln,savePresentationTurn:qn};var Jn=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(null),p=Object(i.a)(m,2),g=p[0],h=p[1],b=Object(n.useState)(!1),E=Object(i.a)(b,2),v=E[0],O=E[1],j=Object(n.useState)([]),y=Object(i.a)(j,2),_=y[0],N=y[1],x=Object(n.useState)([]),S=Object(i.a)(x,2),w=S[0],k=S[1];function C(){O(!0),Gn.read().then((function(e){N(P(e)),O(!1)})).catch((function(e){O(!1),console.log(e)}))}Object(n.useEffect)((function(){"1"===e.keyTab&&C()}),[e.keyTab]);var P=function(e){if("Too Many Attempts."!==e)return(e.data||[]).map((function(e,t){var a,n;return{key:t,_id:e.id,company_id:e.company_id,productDescription:e.description,product_category_id:e.product_category_id,product_subcategory_id:e.product_subcategory_id,product_department:e.product_category.product_department,suggested_price:e.suggested_price,uom_id:(null===e||void 0===e?void 0:e.uom_id)?e.uom_id:null,brand_id:(null===(a=e.brand)||void 0===a?void 0:a.id)?e.brand_id:null,brand_name:(null===(n=e.brand)||void 0===n?void 0:n.name)?e.brand.name:null,all_countries_id:e.countries.length>0?e.countries.map((function(e){return null!==e.id?e.id:null})):[],all_countries:e.countries.length>0?e.countries.map((function(e){return null!==e.name?e.name:""})).join(", "):0,minimal_expresion:e.minimal_expresion,is_inventoriable:e.is_inventoriable,is_taxable:e.is_taxable,product_category:e.product_category,product_subcategory:e.product_subcategory}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},T=function(){o(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn,{handlerShowDrawer:function(){o(!0),d(!1)},dataSource:w.length>0?w:_,handlerEditRow:function(e){h(e),o(!0),d(!0)},loading:v,handlerTextSearch:function(e){var t=_.filter((function(t){return t.productDescription.toLowerCase().indexOf(e.toLowerCase())>-1}));k(t)},handlerDeleteRow:function(e){O(!0),Gn.removeProduct(e._id).then((function(e){if(O(!1),e.message)return f.a.error(e.message);f.a.success("Producto Eliminando"),C()})).catch((function(e){f.a.error("Error"),O(!1)}))}}),r.a.createElement(Rn,{closable:T,visible:c,cancelButton:T,saveButton:function(e){Gn.saveProduct(e).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Object.keys(e.errors).map((function(t){return"description"===t?f.a.error(e.errors[t][0].replace("description","Descripcion")):f.a.error(e.errors[t])})):(f.a.success("Producto Guardado"),o(!1),C())})).catch((function(e){console.log(e),f.a.error("Error al guardar el producto"),O(!1)}))},editButton:function(e,t){Gn.updateProduct(e,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Object.keys(e.errors).map((function(t){return"description"===t?f.a.error(e.errors[t][0].replace("description","Descripcion")):f.a.error(e.errors[t])})):(f.a.success("Producto Actualizado"),o(!1),C())})).catch((function(e){O(!1),console.log(e)}))},edit:u,editData:g}))},Qn=oe.a.Title,Zn=Ke.a.Option;var Yn=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(!1),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(""),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)(""),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)(!0),k=Object(i.a)(S,2),C=k[0],D=k[1],F=Object(n.useState)([]),A=Object(i.a)(F,2),U=A[0],z=A[1];Object(n.useEffect)((function(){o(e.edit?e.editData.description:""),d(e.edit?e.editData.product_id:null),b(!!e.edit&&1===e.editData.is_grouping),j(e.edit?e.editData.units:""),x(e.edit?e.editData.price:""),e.visible&&B(e.edit?e.editData.product_name:"")}),[e.visible]);var B=function(e){e=null===e?"":e,Le.getProductsOption(e).then((function(e){z(e.data.data),D(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de fabricantes")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-tabs"},r.a.createElement(Qn,null," ",e.edit?"Editar presentacion":"Nueva Presentacion"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Descripcion"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Descripcion del nuevo producto",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Producto al que pertenece*"),r.a.createElement(Ke.a,{disabled:C,showSearch:!0,optionFilterProp:"children",className:"single-select",placeholder:"Seleccionar producto al que pertenece",size:"large",style:{width:"100%"},value:u,onChange:function(e){return d(e)},onSearch:B,getPopupContainer:function(e){return e.parentNode}},U&&U.map((function(e){return r.a.createElement(Zn,{key:e.id,value:e.id},e.description)}))))),r.a.createElement(T.a,{gutter:16,className:"section-space-list section-space-list-bottom"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("span",{className:"label-bold-500 presentation-ratio-button-labels"},"\xbfEs agrupacion de la expresion minima del producto?")),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(Je.default.Group,{className:"radio-group",optionType:"button",buttonStyle:"solid",size:"large",value:h,onChange:function(e){return b(e.target.value)}},r.a.createElement(Je.default.Button,{value:!1},"No"),r.a.createElement(Je.default.Button,{value:!0},"Si")))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:16,sm:16,md:16,lg:16},r.a.createElement("div",{className:"title-space-field"},"Numero de unidades de la expresion minima del producto"),r.a.createElement(w.a,{disabled:!h,value:h?O:1,onChange:function(e){return j(e.target.value)},placeholder:"Escribir numero de unidades de la expresion minima del producto",size:"large",type:"number"})),r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Precio sugerido"),r.a.createElement(w.a,{value:N,onChange:function(e){return x(e.target.value)},placeholder:"Escribe un precio",size:"large",type:"number"})))),r.a.createElement("div",null,r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){var t={product_id:u,description:c,price:N,is_grouping:h?1:0,units:h?O:1};return Le.isEmpty(t)?f.a.error("Todos los campos son Obligatorios"):h&&O<=1?f.a.error("El n\xfamero de unidades debe ser mayor a 1"):void e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar"))))))))},Vn={getPresentations:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Presentations,"?per_page=").concat(a,"&description=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newPresentations:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.Presentations,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editPresentations:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.Presentations,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removePresentations:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.Presentations,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Wn=oe.a.Title,$n=Ke.a.Option;var Xn=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(!0),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)(!0),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)(!1),k=Object(i.a)(S,2),D=k[0],A=k[1],U=Object(n.useState)(null),z=Object(i.a)(U,2),B=z[0],R=z[1],M=Object(n.useState)(""),L=Object(i.a)(M,2),q=L[0],K=L[1],G=Object(n.useState)([]),J=Object(i.a)(G,2),Q=J[0],Z=J[1],Y=Object(n.useState)([]),V=Object(i.a)(Y,2),W=V[0],$=V[1];Object(n.useEffect)((function(){e.visible&&(X(e.data),ee(""),te(""))}),[e.visible]);var X=function(e){j(!0),Gn.presentationTurn(e.id).then((function(e){d(e.description),K(e.company.name),b(e.price),o(re(e.prices)),j(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de tiendas")}))},ee=function(e){Le.getStoreOption(e).then((function(e){Z(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de tiendas")}))},te=function(e){Le.getTurns(e).then((function(e){$(e.data.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de tiendas")}))},ae=function(e,t,a,n){var r=Object(wt.a)(c);switch(n){case"price":r[t].price=e;break;case"shop":x(!0),r[t].store_id=e,Le.getTurnsById("",e).then((function(e){$(e.data.data),x(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de turnos")}));break;case"schedule":r[t].turns=e}o(r)},ne=[{title:"Precio",dataIndex:"price",key:"price",render:function(e,t,a){return r.a.createElement(w.a,{disabled:D,value:t.price,size:"large",placeholder:"Ingresa precio",onChange:function(e){return ae(e.target.value,a,t._id,"price")}})}},{title:"Tienda a la que aplica",dataIndex:"shop",key:"shop",render:function(e,t,a){return r.a.createElement(Ke.a,{disabled:D,className:"single-select",placeholder:"Selecciona una tienda",size:"large",style:{width:"100%"},value:t.store_id,getPopupContainer:function(e){return e.parentNode},onChange:function(e){ae(e,a,t.store_id,"shop"),ae("",a,t.turns,"schedule")}},Q&&Q.map((function(e){return r.a.createElement($n,{key:e.id,value:e.id},e.name)})))}},{title:"Horarios al que aplica",dataIndex:"schedule",key:"schedule",render:function(e,t,a){return r.a.createElement(Ke.a,{disabled:N||D||!t.store_id,mode:"multiple",className:"single-select product-custom-select",placeholder:"Selecciona un horario",size:"large",style:{width:"100%"},value:t.turns?t.turns:[],onChange:function(e){return ae(e,a,t.turns,"schedule")}},W&&W.map((function(e){return r.a.createElement($n,{key:e.id,value:e.id},e.start_time," - ",e.end_time)})))}},{title:"",dataIndex:"_id",render:function(e,t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{disabled:D,title:"Seguro de eliminar?",onConfirm:function(){return function(e){o(c.filter((function(t,a){return a!==e})))}(a)}},r.a.createElement("span",{style:{color:"red"}},"Eliminar")))}}],re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"received";return"save"===t?e.map((function(e){return{price:e.price,turns:e.turns.map((function(e){return{id:e}}))}})):e.map((function(e){return{price:e.price,store_id:e.store_id,turns:e.turns.map((function(e){return e.id}))}}))},ce=function(){R(null),A(!1),e.closable()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,className:"assign-prices",onClose:ce,visible:e.visible,width:800},r.a.createElement(Pt.a,{spinning:O},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(Wn,null,"Asignar precios"),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Presentaci\xf3n"),r.a.createElement(w.a,{value:u,disabled:!0,placeholder:"Nombre de presentaci\xf3n",size:"large"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Cat\xe1logo"),r.a.createElement(w.a,{value:q,disabled:!0,placeholder:"Nombre de cat\xe1logo",size:"large"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field"},"Precio sugerido actual"),r.a.createElement(w.a,{value:h,disabled:!0,placeholder:"Precio",size:"large"}))),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{offset:11,xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field"},"Precio global"))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{className:"checkbox",xs:2,sm:2,md:2,lg:2},r.a.createElement(dt.a,{checked:D,onChange:function(e){return A(e.target.checked)}})),r.a.createElement(I.a,{xs:9,sm:9,md:9,lg:9},r.a.createElement("div",{className:"title-space-field bold black"},"\xbfAplicar un precio a todas las tiendas y turnos?"),r.a.createElement("div",{className:"title-space-field bottom"},"Bloquear\xe1 toda excepci\xf3n creada abajo")),r.a.createElement(I.a,{className:"checkbox",xs:6,sm:6,md:6,lg:6},r.a.createElement(w.a,{disabled:!D,value:B,onChange:function(e){return R(e.target.value)},placeholder:"Precio",size:"large"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field top-padding"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field bold black"},"Excepciones")),r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field bottom"},"Si deseas asignar un precio especial a una tienda o turno en espec\xedfico, agr\xe9galo en la siguiente secci\xf3n"))),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{disabled:D,className:"CustomTableClass",pagination:!1,columns:ne,dataSource:c.map((function(e,t){return Object(H.a)(Object(H.a)({},e),{},{index:t})})),rowKey:"index"})),r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(P.a,{disabled:D,type:"dashed",className:"shop-add-turn",onClick:function(){o(c.concat([{price:null,store_id:null,turns:[]}]))}},"+ Agregar tienda")))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return ce()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){var t;if(D){if(!Number(B)||B.includes("-")||B.includes("+"))return f.a.warning("El campo Precio global debe ser un n\xfamero"),!1;t={apply_for_all:1,global_price:B,prices:[]}}else{var a=!1;if(c.map((function(e){return[e.price,e.store_id,e.turns].includes(null)||[e.price,e.store_id,e.turns].includes(void 0)||[e.price,e.store_id,e.turns].includes("")||0===e.turns.length?a=!0:(!Number(e.price)||e.price.includes("-")||e.price.includes("+"))&&f.a.warning("El campo Precio en la tabla de turnos debe ser un n\xfamero"),!0})),0===c.length||a)return f.a.warning("Debes completar la informacion de turnos.");console.log(c),t={apply_for_all:0,global_price:0,prices:re(c,"save")}}Gn.savePresentationTurn(e.data.id,t).then((function(e){e.errors&&Object.keys(e.errors).length>0?Object.keys(e.errors).map((function(t){return f.a.error(e.errors[t])})):(f.a.success("Informacion guardada."),ce())})).catch((function(e){console.log(e),f.a.error("Error al guardar la informacion.")}))}()}},"Guardar"))))))))};var er=function(e){var t,a=Object(n.useContext)(ae),c=Object(i.a)(a,1)[0].auth,o=Object(n.useState)([]),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(null),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(""),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)({}),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!0),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1],I=Object(n.useState)(!1),D=Object(i.a)(I,2),F=D[0],A=D[1],U=Object(n.useState)(!1),z=Object(i.a)(U,2),B=z[0],R=z[1],M=Object(n.useState)(!1),L=Object(i.a)(M,2),q=L[0],H=L[1];Object(n.useEffect)((function(){"2"===e.keyTab&&G()}),[e.keyTab]);var K=[{title:"Descripci\xf3n",dataIndex:"description",key:"description",render:function(e){return r.a.createElement("span",null,e)}},{title:"Producto al que pertenece",dataIndex:"product_name",key:"product_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Es agrupacion de la expresion minima del producto?",dataIndex:"is_grouping",key:"is_grouping",render:function(e){return r.a.createElement("span",null,1===e?"S\xed":"No")}},{title:"Numero de unidades de la expresion minima del producto",dataIndex:"units",key:"units",render:function(e){return r.a.createElement("span",null,e)}},{title:"Precio sugerido",dataIndex:"price",key:"price",render:function(e){return r.a.createElement("span",null,e)}}],G=function(){T(!1),A(!1),w(!0),Vn.getPresentations("",5).then((function(e){u(J(e)),v(e.data.next_page_url),H(null!==e.data.next_page_url),w(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},J=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,id:e.id,company_id:e.company_id,description:e.description,product_id:null!==e.product&&void 0!==e.product.id?e.product_id:null,product_name:null!==e.product?e.product.description:null,price:e.price,is_grouping:e.is_grouping,units:e.units}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},Q=function(){T(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:K,dataSource:s,handlerTextSearch:function(e){w(!0),Vn.getPresentations(e,5).then((function(e){u(J(e)),v(e.data.next_page_url),H(null!==e.data.next_page_url),w(!1)}))},handlerEditRow:function(e){g(e),R(!0),T(!0)},handlerDeleteRow:function(e){w(!0),T(!1),A(!1),Vn.removePresentations(e.id).then((function(e){f.a.success("".concat(e.description," se ha elminado.")),G()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){T(!0),R(!1)},loading:S,create:null===(t=c.company)||void 0===t?void 0:t.allow_add_products,createPermissions:22,editPermissions:23,deletePermissions:24,companyPermissions:!0,assign:!0,handlerAssignRow:function(e){A(!0),_(e)}}),r.a.createElement(Ve,{handlerButton:function(){q&&(w(!0),Le.getNextPage(E).then((function(e){u(s.concat(J(e))),v(e.data.next_page_url),H(null!==e.data.next_page_url),w(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:q}),r.a.createElement(Yn,{closable:Q,visible:P,edit:B,editData:p,cancelButton:Q,saveButton:function(e,t,a){switch(T(!1),A(!1),w(!0),e){case!0:Vn.editPresentations(a,t).then((function(e){if("object"!==typeof e&&"The given data was invalid."===e)return f.a.info("No se ha podido actualizar la unidad de medida.");f.a.success("Informacion actualizada."),G()})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:Vn.newPresentations(t).then((function(e){if("object"!==typeof e&&"The given data was invalid."===e)return f.a.info("No se ha podido crear la unidad de medida.");f.a.success("Informacion creada."),G()})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}),r.a.createElement(Xn,{closable:function(){return A(!1)},visible:F,cancelButton:Q,data:y}))},tr=oe.a.Title,ar=Ke.a.Option;var nr=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(!1),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)(!0),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)([]),k=Object(i.a)(S,2),C=k[0],D=k[1];Object(n.useEffect)((function(){o(e.edit?e.editData.description:""),d(e.edit?e.editData.presentation_id:null),b(e.edit?e.editData.code:""),j(!!e.edit&&1===e.editData.seasonal_product),e.visible&&F(e.edit?e.editData.presentation_name:"")}),[e.visible]);var F=function(e){e=null===e?"":e,Le.getPresentationsOption(e).then((function(e){D(e.data.data),x(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de fabricantes")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",{className:"products-container-tabs"},r.a.createElement(tr,null," ",e.edit?"Editar SKU":"Nuevo SKU"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Descripcion"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Descripcion de SKU",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"SKU*"),r.a.createElement(w.a,{value:h,onChange:function(e){return b(e.target.value)},placeholder:"Escribir SKU",size:"large"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-list section-space-list-bottom"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Producto al que pertenece"),r.a.createElement(Ke.a,{disabled:N,showSearch:!0,optionFilterProp:"children",className:"single-select",placeholder:"Seleccionar producto al que pertenece",size:"large",style:{width:"100%"},value:u,onChange:function(e){return d(e)},onSearch:F,getPopupContainer:function(e){return e.parentNode}},C&&C.map((function(e){return r.a.createElement(ar,{key:e.id,value:e.id},e.description)})))),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(T.a,{gutter:16,className:"sku-label-season-element"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12,className:"text-right"},r.a.createElement("span",{className:"label-bold-500 presentation-ratio-button-labels"},"\xbfEs de temporada?")),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(Je.default.Group,{className:"radio-group",optionType:"button",buttonStyle:"solid",size:"large",value:O,onChange:function(e){return j(e.target.value)}},r.a.createElement(Je.default.Button,{value:!1},"No"),r.a.createElement(Je.default.Button,{value:!0},"Si"))))))),r.a.createElement("div",null,r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){var t={code:h,description:c,presentation_id:u,seasonal_product:O};if(Le.isEmpty(t))return f.a.error(" Todos los campos son Obligatorios");e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar"))))))))},rr={getSkus:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Skus,"?per_page=").concat(a,"&description=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newSkus:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.Skus,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editSkus:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.Skus,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeSkus:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.Skus,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var cr=function(e){var t,a=Object(n.useContext)(ae),c=Object(i.a)(a,1)[0].auth,o=Object(n.useState)([]),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(null),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(""),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!0),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),P=C[0],T=C[1],I=Object(n.useState)(!1),D=Object(i.a)(I,2),F=D[0],A=D[1];Object(n.useEffect)((function(){"3"===e.keyTab&&z()}),[e.keyTab]);var U=[{title:"Descripcion",dataIndex:"description",key:"description",render:function(e){return r.a.createElement("span",null,e)}},{title:"SKU",dataIndex:"code",key:"code",render:function(e){return r.a.createElement("span",null,e)}},{title:"Presentaci\xf3n a la que pertence",dataIndex:"presentation_name",key:"presentation_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Es de temporada?",dataIndex:"seasonal_product",key:"seasonal_product",render:function(e){return r.a.createElement("span",null,1===e?"S\xed":"No")}}],z=function(){w(!1),_(!0),rr.getSkus("",5).then((function(e){u(B(e)),v(e.data.next_page_url),A(null!==e.data.next_page_url),_(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},B=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,id:e.id,company_id:e.company_id,presentation_id:e.presentation_id,product_id:R(e.presentation,"product")?e.presentation.product_id:null,product_name:R(e.presentation,"product")?e.presentation.product.description:null,description:e.description,code:e.code,presentation_name:R(e.presentation,"description")?e.presentation.description:null,seasonal_product:e.seasonal_product}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},R=function(e,t){return null!==e&&"undefined"!==typeof e[t]},M=function(){w(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{columns:U,dataSource:s,handlerTextSearch:function(e){_(!0),rr.getSkus(e,5).then((function(e){u(B(e)),v(e.data.next_page_url),A(null!==e.data.next_page_url),_(!1)}))},handlerEditRow:function(e){g(e),T(!0),w(!0)},handlerDeleteRow:function(e){_(!0),w(!1),rr.removeSkus(e.id).then((function(e){f.a.success("".concat(e.description," se ha elminado.")),z()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){w(!0),T(!1)},loading:y,create:null===(t=c.company)||void 0===t?void 0:t.allow_add_products,createPermissions:22,editPermissions:23,deletePermissions:24,companyPermissions:!0}),r.a.createElement(Ve,{handlerButton:function(){F&&(_(!0),Le.getNextPage(E).then((function(e){u(s.concat(B(e))),v(e.data.next_page_url),A(null!==e.data.next_page_url),_(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:F}),r.a.createElement(nr,{closable:M,visible:S,edit:P,editData:p,cancelButton:M,saveButton:function(e,t,a){switch(e){case!0:rr.editSkus(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Object.keys(e.errors).map((function(t){return"code"===t?f.a.error(e.errors[t][0].replace("code","SKU")):f.a.error(e.errors[t])})):(f.a.success("Informacion actualizada."),w(!1),z())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:rr.newSkus(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Object.keys(e.errors).map((function(t){return"code"===t?f.a.error(e.errors[t][0].replace("code","SKU")):f.a.error(e.errors[t])})):(f.a.success("Informacion creada."),w(!1),z())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},or=w.a.Search;var ir=function(e){var t,a,c=Object(n.useContext)(ae),o=Object(i.a)(c,1)[0],l=te(o).hasPermissions,s=[{title:"Lista de combos",dataIndex:"description",key:"description",align:"left",render:function(e){return r.a.createElement("span",null,e)}},{align:"right",title:"",dataIndex:"id",key:"id",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(k.a,{placement:"left",content:r.a.createElement("div",null,l([23])&&r.a.createElement("span",{className:"user-options-items",onClick:function(){return u(t)}},"Editar"),l([23])&&l([24])&&r.a.createElement(g.a,{className:"divider-enterprise-margins",type:"horizontal"}),l([24])&&r.a.createElement(C.a,{title:"Estas seguro de borrar el elemento selccionado?",onConfirm:function(){return d(t)},okText:"Si",cancelText:"No"},r.a.createElement("span",{className:"user-options-items"},"Eliminar"))),trigger:"click"},(l([23])||l([24]))&&(1===o.auth.role_id||o.auth.company_id===t.company_id)&&r.a.createElement(P.a,{shape:"circle",className:"enterprise-settings-button"},r.a.createElement(q.a,null))))}}],u=function(t){e.handlerEditRow(t)},d=function(t){e.handlerDeleteRow(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:18,lg:14},r.a.createElement(or,{className:"customSearch",prefix:r.a.createElement(M.a,{className:"tendero-table-search-icon"}),placeholder:"Presiona enter para buscar",style:{width:"70%",height:"40px"},size:"large",onSearch:function(t){return a=t,void e.handlerTextSearch(a);var a}})),r.a.createElement(I.a,{xs:24,sm:24,md:6,lg:10,className:"product-header-elements-container"},l([22])&&(void 0===(null===(t=o.auth.company)||void 0===t?void 0:t.allow_add_products)||1===(null===(a=o.auth.company)||void 0===a?void 0:a.allow_add_products))&&r.a.createElement(P.a,{className:"title-tendero new-button product-margin-header-button",onClick:e.handlerShowDrawer},"Nuevo Combo"))),r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius margin-top-15"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{loading:e.loading,className:"CustomTableClass",dataSource:e.dataSource,columns:s,pagination:!1,rowKey:"id",expandable:{expandedRowRender:function(e){var t,a;return r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"text-left"},r.a.createElement("p",{style:{margin:0}},r.a.createElement("b",null,"Presentaciones que incluye:")),null===(t=e.presentations)||void 0===t?void 0:t.map((function(e,t){return r.a.createElement("p",{key:t,style:{margin:0}}," ",e.description," ")})))),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"text-left"},r.a.createElement("p",null,r.a.createElement("b",null,"Precio sugerido,tienda y turno al que aplica:")),null===(a=e.presentation_combos_stores_turns)||void 0===a?void 0:a.map((function(e,t){return r.a.createElement("p",{key:t},e.suggested_price," | ",e.store.name," | ",e.turn.start_time,"hrs - ",e.turn.end_time,"hrs")})))))},expandIcon:function(e){var t=e.expanded,a=e.onExpand,n=e.record;return t?r.a.createElement(B.a,{onClick:function(e){return a(n,e)}}):r.a.createElement(U.a,{onClick:function(e){return a(n,e)}})}}})))))))},lr=oe.a.Title,sr=Ke.a.Option;var ur=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(""),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)(!0),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)(!0),k=Object(i.a)(S,2),D=k[0],A=k[1],U=Object(n.useState)(""),z=Object(i.a)(U,2),B=z[0],R=z[1],M=Object(n.useState)([]),L=Object(i.a)(M,2),q=L[0],K=L[1],G=Object(n.useState)([]),J=Object(i.a)(G,2),Q=J[0],Z=J[1];Object(n.useEffect)((function(){var t,a;e.visible&&(Y(""),V(""),W(""),d(e.edit?e.editData.description:""),b(e.edit&&(null===(t=e.editData)||void 0===t?void 0:t.presentations)?e.editData.presentations.map((function(e){return(null===e||void 0===e?void 0:e.id)?e.id:null})):[]),j(e.edit?e.editData.suggested_price:""),o(e.edit&&(null===e||void 0===e?void 0:e.editData)&&(null===(a=e.editData)||void 0===a?void 0:a.presentation_combos_stores_turns)?e.editData.presentation_combos_stores_turns.map((function(e){var t,a;return{suggested_price:e.suggested_price,store_id:(null===e||void 0===e?void 0:e.store)&&(null===(t=e.store)||void 0===t?void 0:t.id)?e.store.id:null,turns:[(null===e||void 0===e?void 0:e.turn)&&(null===(a=e.turn)||void 0===a?void 0:a.id)?e.turn.id:""]}})):[]))}),[e.visible]);var Y=function(e){Le.getPresentationsOption(e).then((function(e){R(e.data.data),x(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de presentaciones")}))},V=function(e){Le.getStoreOption(e).then((function(e){K(e.data.data),x(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de tiendas")}))},W=function(e){Le.getTurns(e).then((function(e){Z(e.data.data),x(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de tiendas")}))},$=function(e,t,a,n){var r=Object(wt.a)(c);switch(n){case"price":r[t].suggested_price=e;break;case"shop":A(!0),r[t].store_id=e,Le.getTurnsById("",e).then((function(e){Z(e.data.data),A(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion de turnos")}));break;case"schedule":r[t].turns=e}o(r)},X=[{title:"Precio sugerido",dataIndex:"price",key:"price",render:function(e,t,a){return r.a.createElement(w.a,{value:t.suggested_price,size:"large",placeholder:"Ingresa precio",onChange:function(e){return $(e.target.value,a,t._id,"price")}})}},{title:"Tienda a la que aplica",dataIndex:"shop",key:"shop",render:function(e,t,a){return r.a.createElement(Ke.a,{className:"single-select",placeholder:"Selecciona una tienda",size:"large",style:{width:"100%"},value:t.store_id,getPopupContainer:function(e){return e.parentNode},onChange:function(e){$(e,a,t.store_id,"shop"),$("",a,t.turns,"schedule")}},q&&q.map((function(e){return r.a.createElement(sr,{key:e.id,value:e.id},e.name)})))}},{title:"Horarios al que aplica",dataIndex:"schedule",key:"schedule",render:function(e,t,a){return r.a.createElement(Ke.a,{disabled:D||!t.store_id,mode:"multiple",className:"single-select product-custom-select",placeholder:"Selecciona un horario",size:"large",style:{width:"100%"},value:t.turns?t.turns:[],onChange:function(e){return $(e,a,t.turns,"schedule")}},Q&&Q.map((function(e){return r.a.createElement(sr,{key:e.id,value:e.id},e.start_time," - ",e.end_time)})))}},{title:"",dataIndex:"_id",render:function(e,t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{title:"Seguro de eliminar?",onConfirm:function(){return function(e){o(c.filter((function(t,a){return a!==e})))}(a)}},r.a.createElement("span",{style:{color:"red"}},"Eliminar")))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement(Pt.a,{spinning:N},r.a.createElement("div",{className:"products-container-combo-tabs"},r.a.createElement(lr,null," ",e.edit?"Editar Combo":"Nuevo Combo"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Descripcion"),r.a.createElement(w.a,{value:u,onChange:function(e){return d(e.target.value)},placeholder:"Descripcion del combo",size:"large"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field"},"Presentaciones que incluye*"),r.a.createElement(Ke.a,{showSearch:!0,disabled:N,optionFilterProp:"children",mode:"multiple",className:"single-select product-custom-select",placeholder:"Seleccionar presentaciones",size:"large",style:{width:"100%"},value:h,onChange:function(e){return b(e)},onSearch:Y},B&&B.map((function(e){return r.a.createElement(sr,{key:e.id,value:e.id},e.description)}))))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:8,sm:8,md:8,lg:8},r.a.createElement("div",{className:"title-space-field"},"Precio sugerido*"),r.a.createElement(w.a,{value:O,onChange:function(e){return j(e.target.value)},placeholder:"Escribir un precio",size:"large"}))),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{className:"CustomTableClass",pagination:!1,columns:X,dataSource:c.map((function(e,t){return Object(H.a)(Object(H.a)({},e),{},{index:t})})),rowKey:"index"})),r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(P.a,{type:"dashed",className:"shop-add-turn",onClick:function(){o(c.concat([{price:null,shop:null,schedule:[]}]))}},"+ Agregar tienda")))),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return e.cancelButton()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){var t={description:u,suggested_price:O,presentations:h,prices:c};if(Le.isEmptyCombos(t))return f.a.error("Todos los campos son Obligatorios"),!1;(!Number(O)||O.includes("-")||O.includes("+"))&&f.a.warning("El campo Precio sugerido debe ser un n\xfamero");var a=!1;if(c.map((function(e){return[e.suggested_price,e.store_id,e.turns].includes(null)||[e.suggested_price,e.store_id,e.turns].includes(void 0)||[e.suggested_price,e.store_id,e.turns].includes("")||0===e.turns.length?a=!0:(!Number(e.suggested_price)||e.suggested_price.includes("-")||e.suggested_price.includes("+"))&&f.a.warning("El campo Precio sugerido en la tabla de turnos debe ser un n\xfamero"),!0})),a)return f.a.warning("Debes completar la informacion de turnos.");e.saveButton(e.edit,t,e.edit?e.editData.id:null)}()}},"Guardar"))))))))},dr={getCombos:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Combos,"?per_page=").concat(a,"&description=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),newCombos:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.Combos,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editCombos:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.Combos,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeCombos:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.Combos,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var mr=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),g=p[0],h=p[1],b=Object(n.useState)(!0),E=Object(i.a)(b,2),v=E[0],O=E[1],j=Object(n.useState)(!1),y=Object(i.a)(j,2),_=y[0],N=y[1],x=Object(n.useState)(!1),S=Object(i.a)(x,2),w=S[0],k=S[1],C=Object(n.useState)(!1),P=Object(i.a)(C,2),T=P[0],I=P[1];Object(n.useEffect)((function(){"4"===e.keyTab&&D()}),[e.keyTab]);var D=function(){N(!1),O(!0),dr.getCombos("",5).then((function(e){o(A(e)),h(e.data.next_page_url),I(null!==e.data.next_page_url),O(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")}))},F=function(){N(!1)},A=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){var a;return{key:t,id:e.id,company_id:e.company_id,description:e.description,suggested_price:e.suggested_price,presentations_ids:null===(a=e.presentations)||void 0===a?void 0:a.map((function(e){return e.id})),presentations:e.presentations,presentation_combos_stores_turns:e.presentation_combos_stores_turns}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ir,{dataSource:c,loading:v,handlerTextSearch:function(e){O(!0),dr.getCombos(e,5).then((function(e){o(A(e)),h(e.data.next_page_url),I(null!==e.data.next_page_url),O(!1)}))},handlerEditRow:function(e){d(e),k(!0),N(!0)},handlerDeleteRow:function(e){O(!0),dr.removeCombos(e.id).then((function(e){f.a.success("".concat(e.description," se ha elminado.")),D()})).catch((function(e){console.log(e),f.a.error("Error al eliminar elemento.")}))},handlerShowDrawer:function(){N(!0),k(!1)}}),r.a.createElement(Ve,{handlerButton:function(){T&&(O(!0),Le.getNextPage(g).then((function(e){o(c.concat(A(e))),h(e.data.next_page_url),I(null!==e.data.next_page_url),O(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion")})))},moreInfo:T}),r.a.createElement(ur,{closable:F,visible:_,edit:w,editData:u,cancelButton:F,saveButton:function(e,t,a){switch(e){case!0:dr.editCombos(a,t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Object.keys(e.errors).map((function(t){return"description"===t?f.a.error(e.errors[t][0].replace("description","Descripcion")):f.a.error(e.errors[t])})):(f.a.success("Informacion actualizada."),D())})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informacion.")}));break;case!1:dr.newCombos(t).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?Object.keys(e.errors).map((function(t){return"description"===t?f.a.error(e.errors[t][0].replace("description","Descripcion")):f.a.error(e.errors[t])})):(f.a.success("Informacion creada."),D())})).catch((function(e){console.log(e),f.a.error("Error al crear la informacion.")}))}}}))},pr=kt.a.TabPane;var fr=function(){var e=Object(n.useState)("1"),t=Object(i.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(kt.a,{id:"tenderoShopTabs",defaultActiveKey:"1",onTabClick:function(e){c(e)}},r.a.createElement(pr,{tab:"Productos",key:"1"},r.a.createElement(Jn,{keyTab:a})),r.a.createElement(pr,{tab:"Presentaciones",key:"2"},r.a.createElement(er,{keyTab:a})),r.a.createElement(pr,{tab:"SKUs",key:"3"},r.a.createElement(cr,{keyTab:a})),r.a.createElement(pr,{tab:"Combos",key:"4"},r.a.createElement(mr,{keyTab:a}))))};var gr=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(He,{title:"Productos"}),r.a.createElement(fr,null))},hr=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.stores_options,"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),br=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.paymentMethod_options,"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Er=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Providers_options,"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),vr=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Or=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.transfers,"?store_id=").concat(t,"&per_page=5"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jr=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se("".concat(W.a.stage.transfers),t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yr=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.products_options,"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_r=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Presentations_options,"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Nr=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.counts,"?store_id=").concat(t,"&per_page=5"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xr=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.purchases,"?store_id=").concat(t,"&per_page=5"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sr=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.purchases,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wr=function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(n.length>1&&void 0!==n[1])||n[1],e.abrupt("return",le("".concat(W.a.stage.inventory,"?store_id=").concat(t,"&").concat(a?"per_page=5":"paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kr={getAdjustments:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.adjustments,"?store_id=").concat(t,"&per_page=5"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllPaymentMethods:br,getAllProducts:yr,getAllPresentations:_r,getAllProviders:Er,getAllStores:hr,getCounts:Nr,getAllPurchases:xr,getPurchase:Sr,getInventory:wr,getNextPage:vr,getTransfers:Or,storeTransfer:jr,savePurchase:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.purchases,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editPurchase:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.purchases,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearFoAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),saveAdjustment:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.adjustments,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveCounts:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se(W.a.stage.counts,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),read:function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.inventory,"?store_id=").concat(a,"&per_page=5&name=").concat(t,"%"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),searchPresentations:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Presentations_options,"?presentation_description=").concat(t,"%&sku_code=").concat(t,"%&paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var Cr=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),g=p[0],h=p[1],b=Object(n.useState)(!1),E=Object(i.a)(b,2),v=E[0],O=E[1];Object(n.useEffect)((function(){j()}),[e.selectedOption]),Object(n.useEffect)((function(){"1"===e.keyTab&&j()}),[e.keyTab]);var j=function(){o(!0),kr.getInventory(e.selectedOption).then((function(e){d(_(e)),O(null!==e.data.next_page_url),h(e.data.next_page_url),o(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar el inventario."),o(!1)}))},y=[{title:"Producto",dataIndex:"product",key:"product",render:function(e){return r.a.createElement("span",{style:{textAlign:"left"}},e||"Sin nombre")}},{title:"Cantidad",dataIndex:"quantity",key:"quantity",render:function(e){return r.a.createElement("span",null,e||"Sin cantidad")}},{title:"\xdaltima salida",dataIndex:"last_output",key:"last_output",render:function(e){return r.a.createElement("span",null,e||"Sin salida")}},{title:"\xdaltima entrada",dataIndex:"last_input",key:"last_input",render:function(e){return r.a.createElement("span",null,e||"Sin entrada")}},{title:"\xdaltima conteo",dataIndex:"last_count",key:"last_count",render:function(e){return r.a.createElement("span",null,e||"Sin conteo")}}],_=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,product_id:e.product_id,product:e.product_description,quantity:e.quantity,last_output:Le.formatDate(e.last_output),last_input:Le.formatDate(e.last_input),last_count:Le.formatDate(e.last_count)}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{className:"CustomTableClass",dataSource:u,columns:y,pagination:!1,loading:c,rowKey:"key"}),r.a.createElement(Ve,{handlerButton:function(){O(!1),v&&(o(!0),kr.getNextPage(g).then((function(e){d(u.concat(_(e))),O(null!==e.data.next_page_url),h(e.data.next_page_url),o(!1)})))},moreInfo:v})))))))},Pr=Ke.a.Option;function Tr(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0],c=te(a).hasPermissions;return r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:7,sm:7,md:7,lg:7},r.a.createElement(Ke.a,{value:e.selectedOption,className:"single-select",placeholder:"Selecciona una tienda",size:"large",style:{width:"100%"},onChange:function(t){e.setSelectedOption(t)}},e.shopsList.map((function(e,t){return r.a.createElement(Pr,{key:e.id,value:e.id},e.name)})))),r.a.createElement(I.a,{xs:11,sm:11,md:11,lg:11},null!==e.selectedOption&&r.a.createElement(w.a,{prefix:r.a.createElement(M.a,{className:"tendero-table-search-icon"}),placeholder:"Buscar",className:"tendero-table-search custom-search",size:"large",onChange:function(t){e.onSearch(t)}})),r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6,className:"text-right"},null!==e.selectedOption&&e.buttonLabel&&e.buttonHandler&&c([e.createPermissions])&&r.a.createElement(P.a,{className:"title-tendero new-button",onClick:e.buttonHandler},e.buttonLabel)))}var Ir=Tr;Tr.defaultProps={selectedOption:null,buttonLabel:null,shopsList:[]};var Dr=function(e){var t=e.keyTab,a=e.fetchData,n=e.loading,c=e.onEdit,o=e.selectedOption,i=e.component;return r.a.createElement(T.a,{gutter:16,className:"section-space-field"},o?r.a.createElement(I.a,{span:24,className:"margin-top-15"},r.a.createElement(i,{keyTab:t,fetchData:a,loading:n,onEdit:c,selectedOption:o})):r.a.createElement(I.a,{span:24,className:"empty-section-container"},r.a.createElement("div",{className:"empty-section"},r.a.createElement("span",{className:"empty-section-message"},"Por favor selecciona una tienda"))))};function Fr(e){return r.a.createElement("div",null,r.a.createElement(Ir,{shopsList:e.shopsList,selectedOption:e.selectedOption,setSelectedOption:function(t){e.setSelectedOption(t)},onSearch:function(e){}}),r.a.createElement(Dr,{keyTab:e.keyTab,component:Cr,selectedOption:e.selectedOption}))}var Ar=Fr;Fr.defaultProps={edit:{},shopsList:[]};var Ur=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0],c=te(a).hasPermissions,o=Object(n.useState)(!1),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)([]),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)([]),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],w=x[1];Object(n.useEffect)((function(){e.fetchData&&C()}),[e.selectedOption,e.fetchData]),Object(n.useEffect)((function(){u(e.loading)}),[e.loading]);var C=function(){u(!0),kr.getAllPurchases(e.selectedOption).then((function(e){_(U(e)),w(null!==e.data.next_page_url),g(e.data.next_page_url),u(!1)})).catch((function(e){console.log(e),f.a.error("No se han podido cargar las compras."),u(!1)}))},A=[{title:"Tienda",dataIndex:"store",render:function(e){return r.a.createElement("span",{style:{textAlign:"left"}},e)}},{title:"Usuario",dataIndex:"user",render:function(e){return r.a.createElement("span",null,e)}},{title:"Fecha",dataIndex:"date",render:function(e){return r.a.createElement("span",null,e)}},{title:"Tipo de ingreso",dataIndex:"comments",render:function(e){return r.a.createElement("span",null,"Compra")}},{title:"No. Factura",dataIndex:"invoice",render:function(e){return r.a.createElement("span",null,e)}},{title:"Proveedor",dataIndex:"provider",render:function(e){return r.a.createElement("span",null,e)}},{align:"right",title:"",dataIndex:"key",render:function(t,a){return c([27])&&r.a.createElement("span",null,r.a.createElement(k.a,{placement:"left",content:r.a.createElement("div",null,r.a.createElement("span",{className:"user-options-items",onClick:function(){return e.onEdit(E[t].id)}},"Editar")),trigger:"click"},r.a.createElement(P.a,{shape:"circle",className:"enterprise-settings-button"},r.a.createElement(q.a,null))))}}],U=function(e){if("Too Many Attempts."!==e){var t=e.data.data||[];return v(t),t.map((function(e,t){return{key:t,store:e.store.name,user:e.user.name,date:Le.formatDate(e.date),comments:e.comments,invoice:e.invoice,provider:e.provider.name}}))}f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{className:"CustomTableClass",dataSource:y,columns:A,pagination:!1,loading:s,rowKey:function(e,t){return t}}),r.a.createElement(Ve,{handlerButton:function(){S&&(w(!1),u(!0),kr.getNextPage(p).then((function(e){_(y.concat(U(e))),w(null!==e.data.next_page_url),g(e.data.next_page_url),u(!1)})))},moreInfo:S})))))))},zr=a(2226),Br=a(136),Rr=a.n(Br),Mr=Ke.a.Option,Lr={productCol:12,unitsCol:4,priceCol:4,newQuantityColHide:!0,remainingColHide:!0},qr=function(e,t){switch(t.type){case"ENTRY":return{productCol:8,unitsCol:4,priceCol:4,totalCol:4,newQuantityColHide:!0,remainingColHide:!0};case"COUNT":return{productCol:15,unitsCol:5,priceColHide:!0,totalColHide:!0,newQuantityColHide:!0,remainingColHide:!0};case"ADJUSTMENT":return{productCol:12,unitsColHide:!0,totalColHide:!0,priceColHide:!0,remainingCol:4,newQuantityCol:4};case"TRANSFER":return{productCol:15,unitsCol:5,priceColHide:!0,totalColHide:!0,newQuantityColHide:!0,remainingColHide:!0};default:throw new Error("Must set a listType prop in InventoryList component")}};function Hr(e){var t=JSON.stringify([{id:1,product:null,units:"",price:""}]),a=Object(n.useState)([]),c=Object(i.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(JSON.parse(t)),u=Object(i.a)(s,2),d=u[0],m=u[1],p=Object(n.useReducer)(qr,Lr),g=Object(i.a)(p,2),h=g[0],b=g[1],E=Object(n.useState)([]),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)(!1),_=Object(i.a)(y,2),N=_[0],x=_[1];Object(n.useEffect)((function(){"ENTRY"===e.listType||"TRANSFER"===e.listType?k():S()}),[]),Object(n.useEffect)((function(){d!==e.productsInventory&&e.products(d),"COUNT"===e.listType&&e.productsInfo(o)}),[d]),Object(n.useEffect)((function(){"ADJUSTMENT"===e.listType&&e.productsInventory.length>0&&null!==e.productsInventory[0].product_id&&m(e.productsInventory)}),[e.productsInventory]),Object(n.useEffect)((function(){if(e.visible&&b({type:e.listType}),"object"===typeof e.edit&&!Le.isObjEmpty(e.edit)){!function(t){var a;a="ENTRY"===e.listType?t.map((function(e){return{id:e.item_line+1,product:e.presentation.description,units:e.quantity,price:e.unit_price}})):t.map((function(e){return{id:e.item_line+1,product:e.product_id,units:e.quantity,price:e.unit_price}})),m(a)}(e.edit.purchase_details)}return function(){m(JSON.parse(t))}}),[e.visible,e.edit,e.listType,t]),Object(n.useEffect)((function(){m(JSON.parse(t)),l(e.productList)}),[e.productList]);var S=function(){kr.getAllProducts().then((function(e){l(e.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar los productos.")}))},k=function(){j([]),kr.getAllPresentations().then((function(e){l(e.data)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar los productos.")}))},C=function(e,t,a){var n=a||e.target.name,r=a?parseInt(e):e.target.value,c=d.map((function(e){return e.id===t?Object.assign(e,Object(ut.a)({},n,r)):e}));m(c)},D=function(e){j([]),x(!0),kr.searchPresentations(e).then((function(e){var t=e.data.map((function(e){return{id:e.id,description:e.description}}));j(t),x(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar las presentaciones.")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"section-space-list-bottom"},"Productos"),r.a.createElement(zr.b,{id:"inventory-list",size:"small",rowKey:"id",dataSource:d,renderItem:function(t){return r.a.createElement(zr.b.Item,null,r.a.createElement(T.a,{gutter:16,align:"bottom",className:"section-space-field w-100",key:t.id},r.a.createElement(I.a,{sm:1},r.a.createElement("div",{className:"title-space-bottom text-bold"},t.id)),r.a.createElement(I.a,{sm:h.productCol},r.a.createElement("div",{className:"title-space-field pl-2"},"Elige un producto"),"ENTRY"===e.listType||"TRANSFER"===e.listType?r.a.createElement(Ke.a,{disabled:!(!e.visible||Le.isObjEmpty(e.edit)&&""!==e.total),className:"single-select",showSearch:!0,value:t.product,placeholder:"Nombre o SKU de presentaci\xf3n",notFoundContent:N?r.a.createElement(Pt.a,{size:"small"}):null,filterOption:!1,onSearch:Rr()(D,800),onChange:function(e){x(!1),C(e,t.id,"product")},size:"large",style:{width:"100%"}},O.map((function(e){return r.a.createElement(Mr,{key:e.id,value:e.id},e.description)}))):r.a.createElement(Ke.a,{disabled:!(!e.visible||Le.isObjEmpty(e.edit)&&""!==e.total&&!e.disabled),value:t.product,className:"single-select",placeholder:"Nombre de producto",size:"large",style:{width:"100%"},onChange:function(e){return C(e,t.id,"product")}},o&&o.map((function(e){return r.a.createElement(Mr,{key:e.id,value:e.id},e.description)})))),r.a.createElement(I.a,{sm:h.unitsCol,style:{display:h.unitsColHide?"none":"block"}},r.a.createElement("div",{className:"title-space-field text-center"},"No. Unidades"),r.a.createElement(w.a,{disabled:!(!e.visible||Le.isObjEmpty(e.edit)&&""!==e.total),value:t.units,onChange:function(e){return C(e,t.id)},placeholder:"No. Unidades",name:"units",size:"large"})),r.a.createElement(I.a,{sm:h.priceCol,style:{display:h.priceColHide?"none":"block"}},r.a.createElement("div",{className:"title-space-field text-center"},"Costo unitario"),r.a.createElement(w.a,{disabled:!(!e.visible||Le.isObjEmpty(e.edit)&&""!==e.total),value:t.price,onChange:function(e){return C(e,t.id)},placeholder:"Precio unitario",name:"price",size:"large",type:"number"})),r.a.createElement(I.a,{sm:h.totalCol,style:{display:h.totalColHide?"none":"block"}},r.a.createElement("div",{className:"title-space-field text-center"},"Total"),r.a.createElement(w.a,{disabled:!0,value:Number(t.units*t.price).toFixed(2),placeholder:"Total",name:"total",size:"large"})),r.a.createElement(I.a,{sm:h.remainingCol,style:{display:h.remainingColHide?"none":"block"}},r.a.createElement("div",{className:"title-space-field text-center"},"En inventario"),r.a.createElement(w.a,{disabled:!0,value:t.remaining,onChange:function(e){return C(e,t.id)},placeholder:"Cantidad",name:"remaining",size:"large"})),r.a.createElement(I.a,{sm:h.newQuantityCol,style:{display:h.newQuantityColHide?"none":"block"}},r.a.createElement("div",{className:"title-space-field text-center"},"Nueva cantidad"),e.disabled?r.a.createElement(w.a,{disabled:e.disabled,value:"",onChange:function(a){return e.newQuantity(a,t.id)},placeholder:"Cantidad",name:"newQuantity",size:"large"}):r.a.createElement(w.a,{onChange:function(a){return e.newQuantity(a,t.id)},placeholder:"Cantidad",name:"newQuantity",size:"large"})),r.a.createElement(I.a,{sm:3,className:"center-flex-div"},e.visible&&!Le.isObjEmpty(e.edit)?"":r.a.createElement(P.a,{type:"link",className:"title-space-bottom cancel-button px-0 m-0",onClick:function(e){return function(e,t){if(1!==d.length){var a=d.filter((function(e){return e.id!==t}));a.map((function(e,t){return e.id=t+1})),m(a)}}(0,t.id)}},"Eliminar"))))},footer:e.visible&&!Le.isObjEmpty(e.edit)?"":r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{sm:1}),r.a.createElement(I.a,{sm:10},r.a.createElement("div",{className:"title-tendero dashed-border-button",onClick:function(){var e=Object.assign(JSON.parse(t)[0],{id:d.length+1}),a=[].concat(Object(wt.a)(d),[e]);m(a)}},r.a.createElement("svg",{className:"svg",viewBox:"0 0 300 100",preserveAspectRatio:"none"},r.a.createElement("path",{className:"path",d:"M0,0 300,0 300,100 0,100z"})),r.a.createElement("span",{className:"text"},"Agregar Producto"))),r.a.createElement(I.a,{sm:13}))}))}var Kr=Hr;Hr.defaultProps={edit:{}};var Gr=oe.a.Title;function Jr(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(""),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)([{id:1,name:"proveedor 1"},{id:2,name:"proveedor 2"}]),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)(null),k=Object(i.a)(S,2),C=k[0],D=k[1],F=Object(n.useState)([]),A=Object(i.a)(F,2),U=A[0],z=A[1],B=Object(n.useState)(null),R=Object(i.a)(B,2),M=R[0],L=R[1],q=Object(n.useState)([]),H=Object(i.a)(q,2),K=H[0],G=H[1];Object(n.useEffect)((function(){kr.getAllPaymentMethods().then((function(e){z(e.data)})).catch((function(e){console.log(e),f.a.error("Error al cargar metodos de pago")})),kr.getAllProviders().then((function(e){x(e.data)})).catch((function(e){console.log(e),f.a.error("Error al cargar los proveedores")}))}),[]);return Object(n.useEffect)((function(){if(o(null),b(""),j(""),D(null),L(null),d(""),e.visible&&!Le.isObjEmpty(e.edit)){var t,a,n,r,c;o(null===(t=e.edit)||void 0===t?void 0:t.store_id),b(null===(a=e.edit)||void 0===a?void 0:a.invoice),j(null===(n=e.edit)||void 0===n?void 0:n.serial_number),D(null===(r=e.edit)||void 0===r?void 0:r.provider_id),L(null===(c=e.edit)||void 0===c?void 0:c.payment_method_id);var i=0;e.edit.purchase_details.map((function(e){return i+=Number(e.total)})),d(i)}}),[e.visible,e.edit]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",null,r.a.createElement(Gr,null," ",Le.isObjEmpty(e.edit)?"Nueva Compra":"Editar Compra"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field pl-2"},"\xbfPara qu\xe9 tienda es?"),r.a.createElement(zn,{data:e.shopsList,value:c,handlerChange:function(e){o(e)},placeholder:"Elige una tienda"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field pl-2"},"Monto total de la compra"),r.a.createElement(w.a,{disabled:!Le.isObjEmpty(e.edit),value:u,onChange:function(e){return d(e.target.value)},placeholder:"Escribir el monto total de la compra",size:"large",type:"number"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field title-space-top"},r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field pl-2"},"No. Factura"),r.a.createElement(w.a,{value:h,onChange:function(e){return b(e.target.value)},placeholder:"Escribir No. Factura",size:"large",type:"number"})),r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement("div",{className:"title-space-field pl-2"},"No. Serie"),r.a.createElement(w.a,{value:O,onChange:function(e){return j(e.target.value)},placeholder:"Escribir No. Serie",size:"large",type:"number"})),r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement(zn,{title:"Proveedor",data:N,value:C,handlerChange:function(e){D(e)},placeholder:"Elige un proveedor"})),r.a.createElement(I.a,{xs:6,sm:6,md:6,lg:6},r.a.createElement(zn,{title:"M\xe9todo de pago",data:U,value:M,handlerChange:function(e){L(e)},placeholder:"Elegir un m\xe9todo"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(Kr,{listType:"ENTRY",visible:e.visible,edit:e.edit,products:function(e){var t=e.map((function(e){return{id:e.product,quantity:e.units,unit_price:e.price}}));G(t)},total:u})))),r.a.createElement("div",null,r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){e.closable()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:e.visible&&!Le.isObjEmpty(e.edit)?function(){return function(){var t=[e.edit.id,{provider_id:C,store_id:c,invoice:h,serial_number:O,payment_method_id:M}];if(null===C||null===c||""===h||""===O||null===M)return f.a.warning("Todos los campos son obligatorios");e.closable(t,"edit")}()}:function(){return function(){var t={provider_id:C,store_id:c,invoice:h,serial_number:O,payment_method_id:M,presentations:K},a=0;return K.map((function(e){return a+=e.quantity*e.unit_price})),null===C||null===c||""===h||""===O||null===M||""===u?f.a.warning("Todos los campos son obligatorios"):a!==Number(u)?f.a.warning("La suma de los costos por producto no cuadra con el monto total de la compra"):void e.closable(t,"save")}()}},e.visible&&!Le.isObjEmpty(e.edit)?"Editar":"Guardar"))))))))}var Qr=Jr;function Zr(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)({}),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(!1),p=Object(i.a)(m,2),g=p[0],h=p[1],b=Object(n.useState)(!0),E=Object(i.a)(b,2),v=E[0],O=E[1];Object(n.useEffect)((function(){!1===c&&d({})}),[c]);return r.a.createElement("div",null,r.a.createElement(Ir,{shopsList:e.shopsList,selectedOption:e.selectedOption,setSelectedOption:function(t){e.setSelectedOption(t)},onSearch:function(e){},buttonHandler:function(){o(!0)},buttonLabel:"Nueva compra",createPermissions:26}),r.a.createElement(Dr,{fetchData:v,loading:g,onEdit:function(e){h(!0),kr.getPurchase(e).then((function(e){d(e),o(!0),h(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la compra."),h(!1)}))},component:Ur,selectedOption:e.selectedOption}),r.a.createElement(Qr,{shopsList:e.shopsList,closable:function(e,t){o(!1),"save"===t&&function(e){O(!1),h(!0),kr.savePurchase(e).then((function(e){f.a.success("Informaci\xf3n creada."),O(!0)})).catch((function(e){console.log(e),f.a.error("Error al guardar la compra"),h(!1)}))}(e),"edit"===t&&function(e){O(!1),h(!0),kr.editPurchase(e[0],e[1]).then((function(e){f.a.success("Informaci\xf3n actualizada."),O(!0)})).catch((function(e){console.log(e),f.a.error("Error al editar la compra"),h(!1)}))}(e)},visible:c,edit:u}))}Jr.defaultProps={edit:{},shopsList:[]};var Yr=Zr;Zr.defaultProps={selectedOption:null,shopsList:[]};var Vr=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),g=p[0],h=p[1],b=Object(n.useState)(!1),E=Object(i.a)(b,2),v=E[0],O=E[1];Object(n.useEffect)((function(){e.fetchData&&y(e.selectedOption)}),[e.selectedOption,e.fetchData]),Object(n.useEffect)((function(){o(e.loading)}),[e.loading]);var j=[{title:"Tienda origen",dataIndex:"origin_store_name",render:function(e){return r.a.createElement("span",{style:{textAlign:"left"}},e)}},{title:"Tienda destino",dataIndex:"destiny_store_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Fecha",dataIndex:"date",render:function(e){return r.a.createElement("span",null,e)}},{title:"Usuario",dataIndex:"user_name",render:function(e){return r.a.createElement("span",null,e)}}],y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(!0),kr.getTransfers(e).then((function(e){h(_(e)),O(null!==e.data.next_page_url),d(e.data.next_page_url),o(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar las transferencias."),o(!1)}))},_=function(e){if("Too Many Attempts."!==e){var t=e.data.data||[];return h(t),t.map((function(e,t){return{key:t,origin_store_name:e.origin_store_name,destiny_store_name:e.destiny_store_name,date:Le.formatDate(e.date),user_name:e.user_name}}))}f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{className:"CustomTableClass",dataSource:g,columns:j,pagination:!1,loading:c,rowKey:function(e,t){return t}}),r.a.createElement(Ve,{handlerButton:function(){v&&(O(!1),o(!0),kr.getNextPage(u).then((function(e){h(g.concat(_(e))),O(null!==e.data.next_page_url),d(e.data.next_page_url),o(!1)})))},moreInfo:v})))))))};function Wr(e){return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},r.a.createElement(Pt.a,{size:e.size}),r.a.createElement("span",null,e.title))}Wr.defaultProps={size:"large",title:"Loading"};var $r=Wr,Xr=oe.a.Title;function ec(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),h=p[0],b=p[1];Object(n.useEffect)((function(){E()}),[e.visible]);var E=function(){o(null),d(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},e.loading&&r.a.createElement("div",{className:"loading-spinner"},r.a.createElement($r,null)),r.a.createElement("div",null,r.a.createElement(Xr,null," ","Nueva transferencia"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(zn,{title:"\xbfCu\xe1l es la tienda origen?",data:e.shopsList,value:c,handlerChange:function(e){o(e)},placeholder:"Elige una tienda"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(zn,{title:"\xbfHacia qu\xe9 tienda se mueve el inventario?",data:e.shopsList,value:u,handlerChange:function(e){d(e),function(e){c===e&&d(null)}(e)},placeholder:"Elige una tienda"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(Kr,{listType:"TRANSFER",visible:e.visible,products:function(e){var t=e.map((function(e){return{id:e.product,quantity:e.units}}));b(t)}})))),r.a.createElement("div",null,r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){e.closable()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){var t=!1;c&&u?t=!0:f.a.warning("Todos los campos son necesarios");var a={origin_store_id:c,destiny_store_id:u,presentations:h};t&&e.closable(a,"save")}()}},"Transferir"))))))))}var tc=ec;function ac(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(!0),p=Object(i.a)(m,2),g=p[0],h=p[1];return r.a.createElement("div",null,r.a.createElement(Ir,{shopsList:e.shopsList,selectedOption:e.selectedOption,setSelectedOption:function(t){e.setSelectedOption(t)},onSearch:function(e){},buttonLabel:"Nueva transferencia",buttonHandler:function(){o(!0)},createPermissions:34}),r.a.createElement(Dr,{fetchData:g,loading:u,component:Vr,selectedOption:e.selectedOption}),r.a.createElement(tc,{shopsList:e.shopsList,closable:function(e,t){if("save"===t)return function(e){h(!1),d(!0),kr.storeTransfer(e).then((function(e){e.errors&&Object.keys(e.errors).length>0?(Object.keys(e.errors).map((function(t){return f.a.error(e.errors[t])})),d(!1)):(f.a.success("Informaci\xf3n creada."),o(!1),d(!1),h(!0))})).catch((function(e){console.log(e),f.a.error("Error al guardar la compra"),d(!1)}))}(e);o(!1)},visible:c,loading:u}))}ec.defaultProps={shopsList:[],loading:!1};var nc=ac;ac.defaultProps={selectedOption:null,shopsList:[]};var rc=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),g=p[0],h=p[1],b=Object(n.useState)(!1),E=Object(i.a)(b,2),v=E[0],O=E[1];Object(n.useEffect)((function(){e.fetchData&&j(e.selectedOption)}),[e.selectedOption,e.fetchData]),Object(n.useEffect)((function(){o(e.loading)}),[e.loading]);var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(!0),kr.getAdjustments(e).then((function(e){h(_(e)),O(null!==e.data.next_page_url),d(e.data.next_page_url),o(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar los ajustes."),o(!1)}))},y=[{title:"Tienda",dataIndex:"store",render:function(e){return r.a.createElement("span",{style:{textAlign:"left"}},e)}},{title:"Usuario",dataIndex:"user",render:function(e){return r.a.createElement("span",null,e)}},{title:"Fecha",dataIndex:"date",render:function(e){return r.a.createElement("span",null,e)}},{title:"Raz\xf3n",dataIndex:"reason",render:function(e){return r.a.createElement("span",null,e)}}],_=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,store:e.store_name,user:e.user_name,date:Le.formatDate(e.date),reason:e.description}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{className:"CustomTableClass",dataSource:g,columns:y,pagination:!1,loading:c,rowKey:function(e,t){return t}}),r.a.createElement(Ve,{handlerButton:function(){v&&(O(!1),o(!0),kr.getNextPage(u).then((function(e){h(g.concat(_(e))),O(null!==e.data.next_page_url),d(e.data.next_page_url),o(!1)})))},moreInfo:v})))))))},cc=oe.a.Title;function oc(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(!0),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)([]),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)([]),k=Object(i.a)(S,2),C=k[0],D=k[1],F=Object(n.useState)([{id:1,quantity:0}]),A=Object(i.a)(F,2),U=A[0],z=A[1];Object(n.useEffect)((function(){if(e.visible&&!Le.isObjEmpty(N)){var t=JSON.parse(JSON.stringify(N));t.forEach((function(e){var t=h.find((function(t){return e.product===t.product_id}));e.remaining=void 0!==t?t.quantity:0})),D(t)}}),[N]);var B=function(){o(null),d(""),x([]),D([]),j(!0),e.closable()},R=function(e){if("Too Many Attempts."!==e)return(e.data||[]).map((function(e){return{id:e.product_id,product_id:e.product_id,quantity:e.quantity,description:e.product_description}}));console.log("accedio el numero de consultas")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:B,visible:e.visible,width:800},r.a.createElement("div",null,r.a.createElement(cc,null," ","Nuevo ajuste"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(zn,{title:"\xbfPara qu\xe9 tienda es?",data:e.shopsList,value:c,handlerChange:function(e){j(!0),o(e),function(e){kr.getInventory(e,!1).then((function(e){b(R(e)),x([]),0===e.data.length?f.a.warning("No existen productos para esta tienda"):j(!1)})).catch((function(e){console.log(e)}))}(e)},placeholder:"Elige una tienda"})),r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"title-space-field title-space-top pl-2"},"\xbfCu\xe1l es la raz\xf3n de este ajuste?"),r.a.createElement(w.a,{value:u,onChange:function(e){d(e.target.value)},placeholder:"Escribe la raz\xf3n del ajuste",size:"large"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(Kr,{listType:"ADJUSTMENT",visible:e.visible,products:function(e){var t=e.map((function(e,t){return{id:t+1,product:e.product,quantity:e.units}}));x(t)},productsInventory:C,newQuantity:function(e,t){var a=JSON.parse(JSON.stringify(U));a.find((function(e){return e.id===t}))?a.find((function(e){return e.id===t})).quantity=e.target.value:a=[].concat(Object(wt.a)(a),[{id:t,quantity:e.target.value}]),z(a)},productList:h,disabled:O})))),r.a.createElement("div",null,r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return B()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return function(){var t=C.map((function(e){return{id:e.product,quantity:U.find((function(t){return t.id===e.id})).quantity}}));if(Le.validateNull(c)||Le.validateNull(u)||t.some((function(e){return Le.validateNull(e.id)||Le.validateNull(e.quantity)})))return f.a.warning("Todos los campos son obligatorios");if(t.some((function(e){return Le.validateNumber(e.quantity)})))return f.a.warning("El campo Nueva Cantidad solo acepta valores num\xe9ricos enteros");var a={store_id:c,description:u,products:t};e.closable(a,"save"),B()}()}},"Ajustar"))))))))}var ic=oc;function lc(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!0),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(!0),p=Object(i.a)(m,2),g=p[0],h=p[1];return r.a.createElement("div",null,r.a.createElement(Ir,{shopsList:e.shopsList,selectedOption:e.selectedOption,setSelectedOption:function(t){e.setSelectedOption(t)},onSearch:function(e){},buttonLabel:"Nuevo ajuste",buttonHandler:function(){return o(!0)},createPermissions:30}),r.a.createElement(Dr,{fetchData:g,loading:u,component:rc,selectedOption:e.selectedOption}),r.a.createElement(ic,{shopsList:e.shopsList,closable:function(e,t){o(!1),"save"===t&&function(e){h(!1),d(!0),kr.saveAdjustment(e).then((function(e){f.a.success("Informaci\xf3n actualizada."),h(!0)})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informaci\xf3n"),d(!1)}))}(e)},visible:c}))}oc.defaultProps={loading:!1,shopsList:[]};var sc=lc;lc.defaultProps={shopsList:[],selectedOption:null};var uc=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),g=p[0],h=p[1],b=Object(n.useState)(!1),E=Object(i.a)(b,2),v=E[0],O=E[1];Object(n.useEffect)((function(){e.fetchData&&y()}),[e.selectedOption,e.fetchData]);var j=[{title:"Tienda",dataIndex:"store_name",render:function(e){return r.a.createElement("span",{style:{textAlign:"left"}},e)}},{title:"Usuario",dataIndex:"user_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"Fecha",dataIndex:"date",render:function(e){return r.a.createElement("span",null,e)}},{title:"",dataIndex:"column",render:function(e){return r.a.createElement("span",null,e)}}],y=function(){o(!0),kr.getCounts(e.selectedOption).then((function(e){h(_(e)),O(null!==e.data.next_page_url),d(e.data.next_page_url),o(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar los conteos."),o(!1)}))},_=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,store_name:e.store.name,user_name:e.user.name,date:Le.formatDate(e.count_date)}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{className:"CustomTableClass",dataSource:g,columns:j,pagination:!1,loading:c,rowKey:function(e,t){return t}}),r.a.createElement(Ve,{handlerButton:function(){v&&(O(!1),o(!0),kr.getNextPage(u).then((function(e){h(g.concat(_(e))),O(null!==e.data.next_page_url),d(e.data.next_page_url),o(!1)})))},moreInfo:v})))))))},dc=oe.a.Title;function mc(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)([]),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)([]),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)(!1),w=Object(i.a)(S,2),k=w[0],C=w[1],D=Object(n.useContext)(ae),A=Object(i.a)(D,1)[0].auth;Object(n.useEffect)((function(){e.fetchData&&(o([]),j([]))}),[e.fetchData]);var U=[{title:"Productos",dataIndex:"product",render:function(e){return r.a.createElement("span",{style:{textAlign:"left"}},e)}},{title:"Contado",dataIndex:"count",render:function(e){return r.a.createElement("span",null,e)}},{title:"En inventario",dataIndex:"inventory",render:function(e){return r.a.createElement("span",null,e)}},{title:"Diferencia",dataIndex:"diff",render:function(e){return r.a.createElement("span",null,e)}}],z=function(){o([]),j([]),e.closable()},B=function(t){if(t){var a=h.map((function(e){return{id:e.key,quantity:e.count}})),n=JSON.parse(localStorage.getItem("TenderoApp")).token.access_token,r=A.id?A.id:Le.parseJwt(n).sub,o=vt()().format().slice(0,10),i={created_by:r,store_id:c,status:"OPEN",count_date:o,products:a};e.closable(i,"save")}d(!1)},R=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e){return{product_id:e.product_id,name:e.product_description,quantity:e.quantity}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},M=function(e){return O.map((function(t){var a=e.find((function(e){return t.product===e.product_id}))||0,n=N.find((function(e){return t.product===e.id})),r=t.quantity-(a.quantity||0);return r>0&&(r="+".concat(r)),{key:n.id,product:n.name,count:t.quantity,inventory:a.quantity||0,diff:r}}))};return r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:z,visible:e.visible,width:800},u?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(dc,null," ","Resumen de conteo"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{className:"CustomTableClass",dataSource:h,columns:U,pagination:!1,loading:k,rowKey:function(e,t){return t}})))),r.a.createElement("div",null,r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right d-flex justify-end align-center"},r.a.createElement("span",{className:"mr-3"},"\xbfDeseas ajustar tu inventario?"),r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"title-tendero new-button no-ajustar-btn product-margin-header-button",onClick:function(){return B(!1)}},"No ajustar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return B(!0)}},"Ajustar"))))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(dc,null," ","Nuevo conteo"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement(zn,{title:"\xbfPara qu\xe9 tienda es?",data:e.shopsList,value:c,handlerChange:function(e){o(e)},placeholder:"Elige una tienda"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(Kr,{listType:"COUNT",visible:e.visible,products:function(e){var t=e.map((function(e,t){return{id:t+1,product:e.product,quantity:e.units}}));j(t)},productsInfo:function(e){var t=null===e||void 0===e?void 0:e.map((function(e){return{id:e.id,name:e.description}}));x(t)}})))),r.a.createElement("div",null,r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return z()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return Le.validateNull(c)||O.some((function(e){return Le.validateNull(e.product)||Le.validateNull(e.quantity)}))?f.a.warning("Todos los campos son obligatorios"):O.some((function(e){return Le.validateNumber(e.quantity)}))?f.a.warning("El campo Nueva Cantidad solo acepta valores num\xe9ricos enteros"):(C(!0),d(!0),void kr.getInventory(c).then((function(e){b(M(R(e))),C(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informaci\xf3n, Intente nuevamente"),C(!1)})))}},"Guardar y continuar"))))))))}var pc=mc;function fc(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(!0),p=Object(i.a)(m,2),g=p[0],h=p[1];return r.a.createElement("div",null,r.a.createElement(Ir,{shopsList:e.shopsList,selectedOption:e.selectedOption,setSelectedOption:function(t){e.setSelectedOption(t)},onSearch:function(e){},buttonLabel:"Nuevo conteo",buttonHandler:function(){o(!0)},createPermissions:38}),r.a.createElement(Dr,{fetchData:g,loading:u,component:uc,selectedOption:e.selectedOption}),r.a.createElement(pc,{shopsList:e.shopsList,closable:function(e,t){o(!1),"save"===t&&function(e){h(!1),d(!0),kr.saveCounts(e).then((function(e){f.a.success("Informaci\xf3n actualizada."),h(!0)})).catch((function(e){console.log(e),f.a.error("Error al actualizar la informaci\xf3n"),d(!1)}))}(e)},visible:c,fetchData:g}))}mc.defaultProps={shopsList:[],loading:!1};var gc=fc;fc.defaultProps={selectedOption:null,shopsList:[]};var hc=kt.a.TabPane;var bc=function(){var e=Object(n.useContext)(ae),t=Object(i.a)(e,1)[0],a=te(t).hasPermissions,c=Object(n.useState)(null),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(null),d=Object(i.a)(u,2),m=d[0],p=d[1],g=Object(n.useState)(),h=Object(i.a)(g,2),b=h[0],E=h[1];Object(n.useEffect)((function(){kr.getAllStores().then((function(e){E(e.data)})).catch((function(e){console.log(e),f.a.error("Error en al cargar tiendas")}))}),[]);var v=function(e){s(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(He,{title:"Inventario"}),r.a.createElement(kt.a,{id:"tenderoInventoryTabs",className:"inventory-tab",defaultActiveKey:"1",onChange:function(e){p(e)}},r.a.createElement(hc,{tab:"Inventario",key:"1"},r.a.createElement(Ar,{shopsList:b,selectedOption:l,setSelectedOption:v,keyTab:m})),a([25])&&r.a.createElement(hc,{tab:"Compras",key:"2"},r.a.createElement(Yr,{shopsList:b,selectedOption:l,setSelectedOption:v})),a([37])&&r.a.createElement(hc,{tab:"Conteos",key:"3"},r.a.createElement(gc,{shopsList:b,selectedOption:l,setSelectedOption:v})),a([29])&&r.a.createElement(hc,{tab:"Ajustes",key:"4"},r.a.createElement(sc,{shopsList:b,selectedOption:l,setSelectedOption:v})),a([33])&&r.a.createElement(hc,{tab:"Transferencias",key:"5"},r.a.createElement(nc,{shopsList:b,selectedOption:l,setSelectedOption:v}))))},Ec=a(2232),vc=a(2233),Oc=a(2228),jc=a(2234),yc=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.storesCash,"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_c=function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.stores,"/").concat(t,"/turns/").concat(a,"/items?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Nc=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Client_options,"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xc=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.paymentMethod_options,"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Sc=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.Turns_options,"?store_id=").concat(t,"&paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wc=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se("".concat(W.a.stage.storeTurns),t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kc=function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.storeTurns,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearFoAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Cc=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.storeTurns,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearFoAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pc=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.storesCash,"?id=").concat(t,"&paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearFoAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tc=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.storeTurns,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ic=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se("".concat(W.a.stage.sells),t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dc=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se("".concat(W.a.stage.sellsOffline),t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fc=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.sellPayments,"?store_id=").concat(t,"&per_page=5"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ac=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Uc=function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.sellPayments,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearFoAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),zc=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.sells,"?store_id=").concat(t,"&per_page=5"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bc=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de("".concat(W.a.stage.sells,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rc=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.deposits,"?store_id=").concat(t,"&per_page=5"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mc=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.deposits,"/").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lc=function(){var e=Object(m.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?"/"+t:"",e.abrupt("return",se(W.a.stage.deposits+n,a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),qc=function(){var e=Object(m.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue("".concat(W.a.stage.deposits,"/").concat(t),a).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearFoAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Hc={getAllStores:yc,getAllProducts:_c,getAllClients:Nc,getAllPaymentMethods:xc,getStoreTurns:Sc,openStoreTurn:wc,getStoreTurn:Cc,saveSell:Ic,saveOfflineSells:Dc,getReceivables:Fc,completeSell:Uc,getNextPage:Ac,getSells:zc,sellDelete:Bc,getAllDeposits:Rc,getDeposit:Mc,storeDeposit:Lc,closeStoreTurn:kc,getClosedStoreTurn:Tc,searchPresentations:function(){var e=Object(m.a)(d.a.mark((function e(t,a,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.stores,"/").concat(t,"/turns/").concat(a,"/items?presentation_combo_description=").concat(n,"%&presentation_description=").concat(n,"%&sku_code=").concat(n,"%&paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),editDeposit:qc,getStoreCash:Pc},Kc=a(2220),Gc=a(63),Jc=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=function(){e.showImageInModal(e.img),o(!1)};return r.a.createElement(D.a,null,e.withOverlay?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:e.img.base64,alt:"deposit-"+e.index}),r.a.createElement("div",{className:"deposit-image-overlay ".concat(c?"visible":"")},r.a.createElement(P.a,{title:"Ampliar Imagen",className:"button see",onClick:l},r.a.createElement(Gc.ZoomInOutlined,null)),r.a.createElement(C.a,{title:"\xbfDesea eliminar la imagen?",onConfirm:function(){e.deleteImage(e.index),o(!1)},onCancel:function(){return o(!1)},okText:"Si",cancelText:"No"},r.a.createElement(P.a,{title:"Eliminar Imagen",className:"button delete",onClick:function(){return o(!0)}},r.a.createElement(Gc.DeleteOutlined,null))))):r.a.createElement("img",{src:e.img.base64,alt:"deposit-"+e.index,onClick:l}))},Qc=function(e){var t=e.img,a=e.visible,n=e.onCancel;return r.a.createElement(Kc.a,{visible:a,centered:!0,className:"deposit-modal",onCancel:n,title:t.title},r.a.createElement("img",{src:t.base64,alt:"deposit",style:{width:"100%"}}))};var Zc=function(e){var t,a=Object(n.useState)({}),c=Object(i.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(!1),u=Object(i.a)(s,2),p=u[0],g=u[1],h=Object(n.useState)(!1),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)({}),j=Object(i.a)(O,2),y=j[0],_=j[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),S=x[0],k=x[1];Object(n.useEffect)((function(){g(e.visible)}),[e.visible]);var C=function(e){var t=e.target,a=t.name,n=t.value;l(Object(H.a)(Object(H.a)({},o),{},Object(ut.a)({},a,n)))},F=function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.persist(),a=Array.from(t.target.files).map(function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.name,e.next=3,Le.fileToBase64(t);case 3:return e.t1=e.sent,e.abrupt("return",{title:e.t0,base64:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(a);case 4:a=e.sent,a=[].concat(Object(wt.a)(o.deposit_images||[]),Object(wt.a)(a)),n=Object(H.a)(Object(H.a)({},o),{},{deposit_images:a}),l(n),t.target.value=null;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var t,a={store_id:e.storeId,store_turn_id:e.storeTurnId,deposit_number:o.deposit_number,amount:o.amount,images:(null===o||void 0===o||null===(t=o.deposit_images)||void 0===t?void 0:t.length)>0?o.deposit_images.map((function(e){return{title:e.title,base64:e.base64}})):[]};k(!0),Hc.storeDeposit(null,a).then((function(e){if(!e)throw new Error;f.a.success("Deposito cargado exitosamente."),U(),k(!1),l({})})).catch((function(e){f.a.error("No se ha podido cargar el deposito."),U(),k(!1),l({})}))},U=function(){g(!1),e.onClose()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qc,{visible:E,img:y,onCancel:function(){return v(!1)}}),r.a.createElement(Kc.a,{visible:p,centered:!0,className:"add-deposit-modal",title:"Nuevo Dep\xf3sito",closable:!1,onOk:A,onCancel:U,footer:[r.a.createElement(P.a,{key:"back",className:"cancel-button",onClick:U},"Cancelar"),r.a.createElement(P.a,{key:"submit",className:"title-tendero new-button",type:"primary",loading:S,onClick:A},"Guardar")]},r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field pl-2"},"N\xfamero de boleta"),r.a.createElement(w.a,{placeholder:"Ingresa el No. de boleta",size:"large",name:"deposit_number",value:null===o||void 0===o?void 0:o.deposit_number,onChange:C})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field pl-2"},"Cantidad"),r.a.createElement(w.a,{placeholder:"Cantidad de dep\xf3sito",size:"large",name:"amount",value:null===o||void 0===o?void 0:o.amount,onChange:C}))),r.a.createElement(T.a,{gutter:16,className:"deposit-images"},(null===o||void 0===o||null===(t=o.deposit_images)||void 0===t?void 0:t.length)>0&&o.deposit_images.map((function(e,t){return r.a.createElement(Jc,{key:t,index:t,img:e,showImageInModal:function(e){return function(e){_(e),g(!0)}(e)},deleteImage:function(e){return function(e){var t=o.deposit_images.filter((function(t,a){return a!==e})),a=Object(H.a)(Object(H.a)({},o),{},{deposit_images:t});l(a),f.a.success("Imagen eliminada!")}(e)},withOverlay:!0})})),r.a.createElement(D.a,{className:"add-deposit-image"},r.a.createElement(Gc.PlusOutlined,null),"Subir",r.a.createElement("label",{htmlFor:"image-upload-input",className:"image-upload"},r.a.createElement("input",{type:"file",id:"image-upload-input",accept:".jpeg, .jpg, .png",onChange:F,multiple:!0}))))))},Yc=a(406),Vc=Object(Yc.a)("tendero.v2",1,{upgrade:function(e){e.createObjectStore("products",{autoIncrement:!0}),e.createObjectStore("clients",{autoIncrement:!0}),e.createObjectStore("paymentMethods",{autoIncrement:!0}),e.createObjectStore("sells",{autoIncrement:!0}),e.createObjectStore("turn",{autoIncrement:!0})}}),Wc=function(e,t){Vc.then((function(a){a.clear(t);var n=a.transaction(t,"readwrite");e.map((function(e){return n.store.add(e)}))}))},$c=function(e,t){Vc.then((function(a){a.add(t,e)}))},Xc=function(e){return Vc.then((function(t){return t.getAll(e)}))},eo=function(e){Vc.then((function(t){t.clear(e)}))},to=Ke.a.Option,ao=oe.a.Title;var no=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(null),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)(null),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)(0),k=Object(i.a)(S,2),C=k[0],D=k[1],F=Object(n.useState)(!1),A=Object(i.a)(F,2),U=A[0],z=A[1],B=Object(n.useState)(!1),R=Object(i.a)(B,2),M=R[0],L=R[1],q=Object(n.useState)(!1),H=Object(i.a)(q,2),K=H[0],G=H[1],J=Object(n.useState)(null),Q=Object(i.a)(J,2),Z=Q[0],Y=Q[1],V=Object(n.useState)(""),W=Object(i.a)(V,2),$=W[0],X=W[1],ee=Object(n.useState)(null),te=Object(i.a)(ee,2),ne=te[0],re=te[1],ce=Object(n.useState)({}),oe=Object(i.a)(ce,2),ie=oe[0],le=oe[1],se=Object(n.useState)(null),ue=Object(i.a)(se,2),de=ue[0],me=ue[1],pe=Object(n.useState)(null),fe=Object(i.a)(pe,2),ge=fe[0],he=fe[1],be=Object(n.useState)(!1),Ee=Object(i.a)(be,2),ve=Ee[0],Oe=Ee[1];Object(n.useEffect)((function(){c.turn.is_open?he(c.turn):je()}),[c.turn]),Object(n.useEffect)((function(){b([]),x(null);var e=u.find((function(e){return e.id===O}));D((null===e||void 0===e?void 0:e.petty_cash_amount)||0),ye()}),[O]);var je=function(){L(!0),Hc.getAllStores().then((function(e){d(e.data),L(!1)})).catch((function(e){console.log(e),f.a.error("Error en al cargar tiendas"),L(!1)}))},ye=function(){Hc.getStoreTurns(O).then((function(e){b(e.data)})).catch((function(e){return console.log(e),f.a.error("Error en al cargar tiendas"),!1}))},_e=function(t){if(t)if(O&&N){G(!0);var a={store_id:O,turn_id:N,open_petty_cash_amount:C},n=u.find((function(e){return e.id===O})),r=h.find((function(e){return e.id===N}));Hc.openStoreTurn(a).then((function(a){a.errors&&Object.keys(a.errors).length>0?Object.keys(a.errors).forEach((function(e){"store_id"===e?f.a.error(a.errors[e][0].replace("store_id","tienda")):f.a.error(a.errors[e])})):(he(a),o({type:"TURN OPENED",payload:a}),o({type:"TURN STORE",payload:n}),o({type:"TURN INFO",payload:r}),Wc([{turn:a,store:n,turnInfo:r}],"turn"),e.infoStore(n,r),e.status(t));G(!1)})).catch((function(e){return console.log(e),f.a.error("No se pudo iniciar el turno"),!1}))}else f.a.warning("Todos los campos son necesarios");else Ne()},Ne=function(){var e=!1;if([Z,ne,de].includes("")||[Z,ne,de].includes(null)?f.a.warning("Todos los campos son obligatorios"):!Number(Z)&&!(Z>=0)||Z.includes("-")||Z.includes("+")?f.a.warning("El campo \xbfCu\xe1nto hubo en gastos en efectivo que no fueron compras? solo acepta valores num\xe9ricos"):!Number(ne)&&!(ne>=0)||ne.includes("-")||ne.includes("+")?f.a.warning("El campo \xbfCu\xe1nto vendiste en tarjeta? solo acepta valores num\xe9ricos"):!Number(de)&&!(de>=0)||de.includes("-")||de.includes("+")?f.a.warning("El campo \xbfCu\xe1nto efectivo tienes en mano al cerrar el turno? solo acepta valores num\xe9ricos"):e=!0,e){Xc("sells").then((function(e){e.length>0&&xe(e)})),G(!0);var t={expenses_in_not_purchases:Z,expenses_reason:$,card_sales:ne,cash_on_hand:de};Hc.closeStoreTurn(c.turn.id,t).then((function(e){eo("turn"),z(!0),G(!1),f.a.success("El turno se ha cerrado correctamente"),le(e)})).catch((function(e){return console.log(e),f.a.error("No se pudo cerrar el turno"),!1}))}},xe=function(e){var t={store_id:e[0].store_id,sells:e.map((function(e){return{seller_id:c.auth.id,store_turn_id:e.store_turn_id,payment_method_id:e.payment_method_id,description:e.description,name:e.name,nit:e.nit,phone:e.phone,email:e.email,items:e.items}}))};Hc.saveOfflineSells(t).then((function(e){e&&eo("sells")})).catch((function(e){console.log(e)}))},Se=function(){b([]),j(null),x(null),z(!1),e.closable()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:Se,visible:e.visible,width:800,className:"pos-drawer"},r.a.createElement("div",null,r.a.createElement(ao,null," ",e.open?"Cierre de turno":"Iniciar turno"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),e.open?U?r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{sm:11},r.a.createElement("h4",{className:"section-space-list-bottom title-space-top"},"Cuadre en tarjeta"),r.a.createElement(T.a,{gutter:16,className:"section-space-list-bottom"},r.a.createElement(I.a,{sm:18},"Venta en tarjeta seg\xfan cierre"),r.a.createElement(I.a,{sm:6,className:"total-quantity"},"Q.",ne)),r.a.createElement(T.a,{gutter:16,className:"section-space-list-bottom"},r.a.createElement(I.a,{sm:18},"Venta en tarjeta seg\xfan POS"),r.a.createElement(I.a,{sm:6,className:"total-quantity"},"Q.",ie.card_sales_pos)),r.a.createElement(T.a,{gutter:16,className:"section-space-list-bottom"},r.a.createElement(I.a,{offset:18,sm:6,className:Number(ne)===Number(ie.card_sales_pos)?"total-quantity isOk":"total-quantity isnotOk"},Number(ne)===Number(ie.card_sales_pos)?"Cuadrado":"No cuadra"))),r.a.createElement(I.a,{sm:1},r.a.createElement("div",{className:"sell-divider"})),r.a.createElement(I.a,{sm:12},r.a.createElement("h4",{className:"section-space-list-bottom title-space-top"},"Cuadre en circulante"),r.a.createElement(T.a,{gutter:16,className:"section-space-list-bottom"},r.a.createElement(I.a,{sm:16},"Turno empez\xf3 con"),r.a.createElement(I.a,{sm:8,className:"total-quantity"},"Q.",ie.open_petty_cash_amount)),r.a.createElement(T.a,{gutter:16,className:"section-space-list-bottom"},r.a.createElement(I.a,{sm:16},"Gastado en compras"),r.a.createElement(I.a,{sm:8,className:"total-quantity"},"Q.",ie.expenses_in_purchases)),r.a.createElement(T.a,{gutter:16,className:"section-space-list-bottom"},r.a.createElement(I.a,{sm:16},"Gastado en gastos (no compras)"),r.a.createElement(I.a,{sm:8,className:"total-quantity"},"Q.",ie.expenses_in_not_purchases)),r.a.createElement(T.a,{gutter:16,className:"section-space-list-bottom"},r.a.createElement(I.a,{sm:16},"Depositado"),r.a.createElement(I.a,{sm:8,className:"total-quantity"},"Q.",ie.deposits_total)),r.a.createElement(T.a,{gutter:16,className:"section-space-list-bottom"},r.a.createElement(I.a,{sm:16},"Vendido en efectivo"),r.a.createElement(I.a,{sm:8,className:"total-quantity"},"Q.",ie.cash_sales)),r.a.createElement(T.a,{gutter:16,className:"section-space-list-bottom"},r.a.createElement(I.a,{sm:16},"Cobrado de cuentas por cobrar"),r.a.createElement(I.a,{sm:8,className:"total-quantity"},"Q.",ie.cash_collected_in_receivables)),r.a.createElement(T.a,{gutter:16,className:"section-space-list-bottom"},r.a.createElement(I.a,{sm:16},"Ajustes realizados"),r.a.createElement(I.a,{sm:8,className:"total-quantity"},"Q.",ie.cash_adjustments_total)),r.a.createElement(T.a,{gutter:16,className:"section-space-list-bottom final-section"},r.a.createElement(I.a,{offset:3,sm:13},"Deberias tener"),r.a.createElement(I.a,{sm:8,className:"total-quantity"},"Q.",ie.closed_petty_cash_amount)),r.a.createElement(T.a,{gutter:16,className:"section-space-list-bottom"},r.a.createElement(I.a,{offset:3,sm:13},"Tienes en tienda"),r.a.createElement(I.a,{sm:8,className:"total-quantity"},"Q.",ie.cash_on_hand)),r.a.createElement(T.a,{gutter:16,className:"section-space-list-bottom"},r.a.createElement(I.a,{offset:16,sm:8,className:Number(ie.closed_petty_cash_amount)===Number(ie.cash_on_hand)?"total-quantity isOk":"total-quantity isnotOk"},Number(ie.closed_petty_cash_amount)===Number(ie.cash_on_hand)?"Cuadrado":"No cuadra")))):r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement("h4",{className:"section-space-list-bottom pl-2"},c.store.name," | ","".concat(c.turnInfo.start_time.slice(0,5)," - ").concat(c.turnInfo.end_time.slice(0,5)))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field pl-2"},"\xbfCu\xe1nto hubo en gastos en efectivo que no fueron compras?"),r.a.createElement(w.a,{placeholder:"Escribe la cantidad",onChange:function(e){return Y(e.target.value)},size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field pl-2"},"\xbfDe qu\xe9 fueron esos gastos?"),r.a.createElement(w.a,{placeholder:"Escribe una breve explicacion",onChange:function(e){return X(e.target.value)},size:"large"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field",align:"bottom"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field pl-2"},"\xbfCu\xe1nto vendiste en tarjeta?"),r.a.createElement(w.a,{placeholder:"Escribe la cantidad",onChange:function(e){return re(e.target.value)},size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field pl-2"},"\xbfCu\xe1nto efectivo tienes en mano al cerrar el turno?"),r.a.createElement(w.a,{placeholder:"Escribe la cantidad",onChange:function(e){return me(e.target.value)},size:"large"})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{sm:24},r.a.createElement("div",{className:"title-space-field pl-2"},"Nombre de tienda"))),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(zn,{disabled:M,loading:M,data:u,handlerChange:function(e){return j(e)},value:O,placeholder:"Elige una tienda"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field title-space-top"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field pl-2"},"Efectivo en tienda"),r.a.createElement(w.a,{disabled:!0,value:"Q ".concat(Le.formatNumber(C)),placeholder:"Efectivo en tienda",size:"large"})),r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field pl-2"},"Turno"),r.a.createElement(Ke.a,{showSearch:!0,optionFilterProp:"children",disabled:!((null===h||void 0===h?void 0:h.length)>0),loading:!((null===h||void 0===h?void 0:h.length)>0),title:"Turno",value:N,onChange:function(e){return x(e)},placeholder:"Elige un turno",className:"single-select",size:"large",style:{width:"100%"}},null===h||void 0===h?void 0:h.map((function(e){return r.a.createElement(to,{key:e.id,value:e.id},"".concat(e.start_time.slice(0,5)," - ").concat(e.end_time.slice(0,5)))}))))))),r.a.createElement("div",null,r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,!U&&r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return Se()}},"Cancelar"),U?r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){o({type:"TURN"}),e.status(!1),z(!1),b([]),x(null),j(null)}},"Finalizar"):r.a.createElement(P.a,{loading:K,htmlType:"submit",className:"title-tendero new-button",onClick:e.open?function(){return _e(!1)}:function(){return _e(!0)}},e.open?"Confirmar datos":"Iniciar"))))))),r.a.createElement(Zc,{storeId:e.storeId,storeTurnId:null===ge||void 0===ge?void 0:ge.id,visible:ve,onClose:function(){return Oe(!1)}}))},ro=Ke.a.Option;var co=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0],c=te(a).hasPermissions,o=JSON.stringify([{id:1,product:null,units:"",price:"",total:0,type:""}]),l=Object(n.useState)([]),s=Object(i.a)(l,2),u=s[0],p=s[1],g=Object(n.useState)(JSON.parse(o)),h=Object(i.a)(g,2),b=h[0],E=h[1],v=Object(n.useState)([]),O=Object(i.a)(v,2),j=O[0],y=O[1],_=Object(n.useState)(!1),N=Object(i.a)(_,2),x=N[0],S=N[1];Object(n.useEffect)((function(){k()}),[e.store.id,e.turn.id]),Object(n.useEffect)((function(){e.products(b)}),[b]),Object(n.useEffect)((function(){e.edit&&E(e.productsList)}),[e.edit]),Object(n.useEffect)((function(){e.isSellCancelled&&(e.uncancellSell&&e.uncancellSell(),E(JSON.parse(o)))}),[e.isSellCancelled]);var k=function(){var t=Object(m.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Hc.getAllProducts(e.store.id,e.turn.id).then(function(){var e=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=7;break}return e.next=3,Xc("products");case 3:a=e.sent,p(a),e.next=9;break;case 7:p(t.data),Wc(t.data,"products");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),f.a.error("No se ha podido cargar los productos.")}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(e,t,a){var n=a||e.target.name,r=a?e:e.target.value,c=b.map((function(e){return e.id===t?Object.assign(e,Object(ut.a)({},n,r)):e}));E(c)},D=function(t){y([]),S(!0),Hc.searchPresentations(e.store.id,e.turn.id,t).then((function(e){var t=e.data.map((function(e){return{id:e.id,description:e.description,price:e.price,type:e.type}}));y(t),S(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar las presentaciones.")}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"section-space-list-bottom"},"Lista de productos"),r.a.createElement(zr.b,{id:"inventory-list",size:"small",rowKey:"id",dataSource:b,renderItem:function(e){var t,a;return r.a.createElement(zr.b.Item,null,r.a.createElement(T.a,{gutter:16,align:"bottom",className:"section-space-field w-100",key:e.id},r.a.createElement(I.a,{sm:1},r.a.createElement("div",{className:"title-space-bottom text-bold"},e.id)),r.a.createElement(I.a,{sm:9},1===e.id&&r.a.createElement("div",{className:"title-space-field pl-2"},"Productos"),r.a.createElement(Ke.a,{className:"single-select",showSearch:!0,value:null===u||void 0===u||null===(t=u.find((function(t){return t.id===e.product&&t.type===e.type})))||void 0===t?void 0:t.description,placeholder:"Nombre o SKU del producto",notFoundContent:x?r.a.createElement(Pt.a,{size:"small"}):null,filterOption:!1,onSearch:Rr()(D,800),onChange:function(t){S(!1),function(e,t){var a=e.split("-"),n=u.find((function(e){return e.id===Number(a[0])&&e.type===a[1]}));C(null===n||void 0===n?void 0:n.id,t.id,"product"),C(null===n||void 0===n?void 0:n.type,t.id,"type"),C(null===n||void 0===n?void 0:n.price,t.id,"price"),C(t.price*(""!==t.units?t.units:0),t.id,"total")}(t,e)},size:"large",style:{width:"100%"}},j.map((function(e,t){return r.a.createElement(ro,{key:t,value:"".concat(e.id,"-").concat(e.type)},e.description)})))),r.a.createElement(I.a,{sm:4},1===e.id&&r.a.createElement("div",{className:"title-space-field text-center"},"Precio unitario"),r.a.createElement(w.a,{disabled:!e.product||!c([51]),value:e.price,onChange:function(t){return function(e,t){C(e,t.id),C(t.price*(""!==t.units?t.units:0),t.id,"total")}(t,e)},placeholder:"Precio unitario",name:"price",size:"large",min:"0",type:"number"})),r.a.createElement(I.a,{sm:4},1===e.id&&r.a.createElement("div",{className:"title-space-field text-center"},"No. Unidades"),r.a.createElement(w.a,{disabled:!e.product&&!0,value:e.units,onChange:function(t){return function(e,t){C(e,t.id),C(t.price*(""!==t.units?t.units:0),t.id,"total")}(t,e)},placeholder:"No. Unidades",name:"units",size:"large",min:"0",type:"number"})),r.a.createElement(I.a,{sm:3},1===e.id&&r.a.createElement("div",{className:"title-space-field text-center"},"Total"),r.a.createElement(w.a,{disabled:!0,value:"Q ".concat(null===(a=e.units*e.price)||void 0===a?void 0:a.toFixed(2)),placeholder:"Q 0.00",name:"total",size:"large",min:"0",className:"total-product"})),r.a.createElement(I.a,{sm:3,className:"center-flex-div"},r.a.createElement(P.a,{type:"link",className:"title-space-bottom cancel-button px-0 m-0",onClick:function(t){return function(e,t){if(1!==b.length){var a=b.filter((function(e){return e.id!==t}));a.map((function(e,t){return e.id=t+1})),E(a)}}(0,e.id)}},"Eliminar"))))},footer:r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{sm:1}),r.a.createElement(I.a,{sm:9},r.a.createElement("div",{className:"title-tendero dashed-border-button",onClick:function(){var e=Object.assign(JSON.parse(o)[0],{id:b.length+1}),t=[].concat(Object(wt.a)(b),[e]);E(t)}},r.a.createElement("svg",{className:"svg",viewBox:"0 0 300 100",preserveAspectRatio:"none"},r.a.createElement("path",{className:"path",d:"M0,0 300,0 300,100 0,100z"})),r.a.createElement("span",{className:"text"},"Agregar Producto"))),r.a.createElement(I.a,{sm:14}))}))},oo=a(2230),io=a(2231);var lo=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],o=a[1],l=function(){e.visibleStatus(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kc.a,{visible:e.visible,centered:!0,footer:[r.a.createElement(P.a,{key:"back",onClick:l,className:"cancel-button"},"Cancelar"),r.a.createElement(P.a,{key:"submit",type:"primary",onClick:function(){var t={id:null,name:c};e.addClient(t),o(null)},className:"title-tendero new-button"},"Agregar")],onCancel:l,className:"sellList-modal"},r.a.createElement(w.a,{onChange:function(e){return o(e.target.value)},placeholder:"Nuevo Cliente",size:"large"})))},so=a(2227),uo=w.a.TextArea;var mo=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0],c=te(a).hasPermissions,o=Object(n.useState)([]),l=Object(i.a)(o,2),s=l[0],u=l[1],p=Object(n.useState)({}),g=Object(i.a)(p,2),h=g[0],b=g[1],E=Object(n.useState)(0),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)(0),_=Object(i.a)(y,2),x=_[0],S=_[1],k=Object(n.useState)(""),C=Object(i.a)(k,2),P=C[0],F=C[1],A=Object(n.useState)(""),U=Object(i.a)(A,2),z=U[0],B=U[1],R=Object(n.useState)(""),L=Object(i.a)(R,2),q=L[0],H=L[1],K=Object(n.useState)(null),G=Object(i.a)(K,2),J=G[0],Q=G[1],Z=Object(n.useState)(null),Y=Object(i.a)(Z,2),V=Y[0],W=Y[1],$=Object(n.useState)(null),X=Object(i.a)($,2),ee=X[0],ne=X[1],re=Object(n.useState)(null),ce=Object(i.a)(re,2),oe=ce[0],ie=ce[1],le=Object(n.useState)([]),se=Object(i.a)(le,2),ue=se[0],de=se[1],me=Object(n.useState)(!1),pe=Object(i.a)(me,2),fe=pe[0],ge=pe[1],he=Object(n.useState)(!1),be=Object(i.a)(he,2),Ee=be[0],ve=be[1],Oe=Object(n.useState)(null),je=Object(i.a)(Oe,2),ye=je[0],_e=je[1];Object(n.useEffect)((function(){S(e.total),Ne()}),[]),Object(n.useEffect)((function(){if(e.saveSell){var t=!0;if([q,J,ee,V,oe].some((function(e){return!e}))&&(t=!1,f.a.warning("Todos los campos son obligatorios")),"CASH"===h.name&&Number(O)<Number(x)&&(t=!1,f.a.warning("El monto recibido es inferior al total")),Le.validateEmail(oe)||(t=!1,f.a.warning("Ingrese un email valido")),Le.validateNit(J)||(t=!1,f.a.warning("Ingrese un NIT valido")),Le.validateNumber(ee)&&(t=!1,f.a.warning("Ingrese un Tel\xe9fono valido")),!t)return e.sellUnsaved&&e.sellUnsaved();var n=e.productsList.map((function(e){return{id:e.product,quantity:parseInt(e.units),unit_price:parseFloat(e.price),type:e.type}})),r={store_id:e.store.id,store_turn_id:a.turn.id,payment_method_id:h.id,description:"CREDIT"===h.name?P:z,name:q,nit:J.toUpperCase(),address:V,phone:ee,email:oe,items:n};e.closeSell(r,t)}else e.sellUnsaved&&e.sellUnsaved()}),[e.saveSell]),Object(n.useEffect)((function(){if(e.completeSell){if("CASH"===h.name&&Number(O)<Number(x))return f.a.warning("El monto recibido es inferior al total"),e.sellUncompleted&&e.sellUncompleted();var t={store_id:e.store.id,store_turn_id:a.turn.id,payment_method_id:h.id};e.paySell(t,e.sellInfo.id)}else e.sellUncompleted&&e.sellUncompleted()}),[e.completeSell]),Object(n.useEffect)((function(){e.edit&&(S(e.sellInfo.total),H(e.sellInfo.client_name),Q(e.sellInfo.nit),W(e.sellInfo.address),ne(e.sellInfo.phone),ie(e.sellInfo.email))}),[e.sellInfo]);var Ne=function(){ve(!0),Hc.getAllPaymentMethods().then(function(){var e=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=8;break}return e.next=3,Xc("paymentMethods");case 3:a=e.sent,u(a),b(a.find((function(e){return"CASH"===e.name}))),e.next=11;break;case 8:u(t.data),b(t.data.find((function(e){return"CASH"===e.name}))),Wc(t.data,"paymentMethods");case 11:ve(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),f.a.error("Error en al cargar los medios de pago"),ve(!1)}))},xe=function(e){if("Enter"===e.key||"searchButton"===e){if(!Le.validateNit(J))return f.a.warning("Ingrese un NIT valido");ge(!0),Ot.clientOptions({nit:J}).then((function(e){var t,a,n,r;if("Unauthenticated."===e)throw new Error("Unauthenticated");if(!e.data||!e.data.data||0===e.data.data.length)return W(null),ne(null),ie(null),H(""),ge(!1),f.a.warning("El NIT que ingreso no se encuentra registrado");var c=e.data.data[0],o=c.address,i=c.name,l=c.companies;W(o),ne(l[0]&&(null===(t=l[0])||void 0===t||null===(a=t.pivot)||void 0===a?void 0:a.phone)),ie(l[0]&&(null===(n=l[0])||void 0===n||null===(r=n.pivot)||void 0===r?void 0:r.email)),H(i),ge(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar la informacion del cliente."),ge(!1)}))}},Se=r.a.createElement(M.a,{className:"search-addon-after",onClick:function(e){return xe("searchButton")}}),we=r.a.createElement(Pt.a,{indicator:r.a.createElement(so.a,{style:{fontSize:24},spin:!0})});return r.a.createElement(r.a.Fragment,null,r.a.createElement(lo,{visible:ye,addClient:function(e){de([].concat(Object(wt.a)(ue),[e])),_e(!1)},visibleStatus:function(e){return _e(e)}}),r.a.createElement("h4",{className:"section-space-list-bottom"},e.edit?"Pago de cuenta por cobrar":"Cobro de producto"),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{sm:12,className:Ee&&"payment-methods"},Ee?r.a.createElement($r,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title-space-field title-space-top pl-2"},"M\xe9todo de pago"),r.a.createElement(T.a,{gutter:20,align:"top"},s.map((function(t,a){return"CREDIT"===t.name&&e.edit||"CREDIT"===t.name&&!c([58])?"":r.a.createElement(I.a,{sm:8,key:a},r.a.createElement(D.a,{onClick:function(){return b(t)},className:h.name===t.name&&"active"},function(e){var t;switch(e){case"CASH":t=r.a.createElement(Oc.a,null);break;case"CARD":t=r.a.createElement(N.a,null);break;case"CREDIT":t=r.a.createElement(oo.a,null);break;default:t=r.a.createElement(io.a,null)}return t}(t.name),Le.jsUcfirst(t.name)))})),r.a.createElement(I.a,{sm:24},"CASH"===h.name&&r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{sm:12},r.a.createElement("div",{className:"title-space-field title-space-top pl-2"},"Efectivo recibido"),r.a.createElement(w.a,{prefix:"Q",value:O,onChange:function(e){return j(e.target.value)},placeholder:"Ingresa el monto recibido",size:"large"}),r.a.createElement("div",{className:"title-space-field title-space-top pl-2"},"Total"),r.a.createElement(w.a,{disabled:!0,value:"Q ".concat(Number(x).toFixed(2)),size:"large"})),r.a.createElement(I.a,{sm:12,className:"cash-change"},"Cambio: ",r.a.createElement("span",null,"Q ",Number(O-x<0?0:O-x).toFixed(2))))),"CARD"===h.name&&r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{sm:24},r.a.createElement("div",{className:"title-space-field title-space-top pl-2"},"1) Haz el cobro en tu dispositivo para cobros con tarjeta."),r.a.createElement("div",{className:"title-space-field title-space-top pl-2"},'2) Luego, termina la operaci\xf3n presionando el bot\xf3n "Finalizar venta".')))),c([58])&&"CREDIT"===h.name&&!e.edit&&r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{sm:24},r.a.createElement("div",{className:"title-space-field title-space-top pl-2"},"Datos de cobro"),r.a.createElement(uo,{onChange:function(e){return F(e.target.value)},placeholder:"Descripci\xf3n de cr\xe9dito/vale",size:"large",rows:3})))),"CASH"!==h.name&&"CARD"!==h.name&&"CREDIT"!==h.name&&r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{sm:24},r.a.createElement(w.a,{onChange:function(e){return B(e.target.value)},placeholder:"Descripci\xf3n",size:"large"})))))))),r.a.createElement(I.a,{sm:2},r.a.createElement("div",{className:"sell-divider"})),r.a.createElement(I.a,{sm:10},r.a.createElement(T.a,{gutter:16},r.a.createElement("div",{className:"title-space-field title-space-top pl-2"},"Facturaci\xf3n"),r.a.createElement(I.a,{sm:24,className:"client-info"},r.a.createElement(w.a,{disabled:e.edit,onKeyDown:xe,addonAfter:fe?we:Se,onChange:function(e){return Q(e.target.value)},value:J,placeholder:"NIT (presiona enter para buscar)",size:"large"}),r.a.createElement(w.a,{disabled:e.edit,value:q,onChange:function(e){return H(e.target.value)},placeholder:"Nombre cliente",size:"large"}),r.a.createElement(w.a,{disabled:e.edit,value:V,onChange:function(e){return W(e.target.value)},placeholder:"Direcci\xf3n",size:"large"}),r.a.createElement(w.a,{disabled:e.edit,value:ee,onChange:function(e){return ne(e.target.value)},placeholder:"Tel\xe9fono",size:"large"}),r.a.createElement(w.a,{disabled:e.edit,value:oe,onChange:function(e){return ie(e.target.value)},placeholder:"Correo electr\xf3nico",size:"large"}),r.a.createElement("div",{className:"total-bill"},r.a.createElement("div",null,"TOTAL A PAGAR",r.a.createElement("span",null,"Q ",Number(x).toFixed(2)))))))))};var po=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,2),c=a[0].auth,o=a[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(!0),p=Object(i.a)(m,2),h=p[0],b=p[1],E=Object(n.useState)(0),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)(!1),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)(!1),w=Object(i.a)(S,2),k=w[0],C=w[1],D=Object(n.useState)(!1),F=Object(i.a)(D,2),A=F[0],U=F[1],z=Object(n.useState)(!1),B=Object(i.a)(z,2),R=B[0],M=B[1],L=function(){b(!0),e.closeTab("5"),M(!0)},q=function(e){Hc.getStoreCash(e).then((function(e){o({type:"TURN CASH",payload:e.data[0]}),U(!1),L()}))},H=function(e){var t={store_id:e[0].store_id,sells:e.map((function(e){return{seller_id:c.id,store_turn_id:e.store_turn_id,payment_method_id:e.payment_method_id,description:e.description,name:e.name,nit:e.nit,phone:e.phone,email:e.email,items:e.items}}))};Hc.saveOfflineSells(t).then((function(e){e&&eo("sells")})).catch((function(e){console.log(e)}))},K=function(e){var t=!1;u.map((function(e){return t=e.total>0})),t?(b(e),x(e)):f.a.warning("Todos los campos son obligatorios")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{gutter:16,className:"sell-row"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},h?r.a.createElement(co,{products:function(e){var t=0;e.map((function(e){return t+=e.total})),j(t),d(e)},productsList:u,edit:N,store:e.store,turn:e.turn,isSellCancelled:R,uncancellSell:function(e){return M(!1)}}):r.a.createElement(mo,{total:O,sellUnsaved:function(e){return C(!1)},saveSell:k,productsList:u,closeSell:function(e,t){t&&(U(!0),Xc("sells").then((function(e){e.length>0&&H(e)})),Hc.saveSell(e).then((function(t){t||$c(e,"sells"),f.a.success("Se ha guardado la venta"),q(t.store_id)})).catch((function(e){return console.log(e),f.a.error("Error al guardar la venta"),!1}))),C(!1)},store:e.store,turn:e.turn})),r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24,className:"footer-sell"},r.a.createElement(T.a,{gutter:16,justify:"space-between",align:"middle"},r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(I.a,{xs:4,sm:4,md:4,lg:4},r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:L},"Cancelar venta")),r.a.createElement(I.a,{xs:20,sm:20,md:20,lg:20},h?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"next-button"},r.a.createElement("div",null,"TOTAL ",r.a.createElement("span",null,"Q ",Number(O).toFixed(2))),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){return K(!1)}},"Cobrar"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"next-button"},r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button back-button",onClick:function(){return K(!0)}},"< Regresar"),r.a.createElement(P.a,{loading:A,htmlType:"submit",className:"title-tendero new-button",onClick:function(){C(!0)}},"Finalizar venta"))))))))};var fo=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0],c=te(a).hasPermissions,o=Object(n.useState)(!1),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)([]),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1];Object(n.useEffect)((function(){"2"===e.activeKey&&S(e.store.id)}),[e.activeKey]);var N=[{title:"Nombre",dataIndex:"client_name",render:function(e){return r.a.createElement("span",{style:{textAlign:"left"}},e)}},{title:"Descripci\xf3n",dataIndex:"description",render:function(e){return r.a.createElement("span",null,e)}},{title:"Fecha",dataIndex:"date",render:function(e){return r.a.createElement("span",null,e)}},{title:"Cantidad",dataIndex:"total",render:function(e){return r.a.createElement("span",null,e)}},{title:"",dataIndex:"",render:function(e){return c([58])&&r.a.createElement(P.a,{className:"pay-receivable",onClick:function(t){return x(e)}},"Pagar")}}],x=function(t){u(!0),Ot.clientOptions({id:t.client_id}).then((function(a){var n,r,c=a.data.data[0],o=c.nit,i=c.address,l=c.companies,s=Object(H.a)(Object(H.a)({},t),{},{email:null===(n=l[0])||void 0===n?void 0:n.pivot.email,phone:null===(r=l[0])||void 0===r?void 0:r.pivot.phone,nit:o,address:i});e.pay(s)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar los datos del cliente"),u(!1)}))},S=function(e){u(!0),Hc.getReceivables(e).then((function(e){v(w(e)),_(null!==e.data.next_page_url),g(e.data.next_page_url),u(!1)})).catch((function(e){console.log(e),f.a.error("No se ha podido cargar las ventas por cobrar"),u(!1)}))},w=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,id:e.id,client_id:e.sell.client.id,client_name:e.sell.client.name,description:e.sell.description,date:Le.formatDate(e.sell.date),total:e.sell.total}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"section-space-list-bottom"},"Cuentas por cobrar"),r.a.createElement(F.a,{className:"CustomTableClass",dataSource:E,columns:N,pagination:!1,loading:s,rowKey:function(e,t){return t}}),r.a.createElement(Ve,{handlerButton:function(){_(!1),y&&(u(!0),Hc.getNextPage(p).then((function(e){v(E.concat(w(e))),_(null!==e.data.next_page_url),g(e.data.next_page_url),u(!1)})))},moreInfo:y}))};var go=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,2),c=(a[0],a[1]),o=Object(n.useState)(!1),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(!1),m=Object(i.a)(d,2),p=m[0],h=m[1],b=Object(n.useState)([]),E=Object(i.a)(b,2),v=E[0],O=E[1],j=Object(n.useState)(!1),y=Object(i.a)(j,2),_=y[0],N=y[1],x=function(e){Hc.getStoreCash(e).then((function(e){c({type:"TURN CASH",payload:e.data[0]}),N(!1),u(!1)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{gutter:16,className:"sell-row"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},s?r.a.createElement(mo,{edit:!0,sellUncompleted:function(e){return h(!1)},sellInfo:v,completeSell:p,store:e.store,turn:e.turn,paySell:function(e,t){h(!1),N(!0),Hc.completeSell(t,e).then((function(e){f.a.success("Se ha guardado el pago exitosamente"),x(e.sell.store_id)})).catch((function(e){console.log(e),f.a.error("No se ha podido guardar el pago"),N(!1)}))}}):r.a.createElement(fo,{activeKey:e.activeKey,completeSell:p,pay:function(e){O(e),u(!0)},store:e.store})),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(I.a,{sm:24},r.a.createElement("div",{className:"pay-buttons"},r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){return u(!1)}},"Cancelar"),r.a.createElement(P.a,{loading:_,htmlType:"submit",className:"title-tendero new-button",onClick:function(){return h(!0)}},"Finalizar pago"))))))};var ho=function(e){var t,a=Object(n.useContext)(ae),c=Object(i.a)(a,2),o=c[0],l=c[1],s=te(o).hasPermissions,u=Object(n.useState)(!1),p=Object(i.a)(u,2),h=p[0],b=p[1],E=Object(n.useState)(""),v=Object(i.a)(E,2),O=v[0],j=v[1],y=Object(n.useState)([]),_=Object(i.a)(y,2),N=_[0],x=_[1],S=Object(n.useState)({}),C=Object(i.a)(S,2),A=C[0],U=C[1],z=Object(n.useState)(!1),B=Object(i.a)(z,2),R=B[0],M=B[1],L=Object(n.useState)(!0),q=Object(i.a)(L,2),K=q[0],G=q[1],J=Object(n.useState)(!1),Q=Object(i.a)(J,2),Z=Q[0],Y=Q[1],V=Object(n.useState)(!1),W=Object(i.a)(V,2),$=W[0],X=W[1],ee=Object(n.useState)({}),ne=Object(i.a)(ee,2),re=ne[0],ce=ne[1];Object(n.useEffect)((function(){"3"===e.activeKey&&(X(!1),ie())}),[e.activeKey]);var oe=[{title:"No. boleta",dataIndex:"deposit_number",render:function(e){return r.a.createElement("span",{style:{textAlign:"left"}},e)}},{title:"Fecha",dataIndex:"date",render:function(e){return r.a.createElement("span",null,vt()(e).format("YYYY-MM-DD"))}},{title:"Cantidad",dataIndex:"amount",render:function(e){return r.a.createElement("span",null,e)}},{title:"",dataIndex:"deposit_images",render:function(e){return r.a.createElement("div",{className:"images-container"},e.length>0&&e.map((function(e,t){return r.a.createElement(Jc,{key:t,withOverlay:!1,img:e,index:t,alt:"deposito"+t,showImageInModal:function(e){return pe(e)},className:"table-image"})})))}},{align:"right",title:"",dataIndex:"id",render:function(e,t){return s([43])&&r.a.createElement("span",null,r.a.createElement(k.a,{placement:"left",content:r.a.createElement("div",null,r.a.createElement("span",{className:"user-options-items",onClick:function(){return le(t)}},"Editar")),trigger:"click"},r.a.createElement(P.a,{shape:"circle",className:"enterprise-settings-button"},r.a.createElement(Gc.MoreOutlined,null))))}}],ie=function(){b(!0),Hc.getAllDeposits(e.storeId).then((function(e){x(e.data.data),M(null!==e.data.next_page_url),j(e.data.next_page_url),b(!1)})).catch((function(e){f.a.error("No se ha podido cargar los depositos."),b(!1)}))},le=function(e){G(!1),Y(!0),U(e)},se=function(e){Object.keys(e.errors).map((function(t){return"deposit_number"===t?f.a.error(e.errors[t][0].replace("deposit number","N\xfamero de boleta")):f.a.error(e.errors[t]),null}))},ue=function(e){Hc.getStoreCash(e).then((function(e){l({type:"TURN CASH",payload:e.data[0]}),G(!0),U({}),Y(!1),b(!1),ie()}))},de=function(e){var t=e.target,a=t.name,n=t.value;U(Object(H.a)(Object(H.a)({},A),{},Object(ut.a)({},a,n)))},me=function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.persist(),a=Array.from(t.target.files).map(function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.name,e.next=3,Le.fileToBase64(t);case 3:return e.t1=e.sent,e.abrupt("return",{title:e.t0,base64:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(a);case 4:a=e.sent,a=[].concat(Object(wt.a)(A.deposit_images||[]),Object(wt.a)(a)),n=Object(H.a)(Object(H.a)({},A),{},{deposit_images:a}),U(n),t.target.value=null;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(e){ce(e),X(!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qc,{visible:$,img:re,onCancel:function(){return X(!1)}}),K?r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"section-space-list-bottom"},"Dep\xf3sitos"),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:19,sm:19,md:19,lg:19},r.a.createElement(w.a,{prefix:r.a.createElement(Gc.SearchOutlined,{className:"tendero-table-search-icon"}),placeholder:"Buscar boleta",className:"tendero-table-search custom-search",size:"large",onChange:function(e){}})),r.a.createElement(I.a,{xs:5,sm:5,md:5,lg:5},s([42])&&r.a.createElement(P.a,{className:"pay-receivable new-deposit",onClick:function(){G(!1)}},"Nuevo dep\xf3sito"))),r.a.createElement(F.a,{id:"deposits-table",className:"CustomTableClass",dataSource:N,columns:oe,pagination:!1,loading:h,rowKey:function(e,t){return t}}),r.a.createElement(Ve,{handlerButton:function(){M(!1),R&&(b(!0),Hc.getNextPage(O).then((function(e){x(N.concat(e.data.data)),M(null!==e.data.next_page_url),j(e.data.next_page_url),b(!1)})))},moreInfo:R})):r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"section-space-list-bottom"},Z?"Editar dep\xf3sito":"Nuevo dep\xf3sito"),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:11,sm:11,md:11,lg:11},r.a.createElement("div",{className:"title-space-field pl-2"},"N\xfamero de boleta"),r.a.createElement(w.a,{placeholder:"Ingresa el No. de boleta",value:A.deposit_number,size:"large",name:"deposit_number",onChange:de})),r.a.createElement(I.a,{xs:7,sm:7,md:7,lg:7},r.a.createElement("div",{className:"title-space-field pl-2"},"Cantidad"),r.a.createElement(w.a,{placeholder:"Cantidad de dep\xf3sito",value:A.amount,size:"large",name:"amount",onChange:de}))),r.a.createElement(T.a,{gutter:16,className:"deposit-images"},(null===A||void 0===A||null===(t=A.deposit_images)||void 0===t?void 0:t.length)>0&&A.deposit_images.map((function(e,t){return r.a.createElement(Jc,{key:t,index:t,img:e,showImageInModal:function(e){return pe(e)},deleteImage:function(e){return function(e){var t=A.deposit_images.filter((function(t,a){return a!==e})),a=Object(H.a)(Object(H.a)({},A),{},{deposit_images:t});U(a),f.a.success("Imagen eliminada!")}(e)},withOverlay:!0})})),r.a.createElement(D.a,{className:"add-deposit-image"},r.a.createElement(Gc.PlusOutlined,null),"Subir",r.a.createElement("label",{htmlFor:"image-upload-input",className:"image-upload"},r.a.createElement("input",{type:"file",id:"image-upload-input",accept:".jpeg, .jpg, .png",onChange:me,multiple:!0})))),r.a.createElement(T.a,{gutter:16,className:"deposit-images"},r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(I.a,{sm:24},r.a.createElement("div",{className:"pay-buttons"},r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){G(!0),U({}),Y(!1)}},"Cancelar"),r.a.createElement(P.a,{loading:h,htmlType:"submit",className:"title-tendero new-button",onClick:function(){var t;if(Le.validateNull(A.deposit_number)||Le.validateNull(A.amount)||Le.validateNull(A.deposit_images))return f.a.warning("Todos los campos son obligatorios");if(!Number(A.deposit_number)||A.deposit_number.includes(".")||A.deposit_number.includes("-")||A.deposit_number.includes("+"))return f.a.warning("El campo N\xfamero de boleta solo acepta valores num\xe9ricos");if(!Number(A.amount)||A.amount.includes("-")||A.amount.includes("+"))return f.a.warning("El campo Cantidad solo acepta valores num\xe9ricos");var a=Z?A.id:null,n={store_id:Z?A.store_id:e.storeId,store_turn_id:o.turn.id,deposit_number:A.deposit_number,amount:A.amount,images:(null===A||void 0===A||null===(t=A.deposit_images)||void 0===t?void 0:t.length)>0?A.deposit_images.map((function(e){return{title:e.title,base64:e.base64}})):[]};switch(b(!0),Z){case!0:Hc.editDeposit(a,n).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?(se(e),b(!1)):(f.a.success("Dep\xf3sito actualizado exitosamente."),ue(e.store_id))})).catch((function(e){f.a.error("No se ha podido actualizar el dep\xf3sito."),G(!0),b(!1),U({}),Y(!1)}));break;case!1:Hc.storeDeposit(a,n).then((function(e){var t;e.errors&&(null===(t=Object.keys(e.errors))||void 0===t?void 0:t.length)>0?(se(e),b(!1)):(f.a.success("Dep\xf3sito cargado exitosamente."),ue(e.store_id))})).catch((function(e){f.a.error("No se ha podido cargar el dep\xf3sito."),G(!0),b(!1),U({}),Y(!1)}))}}},Z?"Actualizar deposito":"Finalizar deposito"))))))};var bo=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{gutter:16,className:"sell-row"},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(ho,{activeKey:e.activeKey,storeTurnId:e.storeTurnId,storeId:e.storeId}))))};var Eo=function(e){var t=function(){e.visibleStatus(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kc.a,{visible:e.visible,centered:!0,footer:[r.a.createElement(P.a,{key:"back",onClick:t,className:"cancel-button"},"Cancelar"),r.a.createElement(P.a,{key:"submit",type:"primary",onClick:function(){e.onDelete()},className:"title-tendero new-button"},"Anular")],onCancel:t,className:"sellList-modal"},r.a.createElement(Gc.ExclamationCircleOutlined,null),r.a.createElement("span",null,"\xbfEst\xe1s seguro que deseas anular esta factura?"),r.a.createElement("span",null,"Esta acci\xf3n es irreversible.")))},vo=function(e){var t=e.invoice,a=e.visible,c=e.visibleStatus,o=Object(n.useState)(!0),l=Object(i.a)(o,2),s=l[0],u=l[1];return r.a.createElement(Kc.a,{visible:a,centered:!0,className:"invoice-modal",onCancel:function(){c(!1),u(!0)},title:"".concat(t.invoice,".pdf")},t.invoice_link&&r.a.createElement(Pt.a,{spinning:s},r.a.createElement("object",{data:"https://docs.google.com/viewer?url=".concat(t.invoice_link,"&embedded=true"),onLoad:function(){return u(!1)},type:"application/pdf",width:"100%",height:"100%"},r.a.createElement("p",null,"Tu navegador no tiene el plugin para previsualizar documentos pdf."),r.a.createElement("p",null,"Puedes descargarte el archivo desde ",r.a.createElement("a",{href:t.invoice_link},"aqu\xed")))))};var Oo=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,2),c=a[0],o=a[1],l=te(c).hasPermissions,s=Object(n.useState)(!1),u=Object(i.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(""),h=Object(i.a)(p,2),b=h[0],E=h[1],v=Object(n.useState)([]),O=Object(i.a)(v,2),j=O[0],y=O[1],_=Object(n.useState)(!1),N=Object(i.a)(_,2),x=N[0],S=N[1],C=Object(n.useState)(!1),D=Object(i.a)(C,2),A=D[0],U=D[1],z=Object(n.useState)(!1),B=Object(i.a)(z,2),R=B[0],M=B[1],L=Object(n.useState)({}),q=Object(i.a)(L,2),H=q[0],K=q[1],G=Object(n.useState)({}),J=Object(i.a)(G,2),Q=J[0],Z=J[1];Object(n.useEffect)((function(){"4"===e.activeKey&&V(e.store.id)}),[e.activeKey]);var Y=[{title:"Fecha",dataIndex:"date",render:function(e){return r.a.createElement("span",null,e)}},{title:"Cantidad",dataIndex:"total",render:function(e){return r.a.createElement("span",null,e)}},{title:"Factura",dataIndex:"invoice",render:function(e){return r.a.createElement("span",{style:{textAlign:"left"}},e)}},{title:"M\xe9todo de pago",dataIndex:"payment_method",render:function(e){return r.a.createElement("span",null,e)}},{title:"Status",dataIndex:"status",render:function(e){return r.a.createElement("span",null,e)}},{title:"",dataIndex:"invoice",render:function(e){return r.a.createElement("span",null,"".concat(e,".pdf"))}},{align:"right",title:"",dataIndex:"key",render:function(e,t){return r.a.createElement("span",null,(l([48])||t.invoice_link)&&r.a.createElement(k.a,{placement:"left",content:r.a.createElement("div",null,l([48])&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"user-options-items",onClick:function(){return $(t)}},"Anular Factura"),t.invoice_link&&r.a.createElement(g.a,{className:"divider-enterprise-margins",type:"horizontal"})),t.invoice_link&&r.a.createElement("span",{className:"user-options-items",onClick:function(){return ee(t)}},"Ver Factura")),trigger:"click"},r.a.createElement(P.a,{shape:"circle",className:"enterprise-settings-button"},r.a.createElement(Gc.MoreOutlined,null))))}}],V=function(e){m(!0),Hc.getSells(e).then((function(e){y(W(e)),S(null!==e.data.next_page_url),E(e.data.next_page_url),m(!1)})).catch((function(e){console.log(e),f.a.error("Error al cargar las ventas"),m(!1)}))},W=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){var a;return{key:t,id:e.id,date:Le.formatDate(e.date),total:e.total,invoice:e.sell_invoice.invoice,invoice_link:e.invoice_link,payment_method:null===(a=e.sell_payment)||void 0===a?void 0:a.payment_method.name,status:Le.jsUcfirst(e.status)}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")},$=function(e){A?(m(!0),Hc.sellDelete(Q.id).then((function(e){f.a.success("Se ha eliminado la venta"),X(e.store_id)})).catch((function(e){console.log(e),f.a.error("Error al eliminar la venta"),m(!1)})),U(!1)):(U(!0),Z(e))},X=function(t){Hc.getStoreCash(t).then((function(t){o({type:"TURN CASH",payload:t.data[0]}),V(e.store.id)}))},ee=function(e){e?(K(e),M(!0)):(K({}),M(!1))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"section-space-list-bottom"},"Lista de ventas"),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(w.a,{prefix:r.a.createElement(Gc.SearchOutlined,{className:"tendero-table-search-icon"}),placeholder:"Buscar factura",className:"tendero-table-search custom-search",size:"large",onChange:function(e){}}))),r.a.createElement(F.a,{className:"CustomTableClass",dataSource:j,columns:Y,pagination:!1,loading:d,rowKey:function(e,t){return t}}),r.a.createElement(Ve,{handlerButton:function(){S(!1),x&&(m(!0),Hc.getNextPage(b).then((function(e){y(j.concat(W(e))),S(null!==e.data.next_page_url),E(e.data.next_page_url),m(!1)})))},moreInfo:x}),r.a.createElement(Eo,{visible:A,onDelete:$,visibleStatus:function(e){return U(e)}}),r.a.createElement(vo,{visible:R,invoice:H,visibleStatus:function(e){return ee(e)}}))},jo=kt.a.TabPane;var yo=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,2),c=a[0],o=a[1],l=te(c).hasPermissions,s=Object(n.useState)(!1),u=Object(i.a)(s,2),p=u[0],g=u[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),E=b[0],v=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],_=j[1],x=Object(n.useState)("6"),S=Object(i.a)(x,2),w=S[0],k=S[1],C=Object(n.useState)(null),P=Object(i.a)(C,2),D=P[0],F=P[1],A=Object(n.useState)(null),U=Object(i.a)(A,2),z=U[0],B=U[1],R=Object(n.useState)(!0),M=Object(i.a)(R,2),L=M[0],q=M[1];Object(n.useEffect)((function(){H()}),[]);var H=function(){Xc("turn").then((function(e){e.length>0?Hc.getStoreTurn(e[0].turn.id).then((function(t){1===(null===t||void 0===t?void 0:t.is_open)?Hc.getStoreCash(t.store_id).then((function(t){o({type:"TURN OPENED",payload:e[0].turn}),o({type:"TURN STORE",payload:e[0].store}),o({type:"TURN INFO",payload:e[0].turnInfo}),o({type:"TURN CASH",payload:t.data[0]}),F(e[0].store),B(e[0].turnInfo),v(!1),_(!0),k("5"),q(!1)})):(eo("turn"),eo("sells"),q(!1))})):q(!1)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt.a,{spinning:L},r.a.createElement(He,{title:"POS",pos:!0,showDrawer:function(){g(!0)},open:y,store:D,turnInfo:z}),r.a.createElement(no,{closable:function(){return g(!1)},visible:p,open:y,status:function(e){e?(v(!1),_(!0),k("5")):(v(!0),_(!1),k("6")),g(!1)},infoStore:function(e,t){F(e),B(t),Hc.getAllProducts(e.id,t.id).then(function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Wc(t.data,"products");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),f.a.error("No se ha podido cargar los productos.")})),Hc.getAllClients().then((function(e){Wc(e.data,"clients")})).catch((function(e){console.log(e),f.a.error("Error en al cargar los clientes")})),Hc.getAllPaymentMethods().then((function(e){Wc(e.data,"paymentMethods")})).catch((function(e){console.log(e),f.a.error("Error en al cargar los medios de pago")}))},storeId:null===D||void 0===D?void 0:D.id,storeTurnId:null===z||void 0===z?void 0:z.id}),r.a.createElement(kt.a,{id:"tenderoPosTabs",type:"card",tabPosition:"left",activeKey:w,onTabClick:function(e){return k(e)},disabled:E},l([46])&&r.a.createElement(jo,{tab:r.a.createElement("span",{className:"icon-tabs-pos"},r.a.createElement(Ec.a,null)," Venta"),key:"1",disabled:E},r.a.createElement(po,{closeTab:function(e){return k(e)},store:D,turn:z})),l([57])&&r.a.createElement(jo,{tab:r.a.createElement("span",{className:"icon-tabs-pos"},r.a.createElement(vc.a,null)," Por cobrar"),key:"2",disabled:E},r.a.createElement(go,{activeKey:w,store:D,turn:z})),l([41])&&r.a.createElement(jo,{tab:r.a.createElement("span",{className:"icon-tabs-pos"},r.a.createElement(Oc.a,null)," Dep\xf3sitos"),key:"3",disabled:E},r.a.createElement(bo,{activeKey:w,storeId:null===D||void 0===D?void 0:D.id,storeTurnId:null===z||void 0===z?void 0:z.id})),l([45])&&r.a.createElement(jo,{tab:r.a.createElement("span",{className:"icon-tabs-pos"},r.a.createElement(jc.a,null)," Lista de ventas"),key:"4",disabled:E},r.a.createElement(Oo,{activeKey:w,store:D})),r.a.createElement(jo,{key:"5",disabled:!0},r.a.createElement(N.a,{className:"icon-tab-disabled"}),r.a.createElement("span",{className:"text-tab-disabled"},"Selecciona una opci\xf3n")),r.a.createElement(jo,{key:"6",disabled:!0},r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{span:24,className:"empty-section-container"},r.a.createElement("div",{className:"empty-section"},r.a.createElement("span",{className:"empty-section-message"},"Por favor inicia un turno para empezar a vender"))))))))},_o=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.stores_options,"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),No=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.users,"?paginate=0"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xo={getAllStores:_o,getDeposits:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.deposits,"?store_id=").concat(t,"&per_page=5"),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllUsers:No,getNextPage:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStore:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(W.a.stage.storesCash,"?id=").concat(t),{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),newCashAdjustment:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se("".concat(W.a.stage.cashAdjustment),t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},So=function(e){return r.a.createElement(D.a,null,r.a.createElement("img",{src:e.img.base64,alt:"deposit-"+e.index,onClick:function(){e.showImageInModal(e.img)}}))},wo=function(e){var t=e.img,a=e.visible,n=e.onCancel;return r.a.createElement(Kc.a,{visible:a,centered:!0,className:"deposit-modal",onCancel:n,title:t.title},r.a.createElement("img",{src:t.base64,alt:"deposit",style:{width:"100%"}}))};var ko=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),g=p[0],h=p[1],b=Object(n.useState)(""),E=Object(i.a)(b,2),v=E[0],O=E[1],j=Object(n.useState)(!1),y=Object(i.a)(j,2),_=y[0],N=y[1],x=Object(n.useState)({}),S=Object(i.a)(x,2),w=S[0],k=S[1];Object(n.useEffect)((function(){C(e.selectedOption)}),[e.selectedOption]);var C=function(e){o(!0),xo.getDeposits(e).then((function(e){h(A(e)),N(null!==e.data.next_page_url),O(e.data.next_page_url),o(!1)})).catch((function(e){console.log(e),f.a.error("No se han podido cargar los depositos."),o(!1)}))},P=[{title:"Tienda",dataIndex:"store_name",key:"store_name",render:function(e){return r.a.createElement("span",{style:{textAlign:"left"}},e)}},{title:"Usuario",dataIndex:"user_name",key:"user_name",render:function(e){return r.a.createElement("span",null,e)}},{title:"No. boleta",dataIndex:"invoce",key:"invoice",render:function(e){return r.a.createElement("span",null,e)}},{title:"Fecha",dataIndex:"date",key:"date",render:function(e){return r.a.createElement("span",null,e)}},{title:"Cantidad",dataIndex:"amount",key:"amount",render:function(e){return r.a.createElement("span",null,e)}},{title:"",dataIndex:"deposit_images",key:"deposit_images",render:function(e){return r.a.createElement("div",{className:"images-container"},e.length>0&&e.map((function(e,t){return r.a.createElement(So,{key:t,withOverlay:!1,img:e,index:t,alt:"deposito"+t,showImageInModal:function(e){return function(e){k(e),d(!0)}(e)},className:"table-image"})})))}}],A=function(t){if("Too Many Attempts."!==t)return(t.data.data||[]).map((function(t,a){return{key:a,store_name:e.shopsList.find((function(e){return e.id===t.store_id})).name,user_name:t.creator.name,invoce:t.deposit_number,date:Le.formatDate(t.date),amount:t.amount,deposit_images:t.deposit_images}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(wo,{visible:u,img:w,onCancel:function(){return d(!1)}}),r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{id:"deposits-table",className:"CustomTableClass",dataSource:g,columns:P,pagination:!1,loading:c,rowKey:"key"}),r.a.createElement(Ve,{handlerButton:function(){_&&(N(!1),o(!0),xo.getNextPage(v).then((function(e){h(g.concat(A(e))),N(null!==e.data.next_page_url),O(e.data.next_page_url),o(!1)})))},moreInfo:_})))))))},Co=Ke.a.Option;var Po=function(e){var t,a,n;return r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:7,sm:7,md:7,lg:7},r.a.createElement(Ke.a,{disabled:!(null===(t=e.turn)||void 0===t?void 0:t.is_open)&&!e.search&&!0,value:e.search||(null===(a=e.turn)||void 0===a?void 0:a.is_open)?e.selectedOption:null,className:"single-select",placeholder:"Selecciona una tienda",size:"large",style:{width:"100%"},onChange:function(t){e.setSelectedOption(t)}},null===(n=e.shopsList)||void 0===n?void 0:n.map((function(e,t){return r.a.createElement(Co,{key:e.id,value:e.id},e.name)})))),r.a.createElement(I.a,{xs:11,sm:11,md:11,lg:11},e.search&&r.a.createElement(w.a,{prefix:r.a.createElement(M.a,{className:"tendero-table-search-icon"}),placeholder:"Buscar",className:"tendero-table-search custom-search",size:"large",onChange:function(t){e.onSearch(t)}})))},To=function(e){var t=e.fetch,a=e.adjust,n=e.turn,c=e.shopsList,o=(e.search,e.fetchData),i=e.loading,l=e.onAdjust,s=e.selectedOption,u=e.component;return r.a.createElement(T.a,{gutter:16,className:"section-space-field"},s?a?(null===n||void 0===n?void 0:n.is_open)?r.a.createElement(I.a,{span:24,className:"margin-top-15"},r.a.createElement(u,{fetch:t,shopsList:c,fetchData:o,loading:i,onAdjust:l,selectedOption:s})):r.a.createElement(I.a,{span:24,className:"empty-section-container"},r.a.createElement("div",{className:"empty-section"},r.a.createElement("span",{className:"empty-section-message"},"Por favor abre el turno en la seccion POS"))):r.a.createElement(I.a,{span:24,className:"margin-top-15"},r.a.createElement(u,{shopsList:c,fetchData:o,loading:i,onAdjust:l,selectedOption:s})):r.a.createElement(I.a,{span:24,className:"empty-section-container"},r.a.createElement("div",{className:"empty-section"},a?(null===n||void 0===n?void 0:n.is_open)?r.a.createElement("span",{className:"empty-section-message"},"Por favor selecciona una tienda"):r.a.createElement("span",{className:"empty-section-message"},"Por favor abre el turno en la seccion POS"):r.a.createElement("span",{className:"empty-section-message"},"Por favor selecciona una tienda o realiza una busqueda"))))};var Io=function(e){return r.a.createElement("div",null,r.a.createElement(Po,{shopsList:e.shopsList,selectedOption:e.selectedOption,setSelectedOption:function(t){e.setSelectedOption(t)},search:!0,onSearch:function(e){}}),r.a.createElement(To,{component:ko,selectedOption:e.selectedOption,shopsList:e.shopsList}))},Do=a(2235);var Fo=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),g=(p[0],p[1],Object(n.useState)(!1)),h=Object(i.a)(g,2),b=h[0];h[1],Object(n.useEffect)((function(){E(e.selectedOption)}),[e.selectedOption,e.fetch]),Object(n.useEffect)((function(){o(e.loading)}),[e.loading]);var E=function(e){o(!0),xo.getStore(e).then((function(e){d(O(e)),o(!1)})).catch((function(e){console.log(e),f.a.error("No se han podido cargar los depositos."),o(!1)}))},v=[{title:"Tienda",dataIndex:"store_name",key:"store_name",render:function(e){return r.a.createElement("span",{style:{textAlign:"left"}},e)}},{title:"Efectivo en tienda",dataIndex:"store_cash",key:"store_cash",render:function(e){return r.a.createElement("span",null,"Q ",e)}},{align:"right",title:"",dataIndex:"key",render:function(t,a){return r.a.createElement("span",null,r.a.createElement(k.a,{placement:"left",content:r.a.createElement("div",null,r.a.createElement("span",{className:"user-options-items",onClick:function(){return e.onAdjust(a)}},"Ajustar efectivo")),trigger:"click"},r.a.createElement(P.a,{shape:"circle",className:"enterprise-settings-button"},r.a.createElement(Do.a,null))))}}],O=function(e){if("Too Many Attempts."!==e)return(e.data.data||[]).map((function(e,t){return{key:t,id:e.id,store_name:e.name,store_cash:e.petty_cash_amount}}));f.a.error("Se excedio el limte de peticiones, espera y recarga la aplicacion")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(D.a,{className:"card-border-radius"},r.a.createElement(T.a,null,r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement(F.a,{className:"CustomTableClass",dataSource:u,columns:v,pagination:!1,loading:c,rowKey:"key"}),r.a.createElement(Ve,{handlerButton:function(){},moreInfo:b})))))))},Ao=oe.a.Title;var Uo=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,1)[0].turn,c=Object(n.useState)(null),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(""),d=Object(i.a)(u,2),m=d[0],p=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",null,r.a.createElement(Ao,null,"Ajuste de efectivo"),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-list"},r.a.createElement(I.a,{sm:12},r.a.createElement("div",{className:"title-space-field title-space-top pl-2"},"Efectivo actual en tienda"),r.a.createElement(w.a,{value:"Q ".concat(e.adjust.store_cash),disabled:!0,size:"large"})),r.a.createElement(I.a,{sm:12},r.a.createElement("div",{className:"title-space-field title-space-top pl-2"},"\xbfCu\xe1nto efectivo tiene realmente la tienda?"),r.a.createElement(w.a,{onChange:function(e){return s(e.target.value)},size:"large",placeholder:"Escribe el total del efectivo en tienda"})),r.a.createElement(I.a,{sm:24},r.a.createElement("div",{className:"title-space-field title-space-top pl-2"},"\xbfPor qu\xe9 se esta ajustando el efectivo?"),r.a.createElement(w.a,{onChange:function(e){return p(e.target.value)},size:"large",placeholder:"Escribe la razon por la cual se hace el ajuste"})))),r.a.createElement("div",null,r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:function(){e.closable()}},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){var t={store_id:e.adjust.id,store_turn_id:a.id,amount:l-e.adjust.store_cash,description:m};e.closable(t,"save")}},"Ajustar"))))))))};var zo=function(e){var t=Object(n.useContext)(ae),a=Object(i.a)(t,2),c=a[0].turn,o=a[1],l=Object(n.useState)({}),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(!1),p=Object(i.a)(m,2),g=p[0],h=p[1],b=Object(n.useState)(!1),E=Object(i.a)(b,2),v=E[0],O=E[1],j=Object(n.useState)(!0),y=Object(i.a)(j,2),_=y[0],N=y[1],x=function(e){xo.getStore(e).then((function(e){o({type:"TURN CASH",payload:e.data.data[0]}),N(!0),O(!1)}))};return r.a.createElement("div",null,r.a.createElement(Po,{shopsList:e.shopsList,selectedOption:e.selectedOption,setSelectedOption:function(t){e.setSelectedOption(t)},search:!1,turn:c}),r.a.createElement(To,{loading:v,component:Fo,selectedOption:e.selectedOption,onAdjust:function(e){d(e),h(!0)},turn:c,adjust:!0,fetch:_}),r.a.createElement(Uo,{closable:function(e,t){h(!1),"save"===t&&function(e){O(!0),N(!1),xo.newCashAdjustment(e).then((function(e){f.a.success("Se guardo el ajuste correctamente"),x(e.store_id)})).catch((function(e){console.log(e),f.a.error("No se pudo guardar el ajuste"),O(!1)}))}(e)},visible:g,adjust:u}))},Bo=kt.a.TabPane;var Ro=[{name:"Empresas",key:"enterprises",icon:"enterprises",route:"/enterprises",component:$e,profilePermissions:[1]},{name:"Usuarios",key:"users",icon:"users",route:"/users",component:ft,profilePermissions:[5]},{name:"Tiendas",key:"shops",icon:"shops",route:"/shops",component:zt,profilePermissions:[9]},{name:"Productos",key:"products",icon:"products",route:"/products",component:gr,profilePermissions:[21]},{name:"Clientes",key:"clients",icon:"clients",route:"/clients",component:Nt,profilePermissions:[61]},{name:"Configuracion",key:"configurations",icon:"configurations",route:"/configurations",component:xn,profilePermissions:[65]},{name:"Inventario",key:"inventory",icon:"inventory",route:"/inventory",component:bc,profilePermissions:[25]},{name:"Caja",key:"cash-register",icon:"cashRegister",route:"/cash-register",component:function(){var e=Object(n.useContext)(ae),t=Object(i.a)(e,1)[0],a=te(t).hasPermissions,c=Object(n.useState)(null),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)([]),d=Object(i.a)(u,2),m=d[0],p=d[1];Object(n.useEffect)((function(){g()}),[]);var g=function(){xo.getAllStores().then((function(e){p(e.data)})).catch((function(e){console.log(e),f.a.error("Error en al cargar tiendas")}))},h=function(e){s(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(He,{title:"Caja"}),r.a.createElement(kt.a,{id:"tenderoInventoryTabs",className:"inventory-tab cashRegister-tab"},a([41])&&r.a.createElement(Bo,{tab:"Dep\xf3sitos",key:"1"},r.a.createElement(Io,{shopsList:m,selectedOption:l,setSelectedOption:h})),a([53])&&r.a.createElement(Bo,{tab:"Efectivo en tienda",key:"2"},r.a.createElement(zo,{shopsList:m,selectedOption:l,setSelectedOption:h}))))},profilePermissions:[41]},{name:"POS",key:"pos",icon:"pos",route:"/pos",component:yo,profilePermissions:[45]}];var Mo=function(){var e=Object(n.useContext)(ae),t=Object(i.a)(e,1)[0],a=te(t).hasPermissions,c=Object(l.g)(),o=Object(n.useState)(""),s=Object(i.a)(o,2),u=s[0],d=s[1];Object(n.useEffect)((function(){var e=Ro.find((function(e){return e.route===c.location.pathname}));if(a(e.profilePermissions))d(e.key);else{var t=Ro.find((function(e){return a(e.profilePermissions)}));d(t.key)}}),[]);var m=function(e){switch(e){case"enterprises":return r.a.createElement(b.a,{style:{color:"#01c01e",fontSize:"18px"}});case"users":return r.a.createElement(E.a,{style:{color:"#01c01e",fontSize:"18px"}});case"shops":return r.a.createElement(v.a,{style:{color:"#01c01e",fontSize:"18px"}});case"products":return r.a.createElement(O.a,{style:{color:"#01c01e",fontSize:"18px"}});case"clients":return r.a.createElement(j.a,{style:{color:"#01c01e",fontSize:"18px"}});case"configurations":return r.a.createElement(y.a,{style:{color:"#01c01e",fontSize:"18px"}});case"inventory":return r.a.createElement(_.a,{style:{color:"#01c01e",fontSize:"18px",transform:"rotate(-90deg)"}});case"pos":return r.a.createElement(N.a,{style:{color:"#01c01e",fontSize:"18px"}});case"cashRegister":return r.a.createElement(x.a,{style:{color:"#01c01e",fontSize:"18px"}});default:return r.a.createElement(r.a.Fragment,null)}};return r.a.createElement(h.a,{mode:"inline",selectedKeys:[u],style:{height:"100%",paddingTop:"20px"}},Ro&&Ro.length>0&&Ro.map((function(e,t){return a(e.profilePermissions)&&r.a.createElement(h.a.Item,{key:e.key,icon:m(),onClick:function(){return d(e.key)}},r.a.createElement(S.a,{to:e.route},m(e.icon),r.a.createElement("span",{style:{paddingLeft:"13px"}},e.name)))})))};var Lo=function(e){return r.a.createElement("div",{className:"logo center-flex-div user-options",style:{height:"55px",width:"100%",cursor:"pointer"}},r.a.createElement("img",{className:"menu-user-img",src:"/tendero/usuario.png",alt:"Usuario"}),r.a.createElement("span",{className:e.collapsed?"hide-component":"show-component",style:{marginLeft:"10px"}},e.userName),r.a.createElement("div",{className:e.collapsed?"user-options-container user-options-container-collapse":"user-options-container"},r.a.createElement("span",{className:"user-options-items",onClick:e.OnResetPassword},"Cambiar contrase\xf1a"),r.a.createElement(g.a,{className:"divider-custom-margins",type:"horizontal"}),r.a.createElement("span",{className:"user-options-items",onClick:e.OnClose},"Cerrar Sesion")))},qo=function(){var e=Object(m.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.post("".concat(W.a.stage.login),{username:t,password:a});case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),Ho=function(){var e=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.post("".concat(W.a.stage.logout),{},{headers:{Authorization:"Bearer "+ee.sessionApp(null,"token"),"Content-Type":"application/json"}});case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ko=function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue(W.a.stage.reset,t).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Go={authLogin:qo,closeSession:Ho,currentUser:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le(W.a.stage.currentUser,{}).then((function(e){return e})).catch((function(e){return"Unauthenticated."===e?Le.clearForAuthError():console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),resetPassword:Ko},Jo=oe.a.Title;var Qo=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),h=p[0],b=p[1],E="Todos los campos son obligatorios.",v="La nueva contrase\xf1a debe contener al menos 8 caracteres",O="La nueva contrase\xf1a debe ser distinta a la anterior",j="La nueva contrase\xf1a debe ser igual en ambos campos",y=function(){o(""),d(""),b(""),e.closable()};return r.a.createElement(Ge.a,{id:"reset-pass-drawer",placement:"right",closable:!1,onClose:e.closable,visible:e.visible,width:800},r.a.createElement("div",null,r.a.createElement(Jo,null," ","Cambiar contrase\xf1a"," "),r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Contrase\xf1a actual"),r.a.createElement(w.a,{value:c,onChange:function(e){return o(e.target.value)},placeholder:"Escribe tu contrase\xf1a actual",size:"large"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Nueva contrase\xf1a"),r.a.createElement(w.a,{value:u,onChange:function(e){return d(e.target.value)},placeholder:"Escribe tu nueva contrase\xf1a",size:"large"}))),r.a.createElement(T.a,{gutter:16,className:"section-space-field"},r.a.createElement(I.a,{xs:12,sm:12,md:12,lg:12},r.a.createElement("div",{className:"title-space-field"},"Confirmar nueva contrase\xf1a"),r.a.createElement(w.a,{value:h,onChange:function(e){return b(e.target.value)},placeholder:"Escribe otra vez tu nueva contrase\xf1a",size:"large"})))),r.a.createElement("div",null,r.a.createElement(g.a,{className:"divider-custom-margins-users"}),r.a.createElement(T.a,{gutter:16},r.a.createElement(I.a,{xs:24,sm:24,md:24,lg:24},r.a.createElement("div",{className:"text-right"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"link",className:"cancel-button",onClick:y},"Cancelar"),r.a.createElement(P.a,{htmlType:"submit",className:"title-tendero new-button",onClick:function(){if(""===c||""===u||""===h)return f.a.warning(E);if(c===u)return f.a.warning(O);if(u!==h)return f.a.warning(j);if(u.length<8)return f.a.warning(v);var e={actual_password:c,password:u,password_confirmation:h};Go.resetPassword(e).then((function(e){if(!e||"object"!==typeof e&&"The given data was invalid."===e)return f.a.info("No se ha podido cambiar la contrase\xf1a.");f.a.success(e.message),y()})).catch((function(e){console.log(e),f.a.error("Error al cambiar la contrase\xf1a.")}))}},"Guardar")))))))},Zo=p.a.Content,Yo=p.a.Footer;var Vo=function(e){return r.a.createElement("div",null,r.a.createElement(p.a,{className:"site-layout-background"},e.children),r.a.createElement(Zo,null,r.a.createElement(Yo,{className:"center-flex-div"},"Tendero \xa92020 - V ","1.0.74")))},Wo=a(263),$o=a.n(Wo),Xo=a(262),ei=a.n(Xo),ti=p.a.Content,ai=p.a.Sider;var ni=Object(l.h)((function(e){var t=Object(l.g)(),a=Object(n.useContext)(ae),c=Object(i.a)(a,2),o=c[0],s=c[1],u=te(o).hasPermissions,p=Object(n.useState)(!1),h=Object(i.a)(p,2),b=h[0],E=h[1],v=Object(n.useState)(!1),O=Object(i.a)(v,2),j=O[0],y=O[1],_=Object(n.useState)(!1),N=Object(i.a)(_,2),x=N[0],S=N[1];Object(n.useEffect)((function(){y(!0),Go.currentUser().then((function(e){s({type:"AUTH FETCHED",payload:e}),y(!1)}))}),[s]);var w=function(){E(!b)},k=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,Go.closeSession().then((function(e){ee.sessionApp(null,"remove"),s({type:"AUTH"}),y(!1),f.a.success("Adios!")})).catch((function(e){y(!1),f.a.error("Ocurrio un error al cerrar la sesion!")}));case 3:t.go(0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Vo,null,r.a.createElement(ai,{trigger:null,className:"site-layout-background sider",collapsible:!0,collapsed:b,onCollapse:w,breakpoint:"lg",theme:"light"},r.a.createElement("div",{className:"logo center-flex-div",style:{height:"55px",width:"100%"}},r.a.createElement("div",{onClick:w,className:"fold-unfold-menu"}," ",b?r.a.createElement($o.a,null):r.a.createElement(ei.a,null)),r.a.createElement("img",{style:{height:"100%"},alt:"Tendero",src:b?"/tendero/tendero-logo-small.png":"/tendero/tendero-logo.png"})),r.a.createElement(g.a,{className:"divider-custom-margins-nav",type:"horizontal"}),r.a.createElement(Lo,{userName:o.auth.name,collapsed:b,OnClose:k,OnResetPassword:function(){S(!0)}}),r.a.createElement(g.a,{className:"divider-custom-margins-nav",type:"horizontal"}),r.a.createElement(Mo,null)),r.a.createElement(ti,null,r.a.createElement("div",{style:{padding:24,marginTop:"-26px"}},j?r.a.createElement($r,null):r.a.createElement(l.d,null,Ro.map((function(e,t){return u(e.profilePermissions)&&r.a.createElement(l.b,{exact:!0,key:t,path:e.route,component:e.component})})),r.a.createElement(l.a,{to:Ro.find((function(e){return u(e.profilePermissions)})).route}))))),r.a.createElement(Qo,{closable:function(){S(!1)},visible:x}))})),ri=a(2222),ci=a(214),oi=a.n(ci),ii=a(142),li=a.n(ii),si={stringify:function(e){var t={ct:e.ciphertext.toString(li.a.enc.Base64)};return e.iv&&(t.iv=e.iv.toString()),e.salt&&(t.s=e.salt.toString()),JSON.stringify(t).replace(/\s/g,"")},parse:function(e){var t=JSON.parse(e),a=li.a.lib.CipherParams.create({ciphertext:li.a.enc.Base64.parse(t.ct)});return t.iv&&(a.iv=li.a.enc.Hex.parse(t.iv)),t.s&&(a.salt=li.a.enc.Hex.parse(t.s)),a}};var ui=function(){var e=Object(n.useContext)(ae),t=Object(i.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(!1),o=Object(i.a)(c,2),l=o[0],s=o[1],u=function(){var e=Object(m.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{s(!0),n=oi.a.encrypt(JSON.stringify(t.username),W.a.passphrase,{format:si}).toString(),r=oi.a.encrypt(JSON.stringify(t.password),W.a.passphrase,{format:si}).toString(),Go.authLogin(n,r).then((function(e){if(!(null===e||void 0===e?void 0:e.data))return f.a.error((null===e||void 0===e?void 0:e.message)||"Ocurrio un error"),void s(!1);ee.sessionApp(e.data,"setter"),a({type:"AUTH FETCHED",payload:e.data}),s(!1)}))}catch(c){a({type:"AUTH"}),s(!1),f.a.error(c)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(T.a,{type:"flex",justify:"center",align:"middle",className:"login-row-container"},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("img",{src:"/tendero/tendero-logo-lg.png",className:"login-logo-lg",alt:"moocho"}),r.a.createElement("div",{className:"login-container"},r.a.createElement(ri.a,{name:"login-form",onFinish:u,onFinishFailed:function(e){e.errorFields.map((function(e){return f.a.error(e.errors)}))},style:{width:"400px"},labelAlign:"left",labelCol:{xs:24,sm:24,md:24,lg:24},wrapperCol:{xs:24,sm:24,md:24,lg:24},colon:!1},r.a.createElement(ri.a.Item,{style:{textAlign:"left"},label:"Usuario",name:"username",rules:[{message:"Ingresa un username valido",type:"string"}]},r.a.createElement(w.a,{placeholder:"Escribe tu usuario",size:"large"})),r.a.createElement(ri.a.Item,{style:{textAlign:"left"},label:"Contrase\xf1a",name:"password"},r.a.createElement(w.a.Password,{placeholder:"Escribe tu contrase\xf1a",size:"large"})),r.a.createElement("div",{className:"login-button-container",style:{paddingBottom:"25px"}},r.a.createElement(P.a,{type:"link",className:"login-btn-link"},"\xbfNo recuerdas tu contrase\xf1a? Contacta con el administrador de tu cuenta")),r.a.createElement("div",{className:"login-button-container"},r.a.createElement(ri.a.Item,null,r.a.createElement(P.a,{style:{width:"200px"},className:"bottom-login login-btn",disabled:l,loading:l,type:"primary",htmlType:"submit"},"Iniciar sesion")),r.a.createElement("span",{className:"login-btn-link title-space-top"},"V - ","1.0.74"))))))},di=Object(s.a)();var mi=function(){var e=Object(n.useContext)(ae);return Object(i.a)(e,1)[0].auth.token?r.a.createElement(l.c,{basename:"/tendero",history:di},r.a.createElement(l.d,null,r.a.createElement(l.b,{render:function(e){return r.a.createElement(ni,e)}}))):(di.push("/"),r.a.createElement(ui,null))},pi=a(17),fi=a(403),gi=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function hi(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?t&&t.onUpdate&&t.onUpdate(e):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(pi.b,{locale:fi.a},r.a.createElement(ne,null,r.a.createElement(mi,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/tendero",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/tendero","/service-worker.js");gi?function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):hi(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e):hi(t,e)}))}}()},408:function(e,t,a){e.exports=a(2213)},8:function(e,t){var a="https://tendero-core.herokuapp.com/api/",n="https://tendero-core.herokuapp.com/api/",r={login:"".concat(n,"auth/login"),logout:"".concat(n,"auth/logout"),refresh:"".concat(n,"auth/refresh"),reset:"".concat(n,"auth/reset"),currentUser:"".concat(n,"auth/me"),companies:"".concat(n,"companies"),companies_options:"".concat(n,"companies-options"),countries:"".concat(n,"countries"),countries_options:"".concat(n,"countries-options"),currencies:"".concat(n,"currencies"),currencies_options:"".concat(n,"currencies-options"),users:"".concat(n,"users"),stores:"".concat(n,"stores"),stores_options:"".concat(n,"stores-options"),storeType:"".concat(n,"store-types"),storeType_options:"".concat(n,"store-types-options"),storeChain:"".concat(n,"store-chains"),storeChain_options:"".concat(n,"store-chains-options"),storeFlag:"".concat(n,"store-flags"),storeFlag_options:"".concat(n,"store-flags-options"),Location:"".concat(n,"location-types"),Location_options:"".concat(n,"location-types-options"),storeFormat:"".concat(n,"store-formats"),storeFormat_options:"".concat(n,"store-formats-options"),socioeconomicLevel:"".concat(n,"socioeconomic-levels"),socioeconomicLevel_options:"".concat(n,"socioeconomic-levels-options"),states:"".concat(n,"states"),states_options:"".concat(n,"states-options"),Zones:"".concat(n,"zones"),Zones_options:"".concat(n,"zones-options"),Municipality:"".concat(n,"municipalities"),Municipality_options:"".concat(n,"municipalities-options"),Region:"".concat(n,"regions"),Client:"".concat(n,"clients"),Client_options:"".concat(n,"clients-options"),Makers:"".concat(n,"makers"),Uoms:"".concat(n,"uoms"),Uoms_options:"".concat(n,"uoms-options"),Brands:"".concat(n,"brands"),Brands_options:"".concat(n,"brands-options"),Providers:"".concat(n,"providers"),Providers_options:"".concat(n,"providers-options"),ProductDepartament:"".concat(n,"product-departments"),ProductCategory:"".concat(n,"product-categories"),ProductCategory_options:"".concat(n,"product-categories-options"),ProductSubCategory:"".concat(n,"product-subcategories"),ProductSubCategory_options:"".concat(n,"product-subcategories-options"),products:"".concat(n,"products"),products_options:"".concat(n,"products-options"),productCategories:"".concat(n,"product-categories"),productSubCategories:"".concat(n,"product-subcategories"),brands:"".concat(n,"brands"),uoms:"".concat(n,"uoms"),locationType:"".concat(n,"location-types"),paymentMethod:"".concat(n,"payment-methods"),paymentMethod_options:"".concat(n,"payment-methods-options"),Turns:"".concat(n,"turns"),Turns_options:"".concat(n,"turns-options"),Presentations:"".concat(n,"presentations"),Presentations_options:"".concat(n,"presentations-options"),Skus:"".concat(n,"presentation-skus"),Combos:"".concat(n,"presentation-combos"),permissions:"".concat(n,"permissions"),userPermissions:function(e){return"".concat(n,"users/").concat(e,"/permissions")},transfers:"".concat(n,"transfers"),counts:"".concat(n,"stock-counts"),purchases:"".concat(n,"purchases"),inventory:"".concat(n,"stocks"),adjustments:"".concat(n,"adjustments"),roles:"".concat(n,"roles-options"),deposits:"".concat(n,"deposits"),storeTurns:"".concat(n,"store-turns"),sells:"".concat(n,"sells"),sellsOffline:"".concat(n,"sells-offline"),sellPayments:"".concat(n,"sell-payments"),cashAdjustment:"".concat(n,"cash-adjustments"),storesCash:"".concat(n,"stores-cash")},c={login:"".concat(a,"auth/login"),logout:"".concat(a,"auth/logout"),refresh:"".concat(a,"auth/refresh"),reset:"".concat(a,"auth/reset"),currentUser:"".concat(a,"auth/me"),companies:"".concat(a,"companies"),companies_options:"".concat(a,"companies-options"),countries:"".concat(a,"countries"),countries_options:"".concat(a,"countries-options"),currencies:"".concat(a,"currencies"),currencies_options:"".concat(a,"currencies-options"),users:"".concat(a,"users"),stores:"".concat(a,"stores"),stores_options:"".concat(a,"stores-options"),storeType:"".concat(a,"store-types"),storeType_options:"".concat(a,"store-types-options"),storeChain:"".concat(a,"store-chains"),storeChain_options:"".concat(a,"store-chains-options"),storeFlag:"".concat(a,"store-flags"),storeFlag_options:"".concat(a,"store-flags-options"),Location:"".concat(a,"location-types"),Location_options:"".concat(a,"location-types-options"),storeFormat:"".concat(a,"store-formats"),storeFormat_options:"".concat(a,"store-formats-options"),socioeconomicLevel:"".concat(a,"socioeconomic-levels"),socioeconomicLevel_options:"".concat(a,"socioeconomic-levels-options"),states:"".concat(a,"states"),states_options:"".concat(a,"states-options"),Zones:"".concat(a,"zones"),Zones_options:"".concat(a,"zones-options"),Municipality:"".concat(a,"municipalities"),Municipality_options:"".concat(a,"municipalities-options"),Region:"".concat(a,"regions"),Client:"".concat(a,"clients"),Client_options:"".concat(a,"clients-options"),Makers:"".concat(a,"makers"),Uoms:"".concat(a,"uoms"),Uoms_options:"".concat(a,"uoms-options"),Brands:"".concat(a,"brands"),Brands_options:"".concat(a,"brands-options"),Providers:"".concat(a,"providers"),Providers_options:"".concat(a,"providers-options"),ProductDepartament:"".concat(a,"product-departments"),ProductCategory:"".concat(a,"product-categories"),ProductCategory_options:"".concat(a,"product-categories-options"),ProductSubCategory:"".concat(a,"product-subcategories"),ProductSubCategory_options:"".concat(a,"product-subcategories-options"),products:"".concat(a,"products"),products_options:"".concat(a,"products-options"),productCategories:"".concat(a,"product-categories"),productSubCategories:"".concat(a,"product-subcategories"),brands:"".concat(a,"brands"),uoms:"".concat(a,"uoms"),locationType:"".concat(a,"location-types"),paymentMethod:"".concat(a,"payment-methods"),paymentMethod_options:"".concat(a,"payment-methods-options"),Turns:"".concat(a,"turns"),Turns_options:"".concat(a,"turns-options"),Presentations:"".concat(a,"presentations"),Presentations_options:"".concat(a,"presentations-options"),Skus:"".concat(a,"presentation-skus"),Combos:"".concat(a,"presentation-combos"),permissions:"".concat(a,"permissions"),userPermissions:function(e){return"".concat(a,"users/").concat(e,"/permissions")},transfers:"".concat(a,"transfers"),counts:"".concat(a,"stock-counts"),purchases:"".concat(a,"purchases"),inventory:"".concat(a,"stocks"),adjustments:"".concat(a,"adjustments"),roles:"".concat(a,"roles-options"),deposits:"".concat(a,"deposits"),storeTurns:"".concat(a,"store-turns"),sells:"".concat(a,"sells"),sellsOffline:"".concat(a,"sells-offline"),sellPayments:"".concat(a,"sell-payments"),cashAdjustment:"".concat(a,"cash-adjustments"),storesCash:"".concat(a,"stores-cash")};e.exports={stage:function(e){switch(e){case"production":return r;default:return c}}("develop"),passphrase:"base64:IES06ldztmFbjoPQnUvnMrUiZrJLMPi8GbxxhqSTKLQ="}}},[[408,1,2]]]);
//# sourceMappingURL=main.518af4df.chunk.js.map